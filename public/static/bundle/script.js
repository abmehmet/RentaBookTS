(()=>{"use strict";var t={221:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataBase=void 0;const o=n(758),a=n(51);e.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new a.SaleCart,this._rentCart=new o.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(t){this._saleCart=t}set setRentCart(t){this._rentCart=t}}},39:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BookSpecification=void 0,e.BookSpecification=class{constructor(t,e,n,o){this._isbn=t,this._price=e,this._startDate=n,this._endDate=o}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(t){this._isbn=t}set price(t){this._price=t}set startDate(t){this._startDate=t}set endDate(t){this._endDate=t}}},934:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Book=void 0,e.Book=class{constructor(t,e,n,o,a,i){this._name=e,this._author=n,this._isbn=t,this._publishYear=o,this._pages=a,this._bookSpec=i}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpec(){return this._bookSpec}set isbn(t){this._isbn=t}set name(t){this._name=t}set author(t){this._author=t}set publishYear(t){this._publishYear=t}set pages(t){this._pages=t}set bookSpec(t){this._bookSpec=t}}},378:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cancel=void 0,e.Cancel=class{constructor(t,e,n){this._cancelType=t,this._refund=e,this._canceledDateTime=n}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(t){this._cancelType=t}set refund(t){this._refund=t}set canceledDateTime(t){this._canceledDateTime=t}}},916:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Customer=void 0,e.Customer=class{constructor(t,e,n,o){this._id=t,this._name=e,this._surName=n,this._phoneNumber=o}get id(){return this._id}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set id(t){this._id=t}set name(t){this._name=t}set surName(t){this._surName=t}set phoneNumber(t){this._phoneNumber=t}}},758:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RentCart=void 0,e.RentCart=class{constructor(){this.bookAndQuantityMap=new Map}}},961:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rent=void 0;const o=n(354);class a extends o.Sale{constructor(t,e,n,o,a,i,r){super(t,e,n,o,a),this._refundDate=i,this._refund=r}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(t){this._refundDate=t}set refund(t){this._refund=t}}e.Rent=a},51:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SaleCart=void 0,e.SaleCart=class{constructor(){this.bookAndQuantityMap=new Map}}},354:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sale=void 0,e.Sale=class{constructor(t,e,n,o,a){this._bookAndQuantityMap=new Map,this._bookAndQuantityMap=t,this._operationDateTime=e,this._customerId=n,this._operationNumber=o,this._total=a}get bookAndQuantityMap(){return this._bookAndQuantityMap}get operationDateTime(){return this._operationDateTime}get customerId(){return this._customerId}get operationNumber(){return this._operationNumber}get total(){return this._total}set bookAndQuantityMap(t){this._bookAndQuantityMap=t}set operationDateTime(t){this._operationDateTime=t}set customerId(t){this._customerId=t}set operationNumber(t){this._operationNumber=t}set total(t){this._total=t}}},72:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stock=void 0,e.Stock=class{constructor(t,e,n){this._isbn=t,this._quantity=e,this._shelfNumber=n}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(t){this._isbn=t}set quantity(t){this._quantity=t}set shelfNumber(t){this._shelfNumber=t}}},607:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.stockService=e.saleService=e.rentService=e.cancelService=e.customerService=e.bookService=void 0;const a=n(221),i=n(934),r=n(39),s=n(378),c=n(916),l=n(961),u=n(354),d=n(72),h=n(946),m=n(943),p=n(709),k=n(148),f=n(478),S=n(214);function b(t,e){const n=document.getElementById(e),o=document.getElementById(t);n&&o&&o.addEventListener("click",(()=>{"none"===n.style.display?n.style.display="block":n.style.display="none"}))}var y;y=new a.DataBase,e.bookService=new h.BookService(y.getBooksList,y.getBookSpecifications),e.customerService=new p.CustomerService(y.getCustomersList),e.cancelService=new m.CancelService(y.getCancaledSales),e.rentService=new k.RentService(y.getRents,y.getRentCart),e.saleService=new f.SaleService(y.getSalesList,y.getSaleCart),e.stockService=new S.StockService(y.getStocksList),console.log("Services intiliazed."),e.customerService.addCustomer(new c.Customer(1,"","","")),e.customerService.addCustomer(new c.Customer(2,"","","")),e.stockService.addStock("123-45","A45-52",10),e.stockService.addStock("123-46","A45-52",10),function(){o(this,void 0,void 0,(function*(){yield e.bookService.initializeDataMock()}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection");const g=document.getElementById("add-book-form");null!=g&&(g.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(g),o=n.get("bookTitle"),a=n.get("bookAuthor"),s=n.get("bookIsbn"),c=n.get("bookPublishYear"),l=n.get("bookPages"),u=n.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59");o.match("");const m=new r.BookSpecification(s,u,d,h),p=new i.Book(s,o,a,c,l,m);return(yield e.bookService.addBookMock(p))?(alert(p.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),g.reset()):alert(p.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const v=document.getElementById("add-stock-form");v&&(v.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(v),o=n.get("bookIsbnForAddStock"),a=n.get("stockQuantity"),i=n.get("shelfNumber"),r=new d.Stock(o,a,i);return e.bookService.bookList.some((t=>t.isbn==o))?(yield e.stockService.addStockMock(r))&&alert(o+" isbn numaralı kitaptan, "+a+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),v.reset(),!1})));const _=document.getElementById("add-customer-form");_&&(_.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();const n=new FormData(_),o=n.get("customerName"),a=n.get("customerSurname"),i=n.get("customerPhoneNumber"),r=new c.Customer(e.customerService.getNewCustomerId(),o,a,i);return yield e.customerService.addCustomerMock(r),alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),_.reset(),!1})));const C=document.getElementById("sale-book-form");C&&(C.onsubmit=()=>{const t=new FormData(C),n=t.get("isbnForSale"),o=e.bookService.getBook(n),a=parseInt(t.get("customerIdForSale")),i=e.customerService.isValidCustomer(a),r=parseInt(t.get("quantityForSale")),s=e.stockService.getStock(n);try{return o?s?s.quantity>=r?i?e.saleService.addBookToCart(o,r,a):alert(a+" numaralı müşteri kayıtlı değildir."):alert(r+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir.`):alert(n+" numaralı kitap yoktur."),C.reset(),!1}catch(t){alert(t)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===e.saleService.saleCart.bookAndQuantityMap.size?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):e.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{e.bookService.listBooks()}));const w=document.getElementById("cancel-sale-form");w&&(w.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();let n=new Map;n.set(e.bookService.getBook("123-45"),3);let o=new u.Sale(n,new Date,1,"S021122163045",123);e.saleService.saleList.push(o);const a=new FormData(w).get("saleNumberforCancel");let i=e.saleService.getSale(a);if(i){let t=new s.Cancel(i,i.total,new Date);(yield e.cancelService.cancelSaleMock(t))?alert(i.operationNumber+" numaralı satış iptal edilmiştir."):alert(i.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(a+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const M=document.getElementById("cancel-rent-form");M&&(M.onsubmit=t=>o(void 0,void 0,void 0,(function*(){t.preventDefault();let n=new Map;n.set(e.bookService.getBook("123-45"),3);let o=new Date;o.setDate(o.getDate()+14);let a=new l.Rent(n,new Date,1,"R021122163045",123,o,200);e.rentService.rentList.push(a);const i=new FormData(M).get("rentNumberforCancel");e.rentService.getRent(i)})));const L=document.getElementById("rent-book-form");L&&(L.onsubmit=()=>{const t=new FormData(L),n=t.get("isbnForRent"),o=e.bookService.getBook(n),a=parseInt(t.get("customerIdForRent")),i=e.customerService.isValidCustomer(a),r=parseInt(t.get("quantityForRent")),s=e.stockService.getStock(n);try{return o?s?s.quantity>=r?i?e.rentService.addBookToCart(o,r,a):alert(a+" numaralı müşteri kayıtlı değildir."):alert(r+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${n} numaralı kitabın stoğu mevcut değildir.`):alert(n+" numaralı kitap yoktur."),L.reset(),!1}catch(t){alert(t)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===e.rentService.rentCart.bookAndQuantityMap.size?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):e.rentService.cartToRent()}))},946:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BookService=void 0;const a=n(607);e.BookService=class{constructor(t,e){this.bookApi="http://localhost:3002/api/books/",this._bookList=t,this._bookSpecList=e}get bookList(){return this._bookList}set bookList(t){this._bookList=t}get bookSpecList(){return this._bookSpecList}set bookSpecList(t){this._bookSpecList=t}getBook(t){return this.bookList.find((e=>e.isbn===t))}addBook(t){try{this.bookList.push(t),this._bookSpecList.push(t.bookSpec)}catch(t){console.log("Kitap eklenirken bir hata meydana geldi.")}}isValidBook(t){const e=this.getBook(t);return this.bookList.includes(e)}initializeDataMock(){return o(this,void 0,void 0,(function*(){try{const t=yield fetch("http://localhost:3002/api/books",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const e=yield t.json(),n=JSON.parse(JSON.stringify(e,null,4));this.bookList=n}catch(t){console.error(t)}}))}listBooks(){const t=document.getElementById("listBooks");if(t){let e,n;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);this.bookList.forEach((o=>{e=document.createElement("div"),e.className="row-list-book",n=document.createElement("div"),n.className="column-list-book",n.textContent=o.isbn.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.name.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.author.toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=a.stockService.getStockQuantity(o.isbn).toString(),e.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=o.bookSpec.price.toString()+" ₺",e.appendChild(n),t.appendChild(e)}))}}addBookMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:t.isbn,name:t.name,author:t.author,pages:t.pages,publishYear:t.publishYear}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log("Mock servisinden dönen cevap =>"+JSON.stringify(t)),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},943:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CancelService=void 0,e.CancelService=class{constructor(t){this.cancelSaleApi="http://localhost:3002/api/cancelSale",this.cancelRentApi="http://localhost:3002/api/cancelRent",this._cancelledList=t}get cancelledList(){return this._cancelledList}set cancelledList(t){this._cancelledList=t}calculateDiffHours(t,e){let n=t.getTime()-e.getTime();return Math.floor(n/1e3/60/60)}cancelSale(t){let e=this.calculateCancelSaleRefund(t);t.refund=e,this.cancelledList.push(t)}calculateCancelSaleRefund(t){let e;return e=this.calculateDiffHours(t.canceledDateTime,t.cancelType.operationDateTime)>24?.75*t.cancelType.total:t.cancelType.total,e}cancelSaleMock(t){return n(this,void 0,void 0,(function*(){let e=this.calculateCancelSaleRefund(t);t.refund=e;try{const e=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:t.cancelType,refund:t.refund,canceledDateTime:t.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}cancelRent(t){let e=this.calculateCancelRentRefund(t);t.refund=e,this.cancelledList.push(t)}calculateCancelRentRefund(t){let e;return e=this.calculateDiffHours(t.canceledDateTime,t.cancelType.operationDateTime)>24?.75*t.cancelType.total:t.cancelType.total,e}cancelRentMock(t){return n(this,void 0,void 0,(function*(){let e=this.calculateCancelRentRefund(t);t.refund=e;try{const e=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:t.cancelType,refund:t.refund,canceledDateTime:t.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},709:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomerService=void 0,e.CustomerService=class{constructor(t){this.customerApi="http://localhost:3002/api/customers",this._customerList=t}get customerList(){return this._customerList}set customerList(t){this._customerList=t}addCustomer(t){this.customerList.push(t)}getNewCustomerId(){let t=0;return this.customerList.length>0&&(t=this.customerList.at(this.customerList.length-1).id),t+=1,t}getCustomerInfo(t){return this.customerList.find((e=>e.id===t))||void 0}isValidCustomer(t){return!!this.customerList.some((e=>e.id===t))}addCustomerMock(t){return n(this,void 0,void 0,(function*(){try{const e=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({id:t.id,name:t.name,surName:t.surName,phoneNumber:t.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n)}catch(t){console.log("Hata Oluştu.")}}))}}},148:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RentService=void 0;const a=n(607),i=n(961),r=n(758);e.RentService=class{constructor(t,e){this.rentApi="http://localhost:3002/api/rents",this._rentList=t,this.refundPercent=.75,this._rentCart=e}get rentList(){return this._rentList}set rentList(t){this._rentList=t}get rentCart(){return this._rentCart}set rentCart(t){this._rentCart=t}addRent(t){this.rentList.push(t)}calculateTotal(t){t.bookAndQuantityMap;let e=0;for(let n of t.bookAndQuantityMap)e+=n[0].bookSpec.price*n[1];return e}generateRentNumber(t){let e=new Date;return"R"+e.getDay().toString+e.getMonth().toString+e.getFullYear().toString+e.getHours().toString+e.getMinutes().toString+e.getSeconds().toString+t.toString}calculateRefund(t){t.refund=t.total*this.refundPercent}getRent(t){return this.rentList.find((e=>e.operationNumber===t))}addBookToCart(t,e,n){if(0===this.rentCart.bookAndQuantityMap.size)this.rentCart.customerId=n;else if(this.rentCart.bookAndQuantityMap.size>0&&this.rentCart.customerId!==n)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.bookAndQuantityMap.set(t,e),this.updateRentCart()}updateRentCart(){const t=document.getElementById("rentCart"),e=document.getElementById("totalRentAmountTl");if(t){let n,o,a=0;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);e.textContent="";for(let t=0;t<this.rentCart.bookAndQuantityMap.size;t++){n=document.createElement("div"),n.className="rent-cart-row";for(let t of this.rentCart.bookAndQuantityMap.entries())o=document.createElement("div"),o.className="rent-cart-column",o.textContent=this.rentCart.customerId.toString(),n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=t[0].name,n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=t[1].toString(),n.appendChild(o),o=document.createElement("div"),o.className="rent-cart-column",o.textContent=(t[0].bookSpec.price*t[1]).toString(),n.appendChild(o)}if(n&&e){for(let t of this.rentCart.bookAndQuantityMap)a+=t[0].bookSpec.price*t[1];t.appendChild(n),e.textContent=a.toString()+" TL"}}}cartToRent(){let t=this.rentCart,e=new i.Rent;e.bookAndQuantityMap=t.bookAndQuantityMap,e.customerId=t.customerId,e.operationNumber=this.generateRentNumber(t.customerId),e.operationDateTime=new Date,e.total=this.calculateTotal(e);for(let t of e.bookAndQuantityMap)a.stockService.increaseStock(t[0].isbn,-t[1]);this.rentCart=new r.RentCart,this.updateRentCart(),this.addRentMock(e)}addRentMock(t){return o(this,void 0,void 0,(function*(){try{console.log(t.bookAndQuantityMap);const e=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({bookAndQuantity:t.bookAndQuantityMap,customerId:t.customerId,operationDateTime:t.operationDateTime,operationNumber:t.operationNumber,total:t.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),alert(t.message+" "+t.saleNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu.")}}))}}},478:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SaleService=void 0;const a=n(607),i=n(354),r=n(51);e.SaleService=class{constructor(t,e){this.saleApi="http://localhost:3002/api/sales",this._saleList=t,this._saleCart=e}get saleList(){return this._saleList}set saleList(t){this._saleList=t}get saleCart(){return this._saleCart}set saleCart(t){this._saleCart=t}addSale(t){this.saleList.push(t)}calculateTotal(t){let e=0;for(let n of t.bookAndQuantityMap.entries())e+=n[0].bookSpec.price*n[1];return e}generateSaleNumber(t){let e=new Date;return"S"+e.getDay().toString()+e.getMonth().toString()+e.getFullYear().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString()+t.toString()}getSale(t){return this.saleList.find((e=>e.operationNumber===t))}removeSale(t){let e=this.saleList.indexOf(t);this.saleList.splice(e,1)}addBookToCart(t,e,n){if(0===this.saleCart.bookAndQuantityMap.size)this.saleCart.customerId=n;else if(this.saleCart.bookAndQuantityMap.size>0&&this.saleCart.customerId!==n)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.saleCart.bookAndQuantityMap.set(t,e),this.updateSaleCart()}updateSaleCart(){const t=document.getElementById("saleCart"),e=document.getElementById("totalSaleAmountTl");if(t){let n,o,a=0;for(;t.lastChild&&t.children.length>1;)t.removeChild(t.lastChild);e.textContent="";for(let t=0;t<this.saleCart.bookAndQuantityMap.size;t++){n=document.createElement("div"),n.className="sale-cart-row";for(let t of this.saleCart.bookAndQuantityMap.entries())o=document.createElement("div"),o.className="sale-cart-column",o.textContent=this.saleCart.customerId.toString(),n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=t[0].name,n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=t[1].toString(),n.appendChild(o),o=document.createElement("div"),o.className="sale-cart-column",o.textContent=(t[0].bookSpec.price*t[1]).toString(),n.appendChild(o)}if(n&&e){for(let t of this.saleCart.bookAndQuantityMap)a+=t[0].bookSpec.price*t[1];t.appendChild(n),e.textContent=a.toString()+" TL"}}}cartToSale(){let t=this.saleCart,e=new i.Sale;e.bookAndQuantityMap=t.bookAndQuantityMap,e.customerId=t.customerId,e.operationNumber=this.generateSaleNumber(t.customerId),e.operationDateTime=new Date,e.total=this.calculateTotal(e);for(let t of e.bookAndQuantityMap)a.stockService.increaseStock(t[0].isbn,-t[1]);this.addSaleMock(e),this.saleCart=new r.SaleCart,this.updateSaleCart()}addSaleMock(t){return o(this,void 0,void 0,(function*(){try{console.log(t.bookAndQuantityMap);const e=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({bookAndQuantity:t.bookAndQuantityMap,customerId:t.customerId,operationDateTime:t.operationDateTime,operationNumber:t.operationNumber,total:t.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n),alert(n.message+" "+n.saleNumber)}catch(t){console.log("Hata Oluştu.")}}))}}},214:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.StockService=void 0;const a=n(72);e.StockService=class{constructor(t){this.stockApi="http://localhost:3002/api/stocks",this._stockList=t}get stockList(){return this._stockList}set stockList(t){this._stockList=t}addStock(t,e,n){try{let o=new a.Stock(t,n,e);return this.stockList.push(o),!0}catch(t){return console.error(t),!1}}increaseStock(t,e){let n=this.getStock(t);return!!n&&(n.quantity=n.quantity+e,!0)}getStock(t){let e=this.stockList.find((e=>e.isbn===t));if(e)return e}getStockQuantity(t){let e=this.getStock(t);return e?e.quantity:0}addStockMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:t.isbn,quantity:t.quantity,shelfNumber:t.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(e.ok){const t=yield e.json();return console.log(t),!0}throw new Error(`Hata oluştu, hata kodu: ${e.status} `)}catch(t){console.log("Hata Oluştu."+t)}}))}increaseStockMock(t){return o(this,void 0,void 0,(function*(){try{const e=yield fetch(this.stockApi+"/"+t.isbn,{method:"PUT",body:JSON.stringify({isbn:t.isbn,quantity:t.quantity,shelfNumber:t.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const n=yield e.json();console.log(n),console.log(e.status)}catch(t){console.log("Hata Oluştu.")}}))}}}},e={};!function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtDakpBNkssRUFBMkIsQ0FBQyxHQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JMLEdBQVVNLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNKLEdBR3BFSyxFQUFPRCxPQUNmLENDbkIwQkosQ0FBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RiL2RhdGFiYXNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb24udHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2Jvb2sudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2NhbmNlbC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vY3VzdG9tZXIudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3JlbnQtY2FydC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zdG9jay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2Jvb2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3JlbnQtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3NhbGUtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3N0b2NrLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcbmltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgRGF0YUJhc2Uge1xuXG4gICAgIHByaXZhdGUgX2Jvb2tzOiBBcnJheTxCb29rPjsvL1xuICAgICBwcml2YXRlIF9zdG9ja3M6IEFycmF5PFN0b2NrPjtcbiAgICAgcHJpdmF0ZSBfY3VzdG9tZXJzOiBBcnJheTxDdXN0b21lcj47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZXM6IEFycmF5PFNhbGU+Oy8vXG4gICAgIHByaXZhdGUgX3JlbnRzOiBBcnJheTxSZW50PjtcbiAgICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb25zOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgIHByaXZhdGUgX2NhbmNlbHM6IEFycmF5PENhbmNlbD47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgICBwcml2YXRlIF9yZW50Q2FydDpSZW50Q2FydDtcblxuICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICB0aGlzLl9ib29rcyA9IG5ldyBBcnJheTxCb29rPigpO1xuICAgICAgICAgIHRoaXMuX3N0b2NrcyA9IG5ldyBBcnJheTxTdG9jaz4oKTtcbiAgICAgICAgICB0aGlzLl9jdXN0b21lcnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXI+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZXMgPSBuZXcgQXJyYXk8U2FsZT4oKTtcbiAgICAgICAgICB0aGlzLl9yZW50cyA9IG5ldyBBcnJheTxSZW50PigpO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucyA9IG5ldyBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxzID0gbmV3IEFycmF5PENhbmNlbD4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydDtcbiAgICAgICAgICB0aGlzLl9yZW50Q2FydCA9IG5ldyBSZW50Q2FydDtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8Qm9vaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tzTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzdG9ja3NcbiAgICAgICogQHJldHVybiB7QXJyYXk8U3RvY2s+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTdG9ja3NMaXN0KCk6IEFycmF5PFN0b2NrPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY3VzdG9tZXJzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEN1c3RvbWVyPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Q3VzdG9tZXJzTGlzdCgpOiBBcnJheTxDdXN0b21lcj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lcnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRTYWxlc0xpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlcztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgcmVudHNcbiAgICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFJlbnRzKCk6IEFycmF5PFJlbnQ+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVudHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldEJvb2tTcGVjaWZpY2F0aW9ucygpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbnM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGNhbmNlbFNhbGVzXG4gICAgICAqIEByZXR1cm4ge0FycmF5PENhbmNlbFNhbGU+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDYW5jYWxlZFNhbGVzKCk6IEFycmF5PENhbmNlbD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUNhcnQ7XG4gICAgIH1cblxuICAgICAgICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHJldHVybiB7UmVudENhcnR9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgZ2V0UmVudENhcnQoKTogUmVudENhcnQge1xuXHRcdHJldHVybiB0aGlzLl9yZW50Q2FydDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVDYXJ0XG4gICAgICogQHBhcmFtIHtTYWxlQ2FydH0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzZXRTYWxlQ2FydCh2YWx1ZTogU2FsZUNhcnQpIHtcblx0XHR0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuXHR9XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcGFyYW0ge1JlbnRDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuXHRcdHRoaXMuX3JlbnRDYXJ0ID0gdmFsdWU7XG5cdH1cbiAgICAgXG5cblxufVxuIiwiZXhwb3J0IGNsYXNzIEJvb2tTcGVjaWZpY2F0aW9uIHtcbiAgICBwcml2YXRlIF9pc2JuOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcHJpY2U6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zdGFydERhdGU6IERhdGU7XG4gICAgcHJpdmF0ZSBfZW5kRGF0ZTogRGF0ZTtcblxuICAgIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgcHJpY2U6IG51bWJlciwgc3RhcnREYXRlOiBEYXRlLCBlbmREYXRlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2lzYm4gPSBpc2JuO1xuICAgICAgICB0aGlzLl9wcmljZSA9IHByaWNlO1xuICAgICAgICB0aGlzLl9zdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgICAgIHRoaXMuX2VuZERhdGUgPSBlbmREYXRlO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlzYm5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9pc2JuO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcHJpY2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcHJpY2UoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcHJpY2U7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdGFydERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHN0YXJ0RGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhcnREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgZW5kRGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fZW5kRGF0ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGlzYm5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9pc2JuID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwcmljZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHByaWNlKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9wcmljZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RhcnREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN0YXJ0RGF0ZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX3N0YXJ0RGF0ZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZW5kRGF0ZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBlbmREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fZW5kRGF0ZSA9IHZhbHVlO1xuXHR9XG4gICAgXG5cbiAgICBcbn0iLCJpbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9vayB7XG4gIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9hdXRob3I6IHN0cmluZztcbiAgcHJpdmF0ZSBfcHVibGlzaFllYXI6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGFnZXM6IG51bWJlcjtcbiAgcHJpdmF0ZSBfYm9va1NwZWM6IEJvb2tTcGVjaWZpY2F0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKGlzYm46IHN0cmluZywgbmFtZTogc3RyaW5nLCBhdXRob3I6IHN0cmluZywgcHVibGlzaFllYXI6IHN0cmluZywgcGFnZXM6IG51bWJlciwgYm9va1NwZWM6IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fYXV0aG9yID0gYXV0aG9yO1xuICAgIHRoaXMuX2lzYm4gPSBpc2JuO1xuICAgIHRoaXMuX3B1Ymxpc2hZZWFyID0gcHVibGlzaFllYXI7XG4gICAgdGhpcy5fcGFnZXMgPSBwYWdlcztcbiAgICB0aGlzLl9ib29rU3BlYyA9IGJvb2tTcGVjO1xuICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlzYm4oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5faXNibjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYXV0aG9yXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGF1dGhvcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9hdXRob3I7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwdWJsaXNoWWVhclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBwdWJsaXNoWWVhcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9wdWJsaXNoWWVhcjtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHBhZ2VzXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IHBhZ2VzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3BhZ2VzO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNcbiAgICAgKiBAcmV0dXJuIHtCb29rU3BlY2lmaWNhdGlvbn1cbiAgICAgKi9cblx0cHVibGljIGdldCBib29rU3BlYygpOiBCb29rU3BlY2lmaWNhdGlvbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2Jvb2tTcGVjO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBuYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9uYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBhdXRob3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBhdXRob3IodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2F1dGhvciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcHVibGlzaFllYXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBwdWJsaXNoWWVhcih2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fcHVibGlzaFllYXIgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBhZ2VzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGFnZXModmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3BhZ2VzID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY1xuICAgICAqIEBwYXJhbSB7Qm9va1NwZWNpZmljYXRpb259IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgYm9va1NwZWModmFsdWU6IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG5cdFx0dGhpcy5fYm9va1NwZWMgPSB2YWx1ZTtcblx0fVxuICBcblxufVxuIiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbCB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVHlwZTogU2FsZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9jYW5jZWxlZERhdGVUaW1lOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsVHlwZTogU2FsZSwgcmVmdW5kOiBudW1iZXIsIGNhbmNlbGVkRGF0ZVRpbWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsVHlwZSA9IGNhbmNlbFR5cGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IGNhbmNlbGVkRGF0ZVRpbWU7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcmV0dXJuIHtTYWxlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbFR5cGUoKTogU2FsZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbFR5cGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnVuZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbGVkRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxUeXBlXG4gICAgICogQHBhcmFtIHtTYWxlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbFR5cGUodmFsdWU6IFNhbGUpIHtcblx0XHR0aGlzLl9jYW5jZWxUeXBlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxlZERhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IHZhbHVlO1xuXHR9XG4gICAgXG4gICAgXG5cbn0iLCJleHBvcnQgY2xhc3MgQ3VzdG9tZXIge1xuICBwcml2YXRlIF9pZDogbnVtYmVyO1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3N1ck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVOdW1iZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBuYW1lOiBzdHJpbmcsIHN1ck5hbWU6IHN0cmluZywgcGhvbmVOdW1iZXI6IHN0cmluZykge1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fc3VyTmFtZSA9IHN1ck5hbWU7XG4gICAgdGhpcy5fcGhvbmVOdW1iZXIgPSBwaG9uZU51bWJlcjtcbiAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5faWQ7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3VyTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9zdXJOYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcGhvbmVOdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcGhvbmVOdW1iZXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlkKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9pZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX25hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBzdXJOYW1lKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9zdXJOYW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBwaG9uZU51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHBob25lTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9waG9uZU51bWJlciA9IHZhbHVlO1xuXHR9XG5cblxufVxuIiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIGJvb2tBbmRRdWFudGl0eU1hcDogTWFwPEJvb2ssIG51bWJlcj47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ib29rQW5kUXVhbnRpdHlNYXAgPSBuZXcgTWFwPEJvb2ssIG51bWJlcj4oKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi9zYWxlXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW50IGV4dGVuZHMgU2FsZSB7XG4gICAgcHJpdmF0ZSBfcmVmdW5kRGF0ZT86RGF0ZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ/Om51bWJlcjtcblxuXG5cdGNvbnN0cnVjdG9yKGJvb2tBbmRRdWFudGl0eU1hcD86IE1hcDxCb29rLCBudW1iZXI+LCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIGN1c3RvbWVySWQ/OiBudW1iZXIsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIscmVmdW5kRGF0ZT86IERhdGUsIHJlZnVuZD86IG51bWJlcikge1xuICAgICAgICBzdXBlcihib29rQW5kUXVhbnRpdHlNYXAsb3BlcmF0aW9uRGF0ZVRpbWUsY3VzdG9tZXJJZCxvcGVyYXRpb25OdW1iZXIsdG90YWwpXG4gICAgICAgIFxuXHRcdHRoaXMuX3JlZnVuZERhdGUgPSByZWZ1bmREYXRlO1xuXHRcdHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcblx0fVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVmdW5kRGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kRGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVmdW5kRGF0ZSE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnVuZCE7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHJlZnVuZERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9yZWZ1bmREYXRlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuXHR9XG5cblxuICAgIFxuXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIGJvb2tBbmRRdWFudGl0eU1hcDogTWFwPEJvb2ssIG51bWJlcj47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ib29rQW5kUXVhbnRpdHlNYXAgPSBuZXcgTWFwPEJvb2ssIG51bWJlcj4oKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGUge1xuXG4gICAgcHJpdmF0ZSBfYm9va0FuZFF1YW50aXR5TWFwPyA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpO1xuICAgIHByaXZhdGUgX2N1c3RvbWVySWQ/OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlO1xuICAgIHByaXZhdGUgX29wZXJhdGlvbk51bWJlcj86IHN0cmluZztcbiAgICBwcml2YXRlIF90b3RhbD86IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoYm9va0FuZFF1YW50aXR5TWFwPzogTWFwPEJvb2ssIG51bWJlcj4sIG9wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZSwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nLCB0b3RhbD86IG51bWJlcikge1xuICAgICAgICB0aGlzLl9ib29rQW5kUXVhbnRpdHlNYXAgPSBib29rQW5kUXVhbnRpdHlNYXA7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gb3BlcmF0aW9uRGF0ZVRpbWU7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25OdW1iZXIgPSBvcGVyYXRpb25OdW1iZXI7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gdG90YWw7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va0FuZFF1YW50aXR5TWFwXG4gICAgICogQHJldHVybiB7TWFwPEJvb2ssIG51bWJlcj4oKX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tBbmRRdWFudGl0eU1hcCgpOiBNYXA8Qm9vaywgbnVtYmVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rQW5kUXVhbnRpdHlNYXAhO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wZXJhdGlvbkRhdGVUaW1lKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lcklkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY3VzdG9tZXJJZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tZXJJZCE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IG9wZXJhdGlvbk51bWJlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BlcmF0aW9uTnVtYmVyITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgdG90YWxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCB0b3RhbCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG90YWwhO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgYm9va0FuZFF1YW50aXR5TWFwXG4gICAgICogQHBhcmFtIHtNYXB9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rQW5kUXVhbnRpdHlNYXAodmFsdWU6IE1hcDxCb29rLCBudW1iZXI+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tBbmRRdWFudGl0eU1hcCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IG9wZXJhdGlvbkRhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGN1c3RvbWVySWQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9jdXN0b21lcklkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIG9wZXJhdGlvbk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgb3BlcmF0aW9uTnVtYmVyKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9uTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHRvdGFsXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCB0b3RhbCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gdmFsdWU7XG4gICAgfVxuXG5cbn0iLCJleHBvcnQgY2xhc3MgU3RvY2sge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9xdWFudGl0eTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3NoZWxmTnVtYmVyOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihpc2JuPzogc3RyaW5nLCBxdWFudGl0eT86IG51bWJlciwgc2hlbGZOdW1iZXI/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm4hO1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHF1YW50aXR5ITtcbiAgICAgICAgdGhpcy5fc2hlbGZOdW1iZXIgPSBzaGVsZk51bWJlciE7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2hlbGZOdW1iZXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoZWxmTnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpc2JuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBxdWFudGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzaGVsZk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2hlbGZOdW1iZXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuXG59IiwiLy8gZXhwb3J0IE5PREVfT1BUSU9OUz0tLW9wZW5zc2wtbGVnYWN5LXByb3ZpZGVyXG5pbXBvcnQgeyBEYXRhQmFzZSB9IGZyb20gXCIuL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuL2RvbWFpbi9zdG9ja1wiO1xuaW1wb3J0IHsgQm9va1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL2Jvb2stc2VydmljZVwiO1xuaW1wb3J0IHsgQ2FuY2VsU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvY2FuY2VsLXNlcnZpY2VcIjtcbmltcG9ydCB7IEN1c3RvbWVyU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZVwiO1xuaW1wb3J0IHsgUmVudFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3JlbnQtc2VydmljZVwiO1xuaW1wb3J0IHsgU2FsZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3NhbGUtc2VydmljZVwiO1xuaW1wb3J0IHsgU3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9zdG9jay1zZXJ2aWNlXCI7XG5cbmV4cG9ydCBsZXQgYm9va1NlcnZpY2U6IEJvb2tTZXJ2aWNlO1xuZXhwb3J0IGxldCBjdXN0b21lclNlcnZpY2U6IEN1c3RvbWVyU2VydmljZTtcbmV4cG9ydCBsZXQgY2FuY2VsU2VydmljZTogQ2FuY2VsU2VydmljZTtcbmV4cG9ydCBsZXQgcmVudFNlcnZpY2U6IFJlbnRTZXJ2aWNlO1xuZXhwb3J0IGxldCBzYWxlU2VydmljZTogU2FsZVNlcnZpY2U7XG5leHBvcnQgbGV0IHN0b2NrU2VydmljZTogU3RvY2tTZXJ2aWNlO1xuXG5sZXQgZGI6IERhdGFCYXNlID0gbmV3IERhdGFCYXNlKCk7XG5pbml0aWxpYXplU2VydmljZXMoZGIpO1xuaW5pdGlsaWF6ZURhdGEoKTtcbmFkZExpc3RlbmVyRm9yTWVudUl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGluaXRpbGlhemVTZXJ2aWNlcyhkYjogRGF0YUJhc2UpIHtcbiAgYm9va1NlcnZpY2UgPSBuZXcgQm9va1NlcnZpY2UoZGIuZ2V0Qm9va3NMaXN0LCBkYi5nZXRCb29rU3BlY2lmaWNhdGlvbnMpO1xuICBjdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKGRiLmdldEN1c3RvbWVyc0xpc3QpO1xuICBjYW5jZWxTZXJ2aWNlID0gbmV3IENhbmNlbFNlcnZpY2UoZGIuZ2V0Q2FuY2FsZWRTYWxlcyk7XG4gIHJlbnRTZXJ2aWNlID0gbmV3IFJlbnRTZXJ2aWNlKGRiLmdldFJlbnRzLCBkYi5nZXRSZW50Q2FydCk7XG4gIHNhbGVTZXJ2aWNlID0gbmV3IFNhbGVTZXJ2aWNlKGRiLmdldFNhbGVzTGlzdCwgZGIuZ2V0U2FsZUNhcnQpO1xuICBzdG9ja1NlcnZpY2UgPSBuZXcgU3RvY2tTZXJ2aWNlKGRiLmdldFN0b2Nrc0xpc3QpO1xuICBjb25zb2xlLmxvZyhcIlNlcnZpY2VzIGludGlsaWF6ZWQuXCIpO1xuXG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoMSwgXCJcIiwgXCJcIiwgXCJcIikpO1xuICBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXIobmV3IEN1c3RvbWVyKDIsIFwiXCIsIFwiXCIsIFwiXCIpKTtcblxuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDVcIiwgXCJBNDUtNTJcIiwgMTApO1xuICBzdG9ja1NlcnZpY2UuYWRkU3RvY2soXCIxMjMtNDZcIiwgXCJBNDUtNTJcIiwgMTApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWxpYXplRGF0YSgpIHtcbiAgYXdhaXQgYm9va1NlcnZpY2UuaW5pdGlhbGl6ZURhdGFNb2NrKCk7XG5cblxufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lckZvck1lbnVJdGVtcygpIHtcbiAgLy9zYWxlU2VydmljZS51cGRhdGVTYWxlQ2FydCgpO1xuICBzaG93QW5kSGlkZShcImFkZEJvb2tNZW51SXRlbVwiLCBcImFkZEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInNob3dCb29rc01lbnVJdGVtXCIsIFwibGlzdEJvb2tzU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRDdXN0b21lck1lbnVJdGVtXCIsIFwiYWRkQ3VzdG9tZXJTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImFkZFN0b2NrTWVudUl0ZW1cIiwgXCJhZGRTdG9ja1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwic2FsZUJvb2tNZW51SXRlbVwiLCBcInNhbGVCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJyZW50Qm9va01lbnVJdGVtXCIsIFwicmVudEJvb2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFNhbGVNZW51SXRlbVwiLCBcImNhbmNlbFNhbGVTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcImNhbmNlbFJlbnRNZW51SXRlbVwiLCBcImNhbmNlbFJlbnRTZWN0aW9uXCIpO1xufVxuXG5mdW5jdGlvbiBzaG93QW5kSGlkZShidG5JZDogc3RyaW5nLCBlbGVtZW50SWQ6IHN0cmluZykge1xuICAvL3NhbGVTZXJ2aWNlLnVwZGF0ZVNhbGVDYXJ0KCk7XG5cbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ0bklkKTtcblxuICBpZiAoZWxlbWVudCAmJiBidG4pIHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFkZEJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1ib29rLWZvcm1cIik7XG5pZiAoYWRkQm9va0Zvcm0gIT0gbnVsbCkge1xuICBhZGRCb29rRm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlKSA9PiB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkQm9va0Zvcm0pO1xuXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtRGF0YS5nZXQoXCJib29rVGl0bGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGF1dGhvciA9IGZvcm1EYXRhLmdldChcImJvb2tBdXRob3JcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNiblwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHVibGlzaFllYXIgPSBmb3JtRGF0YS5nZXQoXCJib29rUHVibGlzaFllYXJcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IHBhZ2VzID0gZm9ybURhdGEuZ2V0KFwiYm9va1BhZ2VzXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHByaWNlID0gZm9ybURhdGEuZ2V0KFwiYm9va1ByaWNlXCIpIGFzIHVua25vd24gYXMgbnVtYmVyO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCdEZWMgMzEsIDk5OTkgMjM6NTk6NTknKTtcblxuICAgIHRpdGxlLm1hdGNoKFwiXCIpO1xuXG5cbiAgICBjb25zdCBib29rU3BlYyA9IG5ldyBCb29rU3BlY2lmaWNhdGlvbihpc2JuLCBwcmljZSwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICBjb25zdCBib29rID0gbmV3IEJvb2soaXNibiwgdGl0bGUsIGF1dGhvciwgcHVibGlzaFllYXIsIHBhZ2VzLCBib29rU3BlYyk7XG4gICAgLy9ib29rU2VydmljZS5hZGRCb29rKGJvb2spO1xuXG4gICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBib29rU2VydmljZS5hZGRCb29rTW9jayhib29rKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLlwiKTtcbiAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgU8SxcmFzxLFuZGEgQmlyIEhhdGEgb2x1xZ90dS5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG5jb25zdCBhZGRTdG9ja0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1zdG9jay1mb3JtXCIpKTtcbmlmIChhZGRTdG9ja0Zvcm0pIHtcbiAgYWRkU3RvY2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkU3RvY2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNibkZvckFkZFN0b2NrXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBxdWFudHRpeSA9IGZvcm1EYXRhLmdldChcInN0b2NrUXVhbnRpdHlcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc2hlbGZOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzaGVsZk51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBzdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudHRpeSwgc2hlbGZOdW1iZXIpO1xuXG4gICAgY29uc3QgaXNDb250YWluc0Jvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKGIgPT4gYi5pc2JuID09IGlzYm4pO1xuXG4gICAgaWYgKCFpc0NvbnRhaW5zQm9vaykge1xuICAgICAgYWxlcnQoXCJTdG9rIGVrbGVubWV5ZSDDp2FsxLHFn8SxbGFuIGtpdGFwLCBrYXnEsXRsxLEgZGXEn2lsZGlyLiBMw7x0ZmVuIMO2bmNlIGtpdGFwIGVrbGV5aW5pelwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgaXNPayA9IGF3YWl0IHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuXG4gICAgICBpZiAoaXNPaykge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgaXNibiBudW1hcmFsxLEga2l0YXB0YW4sIFwiICsgcXVhbnR0aXkgKyBcIiBrYWRhciBzaXN0ZW1lIHN0b2sgZWtsZW5tacWfdGlyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgYWRkU3RvY2tGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipcbiAqIE3DvMWfdGVyaSBla2xlbWUgZm9ybXUgc3VibWl0IG9sYXnEsW7EsSBtb2NrIGN1c3RvbWVyU2VydmljZSBkZWtpIG1vY2sgc2VydmlzZSBiYcSfbGFkxLFtXG4gKi9cbmNvbnN0IGFkZEN1c3RvbWVyRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWN1c3RvbWVyLWZvcm1cIikpO1xuaWYgKGFkZEN1c3RvbWVyRm9ybSkge1xuICBhZGRDdXN0b21lckZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRDdXN0b21lckZvcm0pO1xuXG4gICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyTmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc3VybmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyU3VybmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGhvbmVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclBob25lTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKGN1c3RvbWVyU2VydmljZS5nZXROZXdDdXN0b21lcklkKCksIG5hbWUsIHN1cm5hbWUsIHBob25lTnVtYmVyKTtcbiAgICBhd2FpdCBjdXN0b21lclNlcnZpY2UuYWRkQ3VzdG9tZXJNb2NrKGN1c3RvbWVyKTtcblxuICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLiBcIik7XG4gICAgYWRkQ3VzdG9tZXJGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipCdXJhZGEgbW9jayBzZXJ2aXNpIHlvayDDp8O8bmvDvCBidXJhZGEga2l0YXAgc2F0xLHFn8SxIHlhcMSxbMSxcmtlbiwga2l0YXBsYXLEsSBzZXBldGUgZWtsaXlvcnV6LlxuICogU2VwZXRlIGVrbGVkaWt0ZW4gc29ucmEgYnRuU2FsZSBpZGxpIGJ1dG9udW4gY2xpY2sgZXZlbnRpLCBtb2NrIHNlcnZpc2kgw6dhxJ/EsXLEsXlvclxuICovXG5jb25zdCBzYWxlQm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbGUtYm9vay1mb3JtXCIpKTtcbmlmIChzYWxlQm9va0Zvcm0pIHtcbiAgc2FsZUJvb2tGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoc2FsZUJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yU2FsZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcImN1c3RvbWVySWRGb3JTYWxlXCIpIGFzIHN0cmluZyk7XG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyOiBib29sZWFuID0gY3VzdG9tZXJTZXJ2aWNlLmlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkKTtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcInF1YW50aXR5Rm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuXG4gICAgY29uc3Qgc3RvY2sgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2soaXNibikhO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChib29rKSB7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5xdWFudGl0eSA+PSBxdWFudGl0eSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRDdXN0b21lcikge1xuICAgICAgICAgICAgICBzYWxlU2VydmljZS5hZGRCb29rVG9DYXJ0KGJvb2ssIHF1YW50aXR5LCBjdXN0b21lcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFsZXJ0KGN1c3RvbWVySWQgKyBcIiBudW1hcmFsxLEgbcO8xZ90ZXJpIGthecSxdGzEsSBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KHF1YW50aXR5ICsgXCIga2FkYXIga2l0YXAgZMO8a2thbmRhIG1ldmN1dCBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChgRMO8a2thbmRhICR7aXNibn0gbnVtYXJhbMSxIGtpdGFixLFuIHN0b8SfdSBtZXZjdXQgZGXEn2lsZGlyLmApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIHlva3R1ci5cIik7XG4gICAgICB9XG5cbiAgICAgIHNhbGVCb29rRm9ybS5yZXNldCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBLaXRhcCBzYXTEscWfxLEgacOnaW4gacWfbGVtIHlhcMSxbMSxcmtlbiBraXRhcGxhciBzZXBldGUgZWtsZW5peW9yLlxuICogRWtsZW1lIGnFn2xlbWkgYml0dGlrdGVuIHNvbnJhIHNhdMSxbiBhbG0gaWnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmsgZ2XDp2l5b3J1ei5cbiAqL1xuY29uc3QgYnRuU2FsZSA9IDxIVE1MQnV0dG9uRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5TYWxlXCIpKTtcbmJ0blNhbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaWYgKHNhbGVTZXJ2aWNlLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zaXplID09PSAwKSB7XG4gICAgYWxlcnQoXCJTZXBldHRlIMO8csO8biB5b2suIEzDvHRmZW4gw7ZuY2Ugw7xyw7xuIGVrbGV5aW5pelwiKTtcbiAgfSBlbHNlIHtcbiAgICBzYWxlU2VydmljZS5jYXJ0VG9TYWxlKCk7XG4gIH1cblxufSk7XG5cbi8qKlxuICogS2l0YXBsYXLEsSBsaXN0ZWxlbWVrIGnDp2luIHTEsWtsYW7EsWxhbiBidXRvbiBjbGljayBldmVudGlcbiAqL1xuY29uc3QgYnRuU2hvd0Jvb2tzTWVudUl0ZW0gPSA8SFRNTEVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvd0Jvb2tzTWVudUl0ZW1cIikpO1xuYnRuU2hvd0Jvb2tzTWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYm9va1NlcnZpY2UubGlzdEJvb2tzKCk7XG59KVxuXG5jb25zdCBjYW5jZWxTYWxlRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWwtc2FsZS1mb3JtXCIpO1xuaWYgKGNhbmNlbFNhbGVGb3JtKSB7XG4gIGNhbmNlbFNhbGVGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgYnEgPSBuZXcgTWFwPEJvb2ssIG51bWJlcj4oKTsgLy8gYnEgPiBib29rIGFiZCBxdWFudGl0eVxuICAgIGJxLnNldChib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKTtcblxuICAgIGxldCBhID0gbmV3IFNhbGUoYnEsIG5ldyBEYXRlLCAxLCBcIlMwMjExMjIxNjMwNDVcIiwgMTIzKTtcbiAgICBzYWxlU2VydmljZS5zYWxlTGlzdC5wdXNoKGEpO1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoY2FuY2VsU2FsZUZvcm0pO1xuICAgIGNvbnN0IHNhbGVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzYWxlTnVtYmVyZm9yQ2FuY2VsXCIpIGFzIHN0cmluZztcblxuICAgIGxldCBzYWxlID0gc2FsZVNlcnZpY2UuZ2V0U2FsZShzYWxlTnVtYmVyKTtcblxuICAgIGlmIChzYWxlKSB7XG4gICAgICBsZXQgY2FuY2VsU2FsZTogQ2FuY2VsID0gbmV3IENhbmNlbChzYWxlLCBzYWxlLnRvdGFsLCBuZXcgRGF0ZSk7XG4gICAgICBsZXQgc3RhdGUgPSBhd2FpdCBjYW5jZWxTZXJ2aWNlLmNhbmNlbFNhbGVNb2NrKGNhbmNlbFNhbGUpO1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgYWxlcnQoc2FsZS5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsbWnFn3Rpci5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChzYWxlLm9wZXJhdGlvbk51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChzYWxlTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9XG59XG5cbmNvbnN0IGNhbmNlbFJlbnRGb3JtID0gPEhUTUxGb3JtRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbC1yZW50LWZvcm1cIik7XG5pZiAoY2FuY2VsUmVudEZvcm0pIHtcbiAgY2FuY2VsUmVudEZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBicSA9IG5ldyBNYXA8Qm9vaywgbnVtYmVyPigpOyAvLyBicSA+IGJvb2sgYWJkIHF1YW50aXR5XG4gICAgYnEuc2V0KGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpO1xuXG4gICAgbGV0IHJEYXRlID0gbmV3IERhdGU7XG4gICAgckRhdGUuc2V0RGF0ZShyRGF0ZS5nZXREYXRlKCkgKyAxNCk7XG5cbiAgICBsZXQgYSA9IG5ldyBSZW50KGJxLCBuZXcgRGF0ZSwgMSwgXCJSMDIxMTIyMTYzMDQ1XCIsIDEyMywgckRhdGUsIDIwMCk7XG4gICAgcmVudFNlcnZpY2UucmVudExpc3QucHVzaChhKTtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGNhbmNlbFJlbnRGb3JtKTtcbiAgICBjb25zdCByZW50TnVtYmVyID0gZm9ybURhdGEuZ2V0KFwicmVudE51bWJlcmZvckNhbmNlbFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgcmVudCA9IHJlbnRTZXJ2aWNlLmdldFJlbnQocmVudE51bWJlcik7XG5cblxuICB9XG5cbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIGtpcmFsYW1hc8SxIHlhcMSxbMSxcmtlbiwga2l0YXBsYXLEsSBzZXBldGUgZWtsaXlvcnV6LlxuICogU2VwZXRlIGVrbGVkaWt0ZW4gc29ucmEgYnRuUmVudCBpZGxpIGJ1dG9udW4gY2xpY2sgZXZlbnRpLCBtb2NrIHNlcnZpc2kgw6dhxJ/EsXLEsXlvclxuICovXG5jb25zdCByZW50Qm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbnQtYm9vay1mb3JtXCIpKTtcbmlmIChyZW50Qm9va0Zvcm0pIHtcbiAgcmVudEJvb2tGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVudEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yUmVudFwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcImN1c3RvbWVySWRGb3JSZW50XCIpIGFzIHN0cmluZyk7XG4gICAgY29uc3QgaXNWYWxpZEN1c3RvbWVyOiBib29sZWFuID0gY3VzdG9tZXJTZXJ2aWNlLmlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkKTtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcInF1YW50aXR5Rm9yUmVudFwiKSBhcyBzdHJpbmcpO1xuXG4gICAgY29uc3Qgc3RvY2sgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2soaXNibikhO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChib29rKSB7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5xdWFudGl0eSA+PSBxdWFudGl0eSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRDdXN0b21lcikge1xuICAgICAgICAgICAgICByZW50U2VydmljZS5hZGRCb29rVG9DYXJ0KGJvb2ssIHF1YW50aXR5LCBjdXN0b21lcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFsZXJ0KGN1c3RvbWVySWQgKyBcIiBudW1hcmFsxLEgbcO8xZ90ZXJpIGthecSxdGzEsSBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0KHF1YW50aXR5ICsgXCIga2FkYXIga2l0YXAgZMO8a2thbmRhIG1ldmN1dCBkZcSfaWxkaXIuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChgRMO8a2thbmRhICR7aXNibn0gbnVtYXJhbMSxIGtpdGFixLFuIHN0b8SfdSBtZXZjdXQgZGXEn2lsZGlyLmApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIHlva3R1ci5cIik7XG4gICAgICB9XG5cbiAgICAgIHJlbnRCb29rRm9ybS5yZXNldCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBLaXRhcCBzYXTEscWfxLEgacOnaW4gacWfbGVtIHlhcMSxbMSxcmtlbiBraXRhcGxhciBzZXBldGUgZWtsZW5peW9yLlxuICogRWtsZW1lIGnFn2xlbWkgYml0dGlrdGVuIHNvbnJhIHNhdMSxbiBhbG0gaWnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmsgZ2XDp2l5b3J1ei5cbiAqL1xuY29uc3QgYnRuUmVudCA9IDxIVE1MQnV0dG9uRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5SZW50XCIpKTtcbmJ0blJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaWYgKHJlbnRTZXJ2aWNlLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zaXplID09PSAwKSB7XG4gICAgYWxlcnQoXCJTZXBldHRlIMO8csO8biB5b2suIEzDvHRmZW4gw7ZuY2Ugw7xyw7xuIGVrbGV5aW5pelwiKTtcbiAgfSBlbHNlIHtcbiAgICByZW50U2VydmljZS5jYXJ0VG9SZW50KCk7XG4gIH1cblxufSk7IiwiLyoqXG4gKiBAYXV0aG9yIE1laG1ldCBFLiBBa2NhbiAtIDIxLjEwLjIyXG4gKi9cbmltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgQm9va1NwZWNpZmljYXRpb24gfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQm9va1NlcnZpY2Uge1xuICAgIHByaXZhdGUgX2Jvb2tMaXN0OiBBcnJheTxCb29rPjtcbiAgICBwcml2YXRlIF9ib29rU3BlY0xpc3Q6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPjtcbiAgICBib29rQXBpOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9ib29rcy8nO1xuICAgIGNvbnN0cnVjdG9yKGJvb2tMaXN0OiBBcnJheTxCb29rPiwgYm9va1NwZWNMaXN0OiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4pIHtcbiAgICAgICAgdGhpcy5fYm9va0xpc3QgPSBib29rTGlzdDtcbiAgICAgICAgdGhpcy5fYm9va1NwZWNMaXN0ID0gYm9va1NwZWNMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBkYXRhQmFzZVxuICAgICAqIEByZXR1cm4ge0RhdGFCYXNlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgYm9va0xpc3QoKTogQXJyYXk8Qm9vaz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va0xpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGRhdGFCYXNlXG4gICAgICogQHBhcmFtIHtEYXRhQmFzZX0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tMaXN0KHZhbHVlOiBBcnJheTxCb29rPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tTcGVjTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IGJvb2tTcGVjTGlzdCgpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY0xpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tTcGVjTGlzdCh2YWx1ZTogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHBhcmFtZXRyZSBvbGFyYWsgZ2VsZW4gaXNibiBiaWxnaXNpbmUgZ8O2cmUgaWxnaWxpIGtpdGFixLEgYnVsdXIuXG4gICAgICogQHBhcmFtIGlzYm4gQnVsdW5hY2FrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcmV0dXJucyBpc2JuIG51bWFyYXPEsW5hIGfDtnJlIGlsZ2lsaSBraXRhYsSxIEJvb2sgbmVzbmVzaSBvbGFyYWsgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCb29rKGlzYm46IHN0cmluZyk6IEJvb2sge1xuICAgICAgICAvL0J1cmFkYW4gbnVsbCBiaXIgZGXEn2VyIGRlIGTDtm5lYmlsZWNlxJ9pIGnDp2luIGhhdGEgdmVyaXlvclxuICAgICAgICAvL2FtYSBiaXogc29uZGFraSAhIG9wZXJhdMO2csO8IGlsZSBudWxsIGRlxJ9lciBkw7ZubWV5ZWNlayBkaXllIGdhcmFudGkgdmVyaXlvcnV6XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmZpbmQoYiA9PiBiLmlzYm4gPT09IGlzYm4pITtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJhbWV0cmUgb2xhcmFrIGdlbGVuIEJvb2sgbmVzbmVzaW5pIGtpdGFwIG5lc25lc2luZSBla2xlclxuICAgICAqIEBwYXJhbSBuZXdCb29rIGVrbGVuZWNlayBvbGFuIGtpdGFwIG5lc25lc2lcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkQm9vayhuZXdCb29rOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmJvb2tMaXN0LnB1c2gobmV3Qm9vayk7XG4gICAgICAgICAgICB0aGlzLl9ib29rU3BlY0xpc3QucHVzaChuZXdCb29rLmJvb2tTcGVjKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIktpdGFwIGVrbGVuaXJrZW4gYmlyIGhhdGEgbWV5ZGFuYSBnZWxkaS5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEJvb2soaXNibjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLmdldEJvb2soaXNibik7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmluY2x1ZGVzKGIpXG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZURhdGFNb2NrKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9ib29rcycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IDxCb29rW10+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIHRoaXMuYm9va0xpc3QgPSBnZXRSZXN1bHQgYXMgQXJyYXk8Qm9vaz47XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuYm9va0xpc3QpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBsaXN0Qm9va3MoKSB7XG4gICAgICAgIGNvbnN0IGxpc3RCb29rc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdEJvb2tzXCIpO1xuXG4gICAgICAgIGlmIChsaXN0Qm9va3NEaXYpIHtcbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbjtcblxuICAgICAgICAgICAgd2hpbGUgKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQgJiYgbGlzdEJvb2tzRGl2LmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBsaXN0Qm9va3NEaXYucmVtb3ZlQ2hpbGQobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYm9va0xpc3QuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInJvdy1saXN0LWJvb2tcIjtcblxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuaXNibi50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5uYW1lLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmF1dGhvci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrUXVhbnRpdHkoZWxlbWVudC5pc2JuKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5ib29rU3BlYy5wcmljZS50b1N0cmluZygpICsgXCIg4oK6XCI7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICBsaXN0Qm9va3NEaXYuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgYXN5bmMgYWRkQm9va01vY2soYjogQm9vaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJvb2tBcGksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IGIuaXNibixcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdXRob3I6IGIuYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICBwYWdlczogYi5wYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgcHVibGlzaFllYXI6IGIucHVibGlzaFllYXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJNb2NrIHNlcnZpc2luZGVuIGTDtm5lbiBjZXZhcCA9PlwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWxTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9jYW5jZWxsZWRMaXN0OiBBcnJheTxDYW5jZWw+O1xuICAgIGNhbmNlbFNhbGVBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2NhbmNlbFNhbGUnO1xuICAgIGNhbmNlbFJlbnRBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL2NhbmNlbFJlbnQnO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsbGVkTGlzdDogQXJyYXk8Q2FuY2VsPikge1xuICAgICAgICB0aGlzLl9jYW5jZWxsZWRMaXN0ID0gY2FuY2VsbGVkTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjYW5jZWxsZWRMaXN0KCk6IEFycmF5PENhbmNlbD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsbGVkTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDYW5jZWxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGNhbmNlbGxlZExpc3QodmFsdWU6IEFycmF5PENhbmNlbD4pIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGVkTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxTYWxlKGNhbmNlbDogQ2FuY2VsKTogdm9pZCB7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWwpO1xuICAgICAgICBjYW5jZWwucmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLmNhbmNlbGxlZExpc3QucHVzaChjYW5jZWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbFNhbGU6IENhbmNlbCk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jYWxjdWxhdGVEaWZmSG91cnMoY2FuY2VsU2FsZS5jYW5jZWxlZERhdGVUaW1lLCBjYW5jZWxTYWxlLmNhbmNlbFR5cGUub3BlcmF0aW9uRGF0ZVRpbWUpXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA+IDI0KSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLmNhbmNlbFR5cGUudG90YWwgKiAwLjc1O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsU2FsZS5jYW5jZWxUeXBlLnRvdGFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZ1bmQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2FuY2VsU2FsZU1vY2soY2FuY2VsU2FsZTogQ2FuY2VsKSB7XG5cbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbFNhbGUpO1xuXG4gICAgICAgIGNhbmNlbFNhbGUucmVmdW5kID0gcmVmdW5kO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY2FuY2VsU2FsZUFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgc2FsZTogY2FuY2VsU2FsZS5jYW5jZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IGNhbmNlbFNhbGUucmVmdW5kLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZERhdGVUaW1lOiBjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9Ub2RvIHNhbGUgbW9jayBzZXJ2aXNpbmUgZGVsZXRlIGlzdGXEn2kgYXTEsXAgbyBzYWxlIG5lc25lc2luaSBzaWxlY2VrXG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG5cblxuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxSZW50KGNhbmNlbDogQ2FuY2VsKSB7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZChjYW5jZWwpO1xuICAgICAgICBjYW5jZWwucmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLmNhbmNlbGxlZExpc3QucHVzaChjYW5jZWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbFJlbnQ6IENhbmNlbCk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jYWxjdWxhdGVEaWZmSG91cnMoY2FuY2VsUmVudC5jYW5jZWxlZERhdGVUaW1lLCBjYW5jZWxSZW50LmNhbmNlbFR5cGUub3BlcmF0aW9uRGF0ZVRpbWUpXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA+IDI0KSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWwgKiAwLjc1O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsUmVudC5jYW5jZWxUeXBlLnRvdGFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZ1bmQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2FuY2VsUmVudE1vY2soY2FuY2VsUmVudDogQ2FuY2VsKXtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbFJlbnQpO1xuXG4gICAgICAgIGNhbmNlbFJlbnQucmVmdW5kID0gcmVmdW5kO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY2FuY2VsU2FsZUFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgc2FsZTogY2FuY2VsUmVudC5jYW5jZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IGNhbmNlbFJlbnQucmVmdW5kLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZERhdGVUaW1lOiBjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9Ub2RvIHNhbGUgbW9jayBzZXJ2aXNpbmUgZGVsZXRlIGlzdGXEn2kgYXTEsXAgbyBzYWxlIG5lc25lc2luaSBzaWxlY2VrXG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21lclNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2N1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+O1xuICAgIHByaXZhdGUgY3VzdG9tZXJBcGk6IHN0cmluZyA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9jdXN0b21lcnNcIjtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IGN1c3RvbWVyTGlzdDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBjdXN0b21lckxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxDdXN0b21lcj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjdXN0b21lckxpc3QoKTogQXJyYXk8Q3VzdG9tZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDdXN0b21lcj59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBjdXN0b21lckxpc3QodmFsdWU6IEFycmF5PEN1c3RvbWVyPikge1xuICAgICAgICB0aGlzLl9jdXN0b21lckxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBhZGRDdXN0b21lcihuZXdDdXN0b21lcjogQ3VzdG9tZXIpIHtcbiAgICAgICAgdGhpcy5jdXN0b21lckxpc3QucHVzaChuZXdDdXN0b21lcik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5ld0N1c3RvbWVySWQoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxhc3RDdXN0b21lcklkOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbWVyTGlzdC5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGxhc3RDdXN0b21lcklkID0gdGhpcy5jdXN0b21lckxpc3QuYXQodGhpcy5jdXN0b21lckxpc3QubGVuZ3RoIC0gMSkhLmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdEN1c3RvbWVySWQgPSBsYXN0Q3VzdG9tZXJJZCArIDE7XG5cbiAgICAgICAgcmV0dXJuIGxhc3RDdXN0b21lcklkO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDdXN0b21lckluZm8oaWQ6IG51bWJlcik6IEN1c3RvbWVyIHwgdW5kZWZpbmVkIHtcblxuICAgICAgICBsZXQgY3VzdG9tZXIgPSB0aGlzLmN1c3RvbWVyTGlzdC5maW5kKGN1c3RvbWVyID0+IGN1c3RvbWVyLmlkID09PSBpZCk7XG5cbiAgICAgICAgaWYgKGN1c3RvbWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkOiBudW1iZXIpOiBib29sZWFuIHtcblxuICAgICAgICBsZXQgaXNWYWxpZCA9IHRoaXMuY3VzdG9tZXJMaXN0LnNvbWUoY3VzdG9tZXIgPT4gY3VzdG9tZXIuaWQgPT09IGN1c3RvbWVySWQpO1xuXG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGFkZEN1c3RvbWVyTW9jayhuZXdDdXN0b21lcjogQ3VzdG9tZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jdXN0b21lckFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG5ld0N1c3RvbWVyLmlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuZXdDdXN0b21lci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzdXJOYW1lOiBuZXdDdXN0b21lci5zdXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogbmV3Q3VzdG9tZXIucGhvbmVOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9yZW50TGlzdDogQXJyYXk8UmVudD47XG5cbiAgICBwcml2YXRlIF9yZW50Q2FydDogUmVudENhcnQ7XG4gICAgcHVibGljIHJlbnRBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9yZW50cyc7XG4gICAgcmVmdW5kUGVyY2VudDogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihyZW50TGlzdDogQXJyYXk8UmVudD4sIHJlbnRDYXJ0OiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50TGlzdCA9IHJlbnRMaXN0O1xuICAgICAgICB0aGlzLnJlZnVuZFBlcmNlbnQgPSAwLjc1O1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHJlbnRDYXJ0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8UmVudD59XG4gICAgICovXG4gICAgcHVibGljIGdldCByZW50TGlzdCgpOiBBcnJheTxSZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW50TGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVudExpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PFJlbnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcmVudExpc3QodmFsdWU6IEFycmF5PFJlbnQ+KSB7XG4gICAgICAgIHRoaXMuX3JlbnRMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHJlbnRDYXJ0KCk6IFJlbnRDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZW50Q2FydCh2YWx1ZTogUmVudENhcnQpIHtcbiAgICAgICAgdGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcbiAgICB9XG5cblxuXG4gICAgcHVibGljIGFkZFJlbnQocmVudDogUmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbnRMaXN0LnB1c2gocmVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZVRvdGFsKHJlbnQ6IFJlbnQpOiBudW1iZXIge1xuXG4gICAgICAgIGxldCBtYXA6IE1hcDxCb29rLCBudW1iZXI+ID0gcmVudC5ib29rQW5kUXVhbnRpdHlNYXA7XG5cbiAgICAgICAgbGV0IHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vaXQgY2FuIGJlID0+IGxldCBlbnRyeSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKClcbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgcmVudC5ib29rQW5kUXVhbnRpdHlNYXApIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5WzBdLmJvb2tTcGVjLnByaWNlICogZW50cnlbMV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgLy8gUjA1MTAyMjE0NTUwOSA9PiBkb21haW4uUmVudCAwNS4xMC4yMDIyIDE0OjU1LjA5XG4gICAgZ2VuZXJhdGVSZW50TnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlJcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nICsgdG9kYXkuZ2V0TW9udGgoKS50b1N0cmluZyArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcgKyB0b2RheS5nZXRIb3VycygpLnRvU3RyaW5nICsgdG9kYXkuZ2V0TWludXRlcygpLnRvU3RyaW5nICsgdG9kYXkuZ2V0U2Vjb25kcygpLnRvU3RyaW5nICsgY3VzdG9tZXJJZC50b1N0cmluZztcblxuICAgICAgICByZXR1cm4gcmVjZWlwdE51bWJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlUmVmdW5kKHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgcmVudC5yZWZ1bmQgPSByZW50LnRvdGFsICogdGhpcy5yZWZ1bmRQZXJjZW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSZW50KHJlbnROdW1iZXI6IHN0cmluZyk6IFJlbnQge1xuICAgICAgICBsZXQgcmVudCA9IHRoaXMucmVudExpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSByZW50TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHJlbnQhO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRCb29rVG9DYXJ0KGJvb2s6IEJvb2ssIHF1YW50aXR5OiBudW1iZXIsIGN1c3RvbWVySWQ6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5yZW50Q2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW50Q2FydC5jdXN0b21lcklkID0gY3VzdG9tZXJJZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCAhPT0gY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmFya2zEsSBtw7zFn3Rlcml5ZSBraXRhcCBraXJhbGFubWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zZXQoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnVwZGF0ZVJlbnRDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVJlbnRDYXJ0KCkge1xuICAgICAgICBjb25zdCByZW50Q2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVudENhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxSZW50QW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHJlbnRDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChyZW50Q2FydC5sYXN0Q2hpbGQgJiYgcmVudENhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJlbnRDYXJ0LnJlbW92ZUNoaWxkKHJlbnRDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmVudENhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemU7IGluZGV4KyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LXJvd1wiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgdGhpcy5yZW50Q2FydC5ib29rQW5kUXVhbnRpdHlNYXAuZW50cmllcygpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnJlbnRDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbnRyeVswXS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzFdLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInJlbnQtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGVudHJ5WzBdLmJvb2tTcGVjLnByaWNlICogZW50cnlbMV0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5yZW50Q2FydC5ib29rQW5kUXVhbnRpdHlNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdFswXS5ib29rU3BlYy5wcmljZSAqIHRbMV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVudENhcnQuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICAgICBzdWJUb3RhbFNwYW4udGV4dENvbnRlbnQgPSBzdWJUb3RhbC50b1N0cmluZygpICsgXCIgVExcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cblxuICAgIH1cblxuICAgIHB1YmxpYyBjYXJ0VG9SZW50KCkge1xuICAgICAgICBsZXQgcmVudENhcnQ6IFJlbnRDYXJ0ID0gdGhpcy5yZW50Q2FydDtcbiAgICAgICAgbGV0IHJlbnQgPSBuZXcgUmVudCgpO1xuXG4gICAgICAgIHJlbnQuYm9va0FuZFF1YW50aXR5TWFwID0gcmVudENhcnQuYm9va0FuZFF1YW50aXR5TWFwO1xuICAgICAgICByZW50LmN1c3RvbWVySWQgPSByZW50Q2FydC5jdXN0b21lcklkO1xuICAgICAgICByZW50Lm9wZXJhdGlvbk51bWJlciA9IHRoaXMuZ2VuZXJhdGVSZW50TnVtYmVyKHJlbnRDYXJ0LmN1c3RvbWVySWQpO1xuICAgICAgICByZW50Lm9wZXJhdGlvbkRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmVudC50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwocmVudCk7XG5cbiAgICAgICAgZm9yIChsZXQgcSBvZiByZW50LmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgc3RvY2tTZXJ2aWNlLmluY3JlYXNlU3RvY2socVswXS5pc2JuLCAtcVsxXSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5yZW50Q2FydCA9IG5ldyBSZW50Q2FydDsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuXG4gICAgICAgIGxldCBzdWNjZXNzID0gdGhpcy5hZGRSZW50TW9jayhyZW50KTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRSZW50TW9jayhyOiBSZW50KTogUHJvbWlzZTxCb29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyLmJvb2tBbmRRdWFudGl0eU1hcCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5yZW50QXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBib29rQW5kUXVhbnRpdHk6IHIuYm9va0FuZFF1YW50aXR5TWFwLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiByLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiByLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHIub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogci50b3RhbFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3VsdC5tZXNzYWdlICsgXCIgXCIgKyByZXN1bHQuc2FsZU51bWJlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9zYWxlTGlzdDogQXJyYXk8U2FsZT47XG4gICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgIHB1YmxpYyBzYWxlQXBpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvc2FsZXMnO1xuXG4gICAgY29uc3RydWN0b3Ioc2FsZUxpc3Q6IEFycmF5PFNhbGU+LCBzYWxlQ2FydDogU2FsZUNhcnQpIHtcbiAgICAgICAgdGhpcy5fc2FsZUxpc3QgPSBzYWxlTGlzdDtcbiAgICAgICAgdGhpcy5fc2FsZUNhcnQgPSBzYWxlQ2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2FsZUxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlPn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVMaXN0KCk6IEFycmF5PFNhbGU+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZT59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzYWxlTGlzdCh2YWx1ZTogQXJyYXk8U2FsZT4pIHtcbiAgICAgICAgdGhpcy5fc2FsZUxpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTYWxlQ2FydD59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzYWxlQ2FydCgpOiBTYWxlQ2FydCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNhbGVDYXJ0Pn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTYWxlKHNhbGU6IFNhbGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zYWxlTGlzdC5wdXNoKHNhbGUpO1xuXG4gICAgfVxuXG4gICAgY2FsY3VsYXRlVG90YWwoc2FsZTogU2FsZSk6IG51bWJlciB7XG4gICAgICAgIGxldCBzdWJUb3RhbCA9IDAuMDtcblxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBzYWxlLmJvb2tBbmRRdWFudGl0eU1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5WzBdLmJvb2tTcGVjLnByaWNlICogZW50cnlbMV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3ViVG90YWw7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVTYWxlTnVtYmVyKGN1c3RvbWVySWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGxldCByZWNlaXB0TnVtYmVyOiBzdHJpbmcgPSBcIlNcIiArIHRvZGF5LmdldERheSgpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRNb250aCgpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRIb3VycygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldFNlY29uZHMoKS50b1N0cmluZygpICsgY3VzdG9tZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiByZWNlaXB0TnVtYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTYWxlKHNhbGVOdW1iZXI6IHN0cmluZyk6IFNhbGUge1xuICAgICAgICBsZXQgc2FsZSA9IHRoaXMuc2FsZUxpc3QuZmluZChzID0+IHMub3BlcmF0aW9uTnVtYmVyID09PSBzYWxlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHNhbGUhO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVTYWxlKHNhbGU6IFNhbGUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5zYWxlTGlzdC5pbmRleE9mKHNhbGUpO1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEJvb2tUb0NhcnQoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlciwgY3VzdG9tZXJJZDogbnVtYmVyKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQgIT09IGN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZhcmtsxLEgbcO8xZ90ZXJpeWUga2l0YXAgc2F0xLFsbWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNhbGVDYXJ0LmJvb2tBbmRRdWFudGl0eU1hcC5zZXQoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNhbGVDYXJ0KCkge1xuICAgICAgICBjb25zdCBzYWxlQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZUNhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxTYWxlQW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHNhbGVDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChzYWxlQ2FydC5sYXN0Q2hpbGQgJiYgc2FsZUNhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LnJlbW92ZUNoaWxkKHNhbGVDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwLnNpemU7IGluZGV4KyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LXJvd1wiO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgdGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXAuZW50cmllcygpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSB0aGlzLnNhbGVDYXJ0LmN1c3RvbWVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwic2FsZS1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbnRyeVswXS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVudHJ5WzFdLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gKGVudHJ5WzBdLmJvb2tTcGVjLnByaWNlICogZW50cnlbMV0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJvdyAmJiBzdWJUb3RhbFNwYW4pIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5zYWxlQ2FydC5ib29rQW5kUXVhbnRpdHlNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdFswXS5ib29rU3BlYy5wcmljZSAqIHRbMV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2FsZUNhcnQuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICAgICBzdWJUb3RhbFNwYW4udGV4dENvbnRlbnQgPSBzdWJUb3RhbC50b1N0cmluZygpICsgXCIgVExcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjYXJ0VG9TYWxlKCkge1xuICAgICAgICBsZXQgc2FsZUNhcnQ6IFNhbGVDYXJ0ID0gdGhpcy5zYWxlQ2FydDtcbiAgICAgICAgbGV0IHNhbGUgPSBuZXcgU2FsZSgpO1xuXG4gICAgICAgIHNhbGUuYm9va0FuZFF1YW50aXR5TWFwID0gc2FsZUNhcnQuYm9va0FuZFF1YW50aXR5TWFwO1xuICAgICAgICBzYWxlLmN1c3RvbWVySWQgPSBzYWxlQ2FydC5jdXN0b21lcklkO1xuICAgICAgICBzYWxlLm9wZXJhdGlvbk51bWJlciA9IHRoaXMuZ2VuZXJhdGVTYWxlTnVtYmVyKHNhbGVDYXJ0LmN1c3RvbWVySWQpO1xuICAgICAgICBzYWxlLm9wZXJhdGlvbkRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgc2FsZS50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwoc2FsZSk7XG5cbiAgICAgICAgZm9yIChsZXQgcSBvZiBzYWxlLmJvb2tBbmRRdWFudGl0eU1hcCkge1xuICAgICAgICAgICAgc3RvY2tTZXJ2aWNlLmluY3JlYXNlU3RvY2socVswXS5pc2JuLCAtcVsxXSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRkU2FsZU1vY2soc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQ7IC8vIHNlcGV0aSBib8WfYWx0XG4gICAgICAgIHRoaXMudXBkYXRlU2FsZUNhcnQoKTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRTYWxlTW9jayhzOiBTYWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzLmJvb2tBbmRRdWFudGl0eU1hcCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zYWxlQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBib29rQW5kUXVhbnRpdHk6IHMuYm9va0FuZFF1YW50aXR5TWFwLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lcklkOiBzLmN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbkRhdGVUaW1lOiBzLm9wZXJhdGlvbkRhdGVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25OdW1iZXI6IHMub3BlcmF0aW9uTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogcy50b3RhbFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFsZXJ0KHJlc3VsdC5tZXNzYWdlICsgXCIgXCIrIHJlc3VsdC5zYWxlTnVtYmVyKTtcblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG4iLCJpbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc3RvY2tMaXN0OiBBcnJheTxTdG9jaz47XG4gICAgcHJpdmF0ZSBzdG9ja0FwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3N0b2Nrc1wiO1xuXG4gICAgY29uc3RydWN0b3Ioc3RvY2tMaXN0OiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzdG9ja0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTdG9jaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzdG9ja0xpc3QodmFsdWU6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCBoZW7DvHogZWtsZW5kaWt0ZW4gc29ucmEgaGVtZW4gZ2lyaXlvcixcbiAgICAgKiBFbGltaXpkZSBoacOnIHN0b2NrIGtheWTEsS9uZXNuZXNpIHlvaywgeWVuaSBrYXnEsXQvbmVzbmUgb2x1xZ90dXJ1eW9ydXpcbiAgICAgKiBZZW5pIGVrbGVuZW4ga2l0YWJhIHN0b2sgZWtsZW1lIGnFn2xlbWlcbiAgICAgKiBAcGFyYW0gaXNibiAgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBzaGVsZk51bWJlciBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIHJhZiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gcXVhbnRpdHkga2l0YXBkYW4ga2HDpyBhZGV0IHN0b8SfYSBla2xlbmVjZWtcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkU3RvY2soaXNibjogc3RyaW5nLCBzaGVsZk51bWJlcjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGxldCBuZXdTdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudGl0eSwgc2hlbGZOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5zdG9ja0xpc3QucHVzaChuZXdTdG9jayk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2l0YXAgemF0ZW4gZWtsaSwgaGFsaWhhesSxcmRhIHZhciwgZGFoYSBzb25yYSB5ZW5pIGtpdGFwbGFyIGdlbGRpLHN0b2sgYXJ0xLFybWEgacWfbGVtaSxcbiAgICAgKiBAcGFyYW0gaXNibiBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGlzYm4gbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHF1YW50aXR5IHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gYWRlZGlcbiAgICAgKiBAcmV0dXJucyBpxZ9sZW0gZ2Vyw6dla2xlxZ9tZXNpIGR1cnVtdW5kYSB0cnVlLCBkacSfZXIgZHVydW1kYSBmYWxzZSBkw7ZuZXJcbiAgICAgKi9cbiAgICBwdWJsaWMgaW5jcmVhc2VTdG9jayhpc2JuOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHN0b2NrID0gdGhpcy5nZXRTdG9jayhpc2JuKTtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgICBzdG9jay5xdWFudGl0eSA9IChzdG9jay5xdWFudGl0eSArIHF1YW50aXR5KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3RvY2sgbmVzbmVzaW5pIGdlcmkgZMO2bmTDvHLDvHJcbiAgICAgKiBAcGFyYW0gaXNibiBzdG9jayBuZXNuZXNpIGdldGlyaWxlY2VrIG9sYW4gbmVzbmVuaW4gaXNibiBub3N1LFxuICAgICAqIEByZXR1cm5zIGRiIG9sYW4gc3RvY2sgbmVzbmVuc2kgZ2VyaSBkw7ZuZXIsIGRiIGRlIHlvayBpc2UgdGhyb3cgaWxlIGhhdGEgZsSxcmxhdMSxcmzEsXJcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U3RvY2soaXNibjogc3RyaW5nKSB7XG4gICAgICAgIGxldCBzdG9jayA9IHRoaXMuc3RvY2tMaXN0LmZpbmQocyA9PiBzLmlzYm4gPT09IGlzYm4pO1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9jaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTdG9ja1F1YW50aXR5KGlzYm46IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGxldCBzOiBTdG9jayA9IHRoaXMuZ2V0U3RvY2soaXNibikhO1xuXG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5xdWFudGl0eTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRcSfZXIgc3RvayBuZXNuZXNpIHlvayBpc2Ugc3RvayBuZXNuZXNpLCBiZWxpcnRpbGVuIGFkZXQga2FkYXIgc3RvayBiaWxnaXNpIGlsZSBiZXJhYmVyIGVrbGVuaXlvci5cbiAgICAgKiDEsMWfdGUgYnUgb2x1xZ90dXJtYS9jcmVhdGUgacWfbGVtaSBidXJhZGEgeWFwxLFsxLF5b3IuXG4gICAgICogQHBhcmFtIHMgaW5kZXgudHMgZG9zeWFzxLFuZGFuIGdlbGVuIHN0b2sgbmVzbmVzaVxuICAgICAqL1xuICAgIGFzeW5jIGFkZFN0b2NrTW9jayhzOiBTdG9jayk6IFByb21pc2U8Qm9vbGVhbiB8IHVuZGVmaW5lZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnN0b2NrQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBzLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBzLnF1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBzaGVsZk51bWJlcjogcy5zaGVsZk51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicgKyBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9rIGVrbGVuaXJrZW4gZcSfZXIgc3RvayBuZXNuZXNpIGRhaGEgw7ZuY2VkZW4gdmFyIGlzZSwgc3RvayBhcnTEsXLEsW3EsW7EsSBwdXQgaWxlIHlhcGFjYcSfxLF6XG4gICAgICogQHBhcmFtIHMgaW5kZXgudHMgZG9zeWFzxLFuZGFuIGdlbGVuIHN0b2sgbmVzbmVzaVxuICAgICAqL1xuICAgIGFzeW5jIGluY3JlYXNlU3RvY2tNb2NrKHM6IFN0b2NrKSB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zdG9ja0FwaSArIFwiL1wiICsgcy5pc2JuLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGlzYm46IHMuaXNibixcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHMucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgICAgIHNoZWxmTnVtYmVyOiBzLnNoZWxmTnVtYmVyXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiX2Jvb2tzIiwiQXJyYXkiLCJfc3RvY2tzIiwiX2N1c3RvbWVycyIsIl9zYWxlcyIsIl9yZW50cyIsIl9ib29rU3BlY2lmaWNhdGlvbnMiLCJfY2FuY2VscyIsIl9zYWxlQ2FydCIsIlNhbGVDYXJ0IiwiX3JlbnRDYXJ0IiwiUmVudENhcnQiLCJnZXRCb29rc0xpc3QiLCJnZXRTdG9ja3NMaXN0IiwiZ2V0Q3VzdG9tZXJzTGlzdCIsImdldFNhbGVzTGlzdCIsImdldFJlbnRzIiwiZ2V0Qm9va1NwZWNpZmljYXRpb25zIiwiZ2V0Q2FuY2FsZWRTYWxlcyIsImdldFNhbGVDYXJ0IiwiZ2V0UmVudENhcnQiLCJzZXRTYWxlQ2FydCIsInZhbHVlIiwic2V0UmVudENhcnQiLCJpc2JuIiwicHJpY2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiX2lzYm4iLCJfcHJpY2UiLCJfc3RhcnREYXRlIiwiX2VuZERhdGUiLCJuYW1lIiwiYXV0aG9yIiwicHVibGlzaFllYXIiLCJwYWdlcyIsImJvb2tTcGVjIiwiX25hbWUiLCJfYXV0aG9yIiwiX3B1Ymxpc2hZZWFyIiwiX3BhZ2VzIiwiX2Jvb2tTcGVjIiwiY2FuY2VsVHlwZSIsInJlZnVuZCIsImNhbmNlbGVkRGF0ZVRpbWUiLCJfY2FuY2VsVHlwZSIsIl9yZWZ1bmQiLCJfY2FuY2VsZWREYXRlVGltZSIsImlkIiwic3VyTmFtZSIsInBob25lTnVtYmVyIiwiX2lkIiwiX3N1ck5hbWUiLCJfcGhvbmVOdW1iZXIiLCJib29rQW5kUXVhbnRpdHlNYXAiLCJNYXAiLCJSZW50IiwiU2FsZSIsIm9wZXJhdGlvbkRhdGVUaW1lIiwiY3VzdG9tZXJJZCIsIm9wZXJhdGlvbk51bWJlciIsInRvdGFsIiwicmVmdW5kRGF0ZSIsInN1cGVyIiwiX3JlZnVuZERhdGUiLCJfYm9va0FuZFF1YW50aXR5TWFwIiwiX29wZXJhdGlvbkRhdGVUaW1lIiwiX2N1c3RvbWVySWQiLCJfb3BlcmF0aW9uTnVtYmVyIiwiX3RvdGFsIiwicXVhbnRpdHkiLCJzaGVsZk51bWJlciIsIl9xdWFudGl0eSIsIl9zaGVsZk51bWJlciIsInNob3dBbmRIaWRlIiwiYnRuSWQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJkYiIsIkRhdGFCYXNlIiwiYm9va1NlcnZpY2UiLCJCb29rU2VydmljZSIsImN1c3RvbWVyU2VydmljZSIsIkN1c3RvbWVyU2VydmljZSIsImNhbmNlbFNlcnZpY2UiLCJDYW5jZWxTZXJ2aWNlIiwicmVudFNlcnZpY2UiLCJSZW50U2VydmljZSIsInNhbGVTZXJ2aWNlIiwiU2FsZVNlcnZpY2UiLCJzdG9ja1NlcnZpY2UiLCJTdG9ja1NlcnZpY2UiLCJjb25zb2xlIiwibG9nIiwiYWRkQ3VzdG9tZXIiLCJDdXN0b21lciIsImFkZFN0b2NrIiwiaW5pdGlhbGl6ZURhdGFNb2NrIiwiaW5pdGlsaWF6ZURhdGEiLCJhZGRCb29rRm9ybSIsIm9uc3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRpdGxlIiwiZ2V0IiwiRGF0ZSIsIm1hdGNoIiwiQm9va1NwZWNpZmljYXRpb24iLCJib29rIiwiQm9vayIsImFkZEJvb2tNb2NrIiwiYWxlcnQiLCJyZXNldCIsImFkZFN0b2NrRm9ybSIsInF1YW50dGl5Iiwic3RvY2siLCJTdG9jayIsImJvb2tMaXN0Iiwic29tZSIsImIiLCJhZGRTdG9ja01vY2siLCJhZGRDdXN0b21lckZvcm0iLCJzdXJuYW1lIiwiY3VzdG9tZXIiLCJnZXROZXdDdXN0b21lcklkIiwiYWRkQ3VzdG9tZXJNb2NrIiwic2FsZUJvb2tGb3JtIiwiZ2V0Qm9vayIsInBhcnNlSW50IiwiaXNWYWxpZEN1c3RvbWVyIiwiZ2V0U3RvY2siLCJhZGRCb29rVG9DYXJ0IiwiZXJyb3IiLCJzYWxlQ2FydCIsInNpemUiLCJjYXJ0VG9TYWxlIiwibGlzdEJvb2tzIiwiY2FuY2VsU2FsZUZvcm0iLCJicSIsInNldCIsImEiLCJzYWxlTGlzdCIsInB1c2giLCJzYWxlTnVtYmVyIiwic2FsZSIsImdldFNhbGUiLCJjYW5jZWxTYWxlIiwiQ2FuY2VsIiwiY2FuY2VsU2FsZU1vY2siLCJjYW5jZWxSZW50Rm9ybSIsInJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJyZW50TGlzdCIsInJlbnROdW1iZXIiLCJnZXRSZW50IiwicmVudEJvb2tGb3JtIiwicmVudENhcnQiLCJjYXJ0VG9SZW50IiwiYm9va1NwZWNMaXN0IiwiYm9va0FwaSIsIl9ib29rTGlzdCIsIl9ib29rU3BlY0xpc3QiLCJmaW5kIiwiYWRkQm9vayIsIm5ld0Jvb2siLCJFeGNlcHRpb24iLCJpc1ZhbGlkQm9vayIsImluY2x1ZGVzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImdldFJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImxpc3RCb29rc0RpdiIsInJvdyIsImNvbHVtbiIsImxhc3RDaGlsZCIsImNoaWxkcmVuIiwibGVuZ3RoIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50IiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldFN0b2NrUXVhbnRpdHkiLCJib2R5IiwiY2FuY2VsbGVkTGlzdCIsImNhbmNlbFNhbGVBcGkiLCJjYW5jZWxSZW50QXBpIiwiX2NhbmNlbGxlZExpc3QiLCJjYWxjdWxhdGVEaWZmSG91cnMiLCJkMSIsImQyIiwiZGlmZk1pbGlzIiwiZ2V0VGltZSIsIk1hdGgiLCJmbG9vciIsImNhbmNlbCIsImNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQiLCJjYW5jZWxSZW50IiwiY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZCIsImNhbmNlbFJlbnRNb2NrIiwiY3VzdG9tZXJMaXN0IiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJsYXN0Q3VzdG9tZXJJZCIsImF0IiwiZ2V0Q3VzdG9tZXJJbmZvIiwicmVudEFwaSIsIl9yZW50TGlzdCIsInJlZnVuZFBlcmNlbnQiLCJhZGRSZW50IiwicmVudCIsImNhbGN1bGF0ZVRvdGFsIiwic3ViVG90YWwiLCJlbnRyeSIsImdlbmVyYXRlUmVudE51bWJlciIsInRvZGF5IiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjYWxjdWxhdGVSZWZ1bmQiLCJzIiwidXBkYXRlUmVudENhcnQiLCJzdWJUb3RhbFNwYW4iLCJpbmRleCIsImVudHJpZXMiLCJ0IiwicSIsImluY3JlYXNlU3RvY2siLCJhZGRSZW50TW9jayIsInIiLCJib29rQW5kUXVhbnRpdHkiLCJtZXNzYWdlIiwic2FsZUFwaSIsIl9zYWxlTGlzdCIsImFkZFNhbGUiLCJnZW5lcmF0ZVNhbGVOdW1iZXIiLCJyZW1vdmVTYWxlIiwiaW5kZXhPZiIsInNwbGljZSIsInVwZGF0ZVNhbGVDYXJ0IiwiYWRkU2FsZU1vY2siLCJzdG9ja0xpc3QiLCJzdG9ja0FwaSIsIl9zdG9ja0xpc3QiLCJuZXdTdG9jayIsImluY3JlYXNlU3RvY2tNb2NrIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==