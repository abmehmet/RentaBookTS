(()=>{"use strict";var e={221:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=o(758),r=o(51);t.DataBase=class{constructor(){this._books=new Array,this._stocks=new Array,this._customers=new Array,this._sales=new Array,this._rents=new Array,this._bookSpecifications=new Array,this._cancels=new Array,this._saleCart=new r.SaleCart,this._rentCart=new n.RentCart}get getBooksList(){return this._books}get getStocksList(){return this._stocks}get getCustomersList(){return this._customers}get getSalesList(){return this._sales}get getRents(){return this._rents}get getBookSpecifications(){return this._bookSpecifications}get getCancaledSales(){return this._cancels}get getSaleCart(){return this._saleCart}get getRentCart(){return this._rentCart}set setSaleCart(e){this._saleCart=e}set setRentCart(e){this._rentCart=e}}},39:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BookSpecification=void 0,t.BookSpecification=class{constructor(e,t,o,n){this._isbn=e,this._price=t,this._startDate=o,this._endDate=n}get isbn(){return this._isbn}get price(){return this._price}get startDate(){return this._startDate}get endDate(){return this._endDate}set isbn(e){this._isbn=e}set price(e){this._price=e}set startDate(e){this._startDate=e}set endDate(e){this._endDate=e}}},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Book=void 0,t.Book=class{constructor(e,t,o,n,r,a){this._name=t,this._author=o,this._isbn=e,this._publishYear=n,this._pages=r,this._bookSpecification=a}get id(){return this._id}set id(e){this._id=e}get isbn(){return this._isbn}get name(){return this._name}get author(){return this._author}get publishYear(){return this._publishYear}get pages(){return this._pages}get bookSpecification(){return this._bookSpecification}set isbn(e){this._isbn=e}set name(e){this._name=e}set author(e){this._author=e}set publishYear(e){this._publishYear=e}set pages(e){this._pages=e}set bookSpecification(e){this._bookSpecification=e}}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cancel=void 0,t.Cancel=class{constructor(e,t,o){this._cancelType=e,this._refund=t,this._canceledDateTime=o}get cancelType(){return this._cancelType}get refund(){return this._refund}get canceledDateTime(){return this._canceledDateTime}set cancelType(e){this._cancelType=e}set refund(e){this._refund=e}set canceledDateTime(e){this._canceledDateTime=e}}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Customer=void 0,t.Customer=class{constructor(e,t,o){this._name=e,this._surName=t,this._phoneNumber=o}get name(){return this._name}get surName(){return this._surName}get phoneNumber(){return this._phoneNumber}set name(e){this._name=e}set surName(e){this._surName=e}set phoneNumber(e){this._phoneNumber=e}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBookItems=void 0,t.OrderBookItems=class{constructor(e,t){this._book=e,this._quantity=t}get book(){return this._book}get quantity(){return this._quantity}set book(e){this._book=e}set quantity(e){this._quantity=e}toJSON(){return{book:this._book,quantity:this._quantity}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RentCart=void 0,t.RentCart=class{constructor(){this.orderBookItems=new Array}}},961:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rent=void 0;const n=o(354);class r extends n.Sale{constructor(e,t,o,n,r,a,i){super(e,o,t,n,r),this._refundDate=a,this._refund=i}get refundDate(){return this._refundDate}get refund(){return this._refund}set refundDate(e){this._refundDate=e}set refund(e){this._refund=e}}t.Rent=r},51:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaleCart=void 0,t.SaleCart=class{constructor(){this.orderBookItems=new Array}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sale=void 0,t.Sale=class{constructor(e,t,o,n,r){this._orderBookItems=e,this._customerId=t,this._operationDateTime=o,this._operationNumber=n,this._total=r}get orderBookItems(){return this._orderBookItems}get customerId(){return this._customerId}get operationDateTime(){return this._operationDateTime}get operationNumber(){return this._operationNumber}get total(){return this._total}set orderBookItems(e){this._orderBookItems=e}set customerId(e){this._customerId=e}set operationDateTime(e){this._operationDateTime=e}set operationNumber(e){this._operationNumber=e}set total(e){this._total=e}}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stock=void 0,t.Stock=class{constructor(e,t,o){this._isbn=e,this._quantity=t,this._shelfNumber=o}get isbn(){return this._isbn}get quantity(){return this._quantity}get shelfNumber(){return this._shelfNumber}set isbn(e){this._isbn=e}set quantity(e){this._quantity=e}set shelfNumber(e){this._shelfNumber=e}}},607:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.stockService=t.saleService=t.rentService=t.cancelService=t.customerService=t.bookService=void 0;const r=o(221),a=o(934),i=o(39),s=o(378),c=o(916),l=o(961),u=o(354),d=o(767),h=o(72),m=o(946),p=o(943),k=o(709),f=o(148),S=o(478),g=o(214);function b(e,t){const o=document.getElementById(t),n=document.getElementById(e);o&&n&&n.addEventListener("click",(()=>{"none"===o.style.display?o.style.display="block":o.style.display="none"}))}var v;v=new r.DataBase,t.bookService=new m.BookService(v.getBooksList,v.getBookSpecifications),t.customerService=new k.CustomerService(v.getCustomersList),t.cancelService=new p.CancelService(v.getCancaledSales),t.rentService=new f.RentService(v.getRents,v.getRentCart),t.saleService=new S.SaleService(v.getSalesList,v.getSaleCart),t.stockService=new g.StockService(v.getStocksList),console.log("Services intiliazed."),t.customerService.addCustomer(new c.Customer("","","")),t.customerService.addCustomer(new c.Customer("","","")),t.stockService.addStock("123-45","A45-52",10),t.stockService.addStock("123-46","A45-52",10),function(){n(this,void 0,void 0,(function*(){t.bookService.bookList=yield t.bookService.getAllBooksDataFromService(),console.log(t.bookService.bookList)}))}(),b("addBookMenuItem","addBookSection"),b("showBooksMenuItem","listBooksSection"),b("addCustomerMenuItem","addCustomerSection"),b("addStockMenuItem","addStockSection"),b("saleBookMenuItem","saleBookSection"),b("rentBookMenuItem","rentBookSection"),b("cancelSaleMenuItem","cancelSaleSection"),b("cancelRentMenuItem","cancelRentSection"),b("refundBookMenuItem","refundBookSection"),b("rentNow","rentBookSection");const y=document.getElementById("add-book-form");null!=y&&(y.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(y),n=o.get("bookTitle"),r=o.get("bookAuthor"),s=o.get("bookIsbn"),c=o.get("bookPublishYear"),l=o.get("bookPages"),u=o.get("bookPrice"),d=new Date,h=new Date("Dec 31, 9999 23:59:59"),m=new i.BookSpecification(s,u,d,h),p=new a.Book(s,n,r,c,l,m);let k=yield t.bookService.createBook(p);return T(),k?(alert(p.isbn+" numaralı kitap Ekleme İşlemi Başarı İle Tamamlanmıştır."),y.reset()):alert(p.isbn+" numaralı kitap Ekleme İşlemi Sırasında Bir Hata oluştu."),!1})));const _=document.getElementById("add-stock-form");_&&(_.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(_),n=o.get("bookIsbnForAddStock"),r=o.get("stockQuantity"),a=o.get("shelfNumber"),i=new h.Stock(n,r,a);return t.bookService.bookList.some((e=>e.isbn==n))?(yield t.stockService.addStockMock(i))&&alert(n+" isbn numaralı kitaptan, "+r+" kadar sisteme stok eklenmiştir."):alert("Stok eklenmeye çalışılan kitap, kayıtlı değildir. Lütfen önce kitap ekleyiniz"),_.reset(),!1})));const C=document.getElementById("add-customer-form");C&&(C.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(C),n=o.get("customerName"),r=o.get("customerSurname"),a=o.get("customerPhoneNumber"),i=new c.Customer(n,r,a);return(yield t.customerService.addCustomerMock(i))?(alert("Müşteri Ekleme İşlemi Başarı İle Tamamlanmıştır. "),C.reset()):alert("Müşteri Ekleme İşlemi Sırasında bir hata ile karşılıldı. "),!1})));const w=document.getElementById("sale-book-form");w&&(w.onsubmit=()=>{const e=new FormData(w),o=e.get("isbnForSale"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForSale")),a=parseInt(e.get("quantityForSale")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.saleService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),w.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnSale").addEventListener("click",(()=>{0===t.saleService.saleCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.saleService.cartToSale()})),document.getElementById("showBooksMenuItem").addEventListener("click",(()=>{T()}));const B=document.getElementById("cancel-sale-form");B&&(B.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new u.Sale(o,1,new Date,"S021122163045",123);t.saleService.saleList.push(n);const r=new FormData(B).get("saleNumberforCancel");let a=t.saleService.getSale(r);if(a){let e=new s.Cancel(a,a.total,new Date);(yield t.cancelService.cancelSaleMock(e))?alert(a.operationNumber+" numaralı satış iptal edilmiştir."):alert(a.operationNumber+" numaralı satış iptal edilirken hata meydana geldi.")}else alert(r+" numaralı satış bulunamamıştır. Tekrar deneyiniz.")})));const D=document.getElementById("cancel-rent-form");D&&(D.onsubmit=e=>n(void 0,void 0,void 0,(function*(){e.preventDefault();let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+14);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,200);t.rentService.rentList.push(r);const a=new FormData(D).get("rentNumberforCancel");let i=t.rentService.getRent(a);if(i){let e=new s.Cancel(i,i.total,new Date);(yield t.cancelService.cancelRentMock(e))?alert(i.operationNumber+" numaralı kiralama iptal edilmiştir."):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralma bulunamamıştır. Tekrar deneyiniz.")})));const I=document.getElementById("rent-book-form");I&&(I.onsubmit=()=>{const e=new FormData(I),o=e.get("isbnForRent"),n=t.bookService.getBook(o),r=parseInt(e.get("customerIdForRent")),a=parseInt(e.get("quantityForRent")),i=t.stockService.getStock(o);try{return n?i?i.quantity>=a?t.rentService.addBookToCart(n,a,r):alert(a+" kadar kitap dükkanda mevcut değildir."):alert(`Dükkanda ${o} numaralı kitabın stoğu mevcut değildir.`):alert(o+" numaralı kitap yoktur."),I.reset(),!1}catch(e){alert(e)}}),document.getElementById("btnRent").addEventListener("click",(()=>{0===t.rentService.rentCart.orderBookItems.length?alert("Sepette ürün yok. Lütfen önce ürün ekleyiniz"):t.rentService.cartToRent()}));const N=document.getElementById("refund-book-form");function T(){const e=document.getElementById("listBooks");if(e){let o,n;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.bookService.bookList.forEach((r=>{o=document.createElement("div"),o.className="row-list-book",n=document.createElement("div"),n.className="column-list-book",n.textContent=r.isbn.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.name.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.author.toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=t.stockService.getStockQuantity(r.isbn).toString(),o.appendChild(n),n=document.createElement("div"),n.className="column-list-book",n.textContent=r.bookSpecification.price.toString()+" ₺",o.appendChild(n),e.appendChild(o)}))}}N&&(N.onsubmit=e=>n(void 0,void 0,void 0,(function*(){let o=new Array;o.push(new d.OrderBookItems(t.bookService.getBook("123-45"),3));let n=new Date;n.setDate(n.getDate()+23);let r=new l.Rent(o,new Date,1,"R021122163045",123,n,0);r.refund=t.rentService.calculateRefundAmount(r),t.rentService.rentList.push(r),e.preventDefault();const a=new FormData(N).get("rentNumberforRefund");let i=t.rentService.getRent(a);if(i){let e=yield t.rentService.refundRentMock(i);e?(alert(i.operationNumber+" numaralı kiralama geri alınmıştır."),alert("Geri ödeme miktarı:"+e+" ₺ .")):alert(i.operationNumber+" numaralı kiralama iptal edilirken hata meydana geldi.")}else alert(a+" numaralı kiralama bulunamamıştır. Tekrar deneyiniz.")})))},946:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BookService=void 0,t.BookService=class{constructor(e,t){this.bookApi="http://localhost:3002/api/v1/books",this._bookList=e,this._bookSpecification=t}get bookList(){return this._bookList}get bookSpecification(){return this._bookSpecification}set bookList(e){this._bookList=e}set bookSpecification(e){this._bookSpecification=e}getBook(e){return this.bookList.find((t=>t.isbn===e))}getAllBooksDataFromService(){return o(this,void 0,void 0,(function*(){const e=yield fetch(this.bookApi,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Hata oluştu, hata kodu: ${e.status} `);const t=yield e.json();return JSON.parse(JSON.stringify(t,null,4))}))}createBook(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.bookApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,name:e.name,author:e.author,pages:e.pages,publishYear:e.publishYear,bookSpecification:{isbn:e.bookSpecification.isbn,price:e.bookSpecification.price,startDate:e.bookSpecification.startDate,endDate:e.bookSpecification.endDate}}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),this.bookList=yield this.getAllBooksDataFromService(),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},943:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelService=void 0,t.CancelService=class{constructor(e){this.cancelSaleApi="http://localhost:3002/api/v1/cancelSale",this.cancelRentApi="http://localhost:3002/api/v1/cancelRent",this._cancelledList=e}get cancelledList(){return this._cancelledList}set cancelledList(e){this._cancelledList=e}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}cancelSale(e){let t=this.calculateCancelSaleRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelSaleRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelSaleMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelSaleRefund(e);e.refund=t;try{const t=yield fetch(this.cancelSaleApi,{method:"POST",body:JSON.stringify({sale:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}cancelRent(e){let t=this.calculateCancelRentRefund(e);e.refund=t,this.cancelledList.push(e)}calculateCancelRentRefund(e){let t;return t=this.calculateDiffHours(e.canceledDateTime,e.cancelType.operationDateTime)>24?.75*e.cancelType.total:e.cancelType.total,t}cancelRentMock(e){return o(this,void 0,void 0,(function*(){let t=this.calculateCancelRentRefund(e);e.refund=t;try{const t=yield fetch(this.cancelRentApi,{method:"POST",body:JSON.stringify({rent:e.cancelType,refund:e.refund,canceledDateTime:e.canceledDateTime}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},709:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerService=void 0,t.CustomerService=class{constructor(e){this.customerApi="http://localhost:3002/api/v1/customers",this._customerList=e}get customerList(){return this._customerList}set customerList(e){this._customerList=e}addCustomer(e){this.customerList.push(e)}addCustomerMock(e){return o(this,void 0,void 0,(function*(){try{const t=yield fetch(this.customerApi,{method:"POST",body:JSON.stringify({name:e.name,surName:e.surName,phoneNumber:e.phoneNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log("Rest servisinden dönen cevap =>"),console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},148:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RentService=void 0;const r=o(607),a=o(961),i=o(758),s=o(767);t.RentService=class{constructor(e,t){this.rentApi="http://localhost:3002/api/v1/rents",this._rentList=e,this.refundPercent=.75,this._rentCart=t}get rentList(){return this._rentList}set rentList(e){this._rentList=e}get rentCart(){return this._rentCart}set rentCart(e){this._rentCart=e}addRent(e){this.rentList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateRentNumber(e){let t=new Date;return"R"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}calculateDiffHours(e,t){let o=e.getTime()-t.getTime();return Math.floor(o/1e3/60/60)}calculateRefund(e){e.refund=e.total*this.refundPercent}calculateRefundAmount(e){let t,o=this.calculateDiffHours(e.refundDate,e.operationDateTime)/24;if(o<=14)t=.75*e.total;else if(o<=24){let n=.75-.05*(o-14);t=e.total*n}else t=.25*e.total;return t}getRent(e){return this.rentList.find((t=>t.operationNumber===e))}addBookToCart(e,t,o){if(0===this.rentCart.orderBookItems.length)this.rentCart.customerId=o;else if(this.rentCart.orderBookItems.length>0&&this.rentCart.customerId!==o)return alert("Farklı müşteriye kitap kiralanmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;this.rentCart.orderBookItems.push(new s.OrderBookItems(e,t)),this.updateRentCart()}updateRentCart(){const e=document.getElementById("rentCart"),t=document.getElementById("totalRentAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.rentCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="rent-cart-row";for(let e of this.rentCart.orderBookItems)n=document.createElement("div"),n.className="rent-cart-column",n.textContent=this.rentCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="rent-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.rentCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToRent(){let e=this.rentCart,t=new a.Rent;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateRentNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);let o=new Date;o.setDate(o.getDate()+14),t.refundDate=o,this.calculateRefund(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);this.rentCart=new i.RentCart,this.updateRentCart(),this.addRentMock(t)}addRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total,refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);{const o=yield t.json();console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap kiralama işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetneyiniz. Fiş numaranız: "+e.operationNumber)}}catch(e){console.log("Hata Oluştu."),alert("Kitap kiralama işlemi sırasında bir hata oluştu. Lütfen tekrar deneyiniz.")}}))}refundRentMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.rentApi+"/"+e.operationNumber,{method:"PATCH",body:JSON.stringify({refundDate:e.refundDate,refund:e.refund}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const o=yield t.json();return console.log(o),e.refund}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},478:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SaleService=void 0;const r=o(607),a=o(354),i=o(767),s=o(51);t.SaleService=class{constructor(e,t){this.saleApi="http://localhost:3002/api/v1/sales",this._saleList=e,this._saleCart=t}get saleList(){return this._saleList}set saleList(e){this._saleList=e}get saleCart(){return this._saleCart}set saleCart(e){this._saleCart=e}addSale(e){this.saleList.push(e)}calculateTotal(e){let t=0;for(let o of e.orderBookItems)t+=o.book.bookSpecification.price*o.quantity;return t}generateSaleNumber(e){let t=new Date;return"S"+t.getDay().toString()+t.getMonth().toString()+t.getFullYear().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString()+e.toString()}getSale(e){return this.saleList.find((t=>t.operationNumber===e))}removeSale(e){let t=this.saleList.indexOf(e);this.saleList.splice(t,1)}addBookToCart(e,t,o){if(0===this.saleCart.orderBookItems.length)this.saleCart.customerId=o;else if(this.saleCart.orderBookItems.length>0&&this.saleCart.customerId!==o)return alert("Farklı müşteriye kitap satılmaya çalışılıyor. Lütfen tek müşteri için işlem yapınız"),!1;let n=new i.OrderBookItems(e,t);this.saleCart.orderBookItems.push(n),this.updateSaleCart()}updateSaleCart(){const e=document.getElementById("saleCart"),t=document.getElementById("totalSaleAmountTl");if(e){let o,n,r=0;for(;e.lastChild&&e.children.length>1;)e.removeChild(e.lastChild);t.textContent="";for(let e=0;e<this.saleCart.orderBookItems.length;e++){o=document.createElement("div"),o.className="sale-cart-row";for(let e of this.saleCart.orderBookItems)n=document.createElement("div"),n.className="sale-cart-column",n.textContent=this.saleCart.customerId.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.book.name,o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=e.quantity.toString(),o.appendChild(n),n=document.createElement("div"),n.className="sale-cart-column",n.textContent=(e.book.bookSpecification.price*e.quantity).toString(),o.appendChild(n)}if(o&&t){for(let e of this.saleCart.orderBookItems)r+=e.book.bookSpecification.price*e.quantity;e.appendChild(o),t.textContent=r.toString()+" TL"}}}cartToSale(){let e=this.saleCart,t=new a.Sale;t.orderBookItems=e.orderBookItems,t.customerId=e.customerId,t.operationNumber=this.generateSaleNumber(e.customerId),t.operationDateTime=new Date,t.total=this.calculateTotal(t);for(let e of t.orderBookItems)r.stockService.increaseStock(e.book.isbn,-e.quantity);let o=this.addSaleMock(t);return this.saleCart=new s.SaleCart,this.updateSaleCart(),o}addSaleMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.saleApi,{method:"POST",body:JSON.stringify({orderBookItems:Array.from(e.orderBookItems),customerId:e.customerId,operationDateTime:e.operationDateTime,operationNumber:e.operationNumber,total:e.total}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(t),t.ok){const o=yield t.json();return console.log("Rest apidan dönen cevap:\n"),console.log(o),alert("Kitap satış işlemi başarıyla gerçekleşmiştir."),alert("Fişinizi kaybetmeyiniz. Fiş Numarası: "+e.operationNumber),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu.")}}))}}},214:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StockService=void 0;const r=o(72);t.StockService=class{constructor(e){this.stockApi="http://localhost:3002/api/stocks",this._stockList=e}get stockList(){return this._stockList}set stockList(e){this._stockList=e}addStock(e,t,o){try{let n=new r.Stock(e,o,t);return this.stockList.push(n),!0}catch(e){return console.error(e),!1}}increaseStock(e,t){let o=this.getStock(e);return!!o&&(o.quantity=o.quantity+t,!0)}getStock(e){let t=this.stockList.find((t=>t.isbn===e));if(t)return t}getStockQuantity(e){let t=this.getStock(e);return t?t.quantity:0}addStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi,{method:"POST",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=yield t.json();return console.log(e),!0}throw new Error(`Hata oluştu, hata kodu: ${t.status} `)}catch(e){console.log("Hata Oluştu."+e)}}))}increaseStockMock(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(this.stockApi+"/"+e.isbn,{method:"PUT",body:JSON.stringify({isbn:e.isbn,quantity:e.quantity,shelfNumber:e.shelfNumber}),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!t.ok)throw new Error(`Hata oluştu, hata kodu: ${t.status} `);const o=yield t.json();console.log(o),console.log(t.status)}catch(e){console.log("Hata Oluştu.")}}))}}}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9YLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsT0FDZixDQ25CMEJKLENBQW9CLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kYi9kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9ib29rLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9jYW5jZWwudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL2N1c3RvbWVyLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9vcmRlci1ib29rLWl0ZW0udHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvLi9zcmMvZG9tYWluL3JlbnQtY2FydC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vcmVudC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9kb21haW4vc2FsZS1jYXJ0LnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zYWxlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL2RvbWFpbi9zdG9jay50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2Jvb2stc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL2NhbmNlbC1zZXJ2aWNlLnRzIiwid2VicGFjazovL3JlbnQtYS1ib29rLXRzLy4vc3JjL3NlcnZpY2UvY3VzdG9tZXItc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3JlbnQtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3NhbGUtc2VydmljZS50cyIsIndlYnBhY2s6Ly9yZW50LWEtYm9vay10cy8uL3NyYy9zZXJ2aWNlL3N0b2NrLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVudC1hLWJvb2stdHMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rLXNwZWNpZmljYXRpb25cIjtcbmltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5pbXBvcnQgeyBDdXN0b21lciB9IGZyb20gXCIuLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IFNhbGUgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGVcIjtcbmltcG9ydCB7IFNhbGVDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9zYWxlLWNhcnRcIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4uL2RvbWFpbi9zdG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgRGF0YUJhc2Uge1xuXG4gICAgIHByaXZhdGUgX2Jvb2tzOiBBcnJheTxCb29rPjsvL1xuICAgICBwcml2YXRlIF9zdG9ja3M6IEFycmF5PFN0b2NrPjtcbiAgICAgcHJpdmF0ZSBfY3VzdG9tZXJzOiBBcnJheTxDdXN0b21lcj47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZXM6IEFycmF5PFNhbGU+Oy8vXG4gICAgIHByaXZhdGUgX3JlbnRzOiBBcnJheTxSZW50PjtcbiAgICAgcHJpdmF0ZSBfYm9va1NwZWNpZmljYXRpb25zOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgIHByaXZhdGUgX2NhbmNlbHM6IEFycmF5PENhbmNlbD47Ly9cbiAgICAgcHJpdmF0ZSBfc2FsZUNhcnQ6IFNhbGVDYXJ0O1xuICAgICBwcml2YXRlIF9yZW50Q2FydDpSZW50Q2FydDtcblxuICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICB0aGlzLl9ib29rcyA9IG5ldyBBcnJheTxCb29rPigpO1xuICAgICAgICAgIHRoaXMuX3N0b2NrcyA9IG5ldyBBcnJheTxTdG9jaz4oKTtcbiAgICAgICAgICB0aGlzLl9jdXN0b21lcnMgPSBuZXcgQXJyYXk8Q3VzdG9tZXI+KCk7XG4gICAgICAgICAgdGhpcy5fc2FsZXMgPSBuZXcgQXJyYXk8U2FsZT4oKTtcbiAgICAgICAgICB0aGlzLl9yZW50cyA9IG5ldyBBcnJheTxSZW50PigpO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucyA9IG5ldyBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4oKTtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxzID0gbmV3IEFycmF5PENhbmNlbD4oKTtcbiAgICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IG5ldyBTYWxlQ2FydCgpO1xuICAgICAgICAgIHRoaXMuX3JlbnRDYXJ0ID0gbmV3IFJlbnRDYXJ0O1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBib29rc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va3NMaXN0KCk6IEFycmF5PEJvb2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fYm9va3M7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHN0b2Nrc1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFN0b2Nrc0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvY2tzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciBjdXN0b21lcnNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBnZXRDdXN0b21lcnNMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbWVycztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgc2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8U2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldFNhbGVzTGlzdCgpOiBBcnJheTxTYWxlPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVzO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIEdldHRlciByZW50c1xuICAgICAgKiBAcmV0dXJuIHtBcnJheTxSZW50Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0UmVudHMoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9yZW50cztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25zXG4gICAgICAqIEByZXR1cm4ge0FycmF5PEJvb2tTcGVjaWZpY2F0aW9uPn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0Qm9va1NwZWNpZmljYXRpb25zKCk6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9ucztcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBHZXR0ZXIgY2FuY2VsU2FsZXNcbiAgICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGdldENhbmNhbGVkU2FsZXMoKTogQXJyYXk8Q2FuY2VsPiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbHM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHNhbGVDYXJ0XG4gICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgZ2V0U2FsZUNhcnQoKTogU2FsZUNhcnQge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9zYWxlQ2FydDtcbiAgICAgfVxuXG4gICAgICAgICAvKipcbiAgICAgKiBHZXR0ZXIgcmVudENhcnRcbiAgICAgKiBAcmV0dXJuIHtSZW50Q2FydH1cbiAgICAgKi9cblx0cHVibGljIGdldCBnZXRSZW50Q2FydCgpOiBSZW50Q2FydCB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbnRDYXJ0O1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc2FsZUNhcnRcbiAgICAgKiBAcGFyYW0ge1NhbGVDYXJ0fSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHNldFNhbGVDYXJ0KHZhbHVlOiBTYWxlQ2FydCkge1xuXHRcdHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG5cdH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZW50Q2FydFxuICAgICAqIEBwYXJhbSB7UmVudENhcnR9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc2V0UmVudENhcnQodmFsdWU6IFJlbnRDYXJ0KSB7XG5cdFx0dGhpcy5fcmVudENhcnQgPSB2YWx1ZTtcblx0fVxuICAgICBcblxuXG59XG4iLCJleHBvcnQgY2xhc3MgQm9va1NwZWNpZmljYXRpb24ge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9wcmljZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcbiAgICBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBwcmljZTogbnVtYmVyLCBzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgIHRoaXMuX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgaXNiblxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cblx0cHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzYm47XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBwcmljZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cblx0cHVibGljIGdldCBwcmljZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9wcmljZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN0YXJ0RGF0ZVxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9zdGFydERhdGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBlbmREYXRlXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBlbmREYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiB0aGlzLl9lbmREYXRlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaXNiblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGlzYm4odmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX2lzYm4gPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHByaWNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcHJpY2UodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3ByaWNlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzdGFydERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgc3RhcnREYXRlKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBlbmREYXRlXG4gICAgICogQHBhcmFtIHtEYXRlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGVuZERhdGUodmFsdWU6IERhdGUpIHtcblx0XHR0aGlzLl9lbmREYXRlID0gdmFsdWU7XG5cdH1cbiAgICBcblxuICAgIFxufSIsImltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rIHtcbiAgICAgcHJpdmF0ZSBfaWQ6IG51bWJlcjtcbiAgICAgcHJpdmF0ZSBfaXNibjogc3RyaW5nO1xuICAgICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gICAgIHByaXZhdGUgX2F1dGhvcjogc3RyaW5nO1xuICAgICBwcml2YXRlIF9wdWJsaXNoWWVhcjogc3RyaW5nO1xuICAgICBwcml2YXRlIF9wYWdlczogbnVtYmVyO1xuICAgICBwcml2YXRlIF9ib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb247XG5cbiAgICAgY29uc3RydWN0b3IoaXNibjogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGF1dGhvcjogc3RyaW5nLCBwdWJsaXNoWWVhcjogc3RyaW5nLCBwYWdlczogbnVtYmVyLCBib29rU3BlY2lmaWNhdGlvbjogQm9va1NwZWNpZmljYXRpb24pIHtcbiAgICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgICB0aGlzLl9hdXRob3IgPSBhdXRob3I7XG4gICAgICAgICAgdGhpcy5faXNibiA9IGlzYm47XG4gICAgICAgICAgdGhpcy5fcHVibGlzaFllYXIgPSBwdWJsaXNoWWVhcjtcbiAgICAgICAgICB0aGlzLl9wYWdlcyA9IHBhZ2VzO1xuICAgICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gYm9va1NwZWNpZmljYXRpb247XG4gICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGlkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2lkO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgaWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBpZCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5faWQgPSB2YWx1ZTtcblx0fVxuICAgICBcblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGlzYm5cbiAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBpc2JuKCk6IHN0cmluZyB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2lzYm47XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIG5hbWVcbiAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGF1dGhvclxuICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAqL1xuICAgICBwdWJsaWMgZ2V0IGF1dGhvcigpOiBzdHJpbmcge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9hdXRob3I7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHB1Ymxpc2hZZWFyXG4gICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgcHVibGlzaFllYXIoKTogc3RyaW5nIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcHVibGlzaFllYXI7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIHBhZ2VzXG4gICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgICovXG4gICAgIHB1YmxpYyBnZXQgcGFnZXMoKTogbnVtYmVyIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXM7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogR2V0dGVyIGJvb2tTcGVjaWZpY2F0aW9uXG4gICAgICAqIEByZXR1cm4ge0Jvb2tTcGVjaWZpY2F0aW9ufVxuICAgICAgKi9cbiAgICAgcHVibGljIGdldCBib29rU3BlY2lmaWNhdGlvbigpOiBCb29rU3BlY2lmaWNhdGlvbiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBpc2JuXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLl9pc2JuID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIG5hbWVcbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICAqL1xuICAgICBwdWJsaWMgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuICAgICAgICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgYXV0aG9yXG4gICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBhdXRob3IodmFsdWU6IHN0cmluZykge1xuICAgICAgICAgIHRoaXMuX2F1dGhvciA9IHZhbHVlO1xuICAgICB9XG5cbiAgICAgLyoqXG4gICAgICAqIFNldHRlciBwdWJsaXNoWWVhclxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgcHVibGlzaFllYXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICAgIHRoaXMuX3B1Ymxpc2hZZWFyID0gdmFsdWU7XG4gICAgIH1cblxuICAgICAvKipcbiAgICAgICogU2V0dGVyIHBhZ2VzXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAgKi9cbiAgICAgcHVibGljIHNldCBwYWdlcyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgICAgdGhpcy5fcGFnZXMgPSB2YWx1ZTtcbiAgICAgfVxuXG4gICAgIC8qKlxuICAgICAgKiBTZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgICogQHBhcmFtIHtCb29rU3BlY2lmaWNhdGlvbn0gdmFsdWVcbiAgICAgICovXG4gICAgIHB1YmxpYyBzZXQgYm9va1NwZWNpZmljYXRpb24odmFsdWU6IEJvb2tTcGVjaWZpY2F0aW9uKSB7XG4gICAgICAgICAgdGhpcy5fYm9va1NwZWNpZmljYXRpb24gPSB2YWx1ZTtcbiAgICAgfVxufVxuIiwiaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL3NhbGVcIjtcblxuZXhwb3J0IGNsYXNzIENhbmNlbCB7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVHlwZTogU2FsZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9jYW5jZWxlZERhdGVUaW1lOiBEYXRlO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsVHlwZTogU2FsZSwgcmVmdW5kOiBudW1iZXIsIGNhbmNlbGVkRGF0ZVRpbWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsVHlwZSA9IGNhbmNlbFR5cGU7XG4gICAgICAgIHRoaXMuX3JlZnVuZCA9IHJlZnVuZDtcbiAgICAgICAgdGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IGNhbmNlbGVkRGF0ZVRpbWU7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbFR5cGVcbiAgICAgKiBAcmV0dXJuIHtTYWxlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbFR5cGUoKTogU2FsZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbFR5cGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcmVmdW5kKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlZnVuZDtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IGNhbmNlbGVkRGF0ZVRpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NhbmNlbGVkRGF0ZVRpbWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBjYW5jZWxUeXBlXG4gICAgICogQHBhcmFtIHtTYWxlfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IGNhbmNlbFR5cGUodmFsdWU6IFNhbGUpIHtcblx0XHR0aGlzLl9jYW5jZWxUeXBlID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciByZWZ1bmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuXHRcdHRoaXMuX3JlZnVuZCA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsZWREYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjYW5jZWxlZERhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XG5cdFx0dGhpcy5fY2FuY2VsZWREYXRlVGltZSA9IHZhbHVlO1xuXHR9XG4gICAgXG4gICAgXG5cbn0iLCJleHBvcnQgY2xhc3MgQ3VzdG9tZXIge1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3N1ck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVOdW1iZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHN1ck5hbWU6IHN0cmluZywgcGhvbmVOdW1iZXI6IHN0cmluZykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX3N1ck5hbWUgPSBzdXJOYW1lO1xuICAgIHRoaXMuX3Bob25lTnVtYmVyID0gcGhvbmVOdW1iZXI7XG4gIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBuYW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHN1ck5hbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc3VyTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9zdXJOYW1lO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcGhvbmVOdW1iZXJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgcGhvbmVOdW1iZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fcGhvbmVOdW1iZXI7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5fbmFtZSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3VyTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuXHRwdWJsaWMgc2V0IHN1ck5hbWUodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3N1ck5hbWUgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHBob25lTnVtYmVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgcGhvbmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX3Bob25lTnVtYmVyID0gdmFsdWU7XG5cdH1cblxuXG59XG4iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuXG5leHBvcnQgY2xhc3MgT3JkZXJCb29rSXRlbXMge1xuICAgIHByaXZhdGUgX2Jvb2s6IEJvb2s7XG4gICAgcHJpdmF0ZSBfcXVhbnRpdHk6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoYm9vazogQm9vaywgcXVhbnRpdHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9ib29rID0gYm9vaztcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1xuICAgICAqIEByZXR1cm4ge0Jvb2t9XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rKCk6IEJvb2sge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9vaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tcbiAgICAgKiBAcGFyYW0ge0Jvb2t9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBib29rKHZhbHVlOiBCb29rKSB7XG4gICAgICAgIHRoaXMuX2Jvb2sgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9vazogdGhpcy5fYm9vayxcbiAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLl9xdWFudGl0eSxcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBMaXN0Rm9ybWF0IH0gZnJvbSBcInR5cGVzY3JpcHRcIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL29yZGVyLWJvb2staXRlbVwiO1xuXG5leHBvcnQgY2xhc3MgUmVudENhcnQge1xuICAgIGN1c3RvbWVySWQhOiBudW1iZXI7XG4gICAgb3JkZXJCb29rSXRlbXM6IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9yZGVyQm9va0l0ZW1zID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBTYWxlIH0gZnJvbSBcIi4vc2FsZVwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnQgZXh0ZW5kcyBTYWxlIHtcbiAgICBwcml2YXRlIF9yZWZ1bmREYXRlPzogRGF0ZTtcbiAgICBwcml2YXRlIF9yZWZ1bmQ/OiBudW1iZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKHNhbGVCb29rSXRlbXM/OiBBcnJheTxPcmRlckJvb2tJdGVtcz4sIG9wZXJhdGlvbkRhdGVUaW1lPzogRGF0ZSwgY3VzdG9tZXJJZD86IG51bWJlciwgb3BlcmF0aW9uTnVtYmVyPzogc3RyaW5nLCB0b3RhbD86IG51bWJlciwgcmVmdW5kRGF0ZT86IERhdGUsIHJlZnVuZD86IG51bWJlcikge1xuICAgICAgICBzdXBlcihzYWxlQm9va0l0ZW1zLCBjdXN0b21lcklkLCBvcGVyYXRpb25EYXRlVGltZSwgb3BlcmF0aW9uTnVtYmVyLCB0b3RhbClcblxuICAgICAgICB0aGlzLl9yZWZ1bmREYXRlID0gcmVmdW5kRGF0ZTtcbiAgICAgICAgdGhpcy5fcmVmdW5kID0gcmVmdW5kO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHJlZnVuZERhdGVcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVmdW5kRGF0ZSgpOiBEYXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZnVuZERhdGUhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZWZ1bmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCByZWZ1bmQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZnVuZCE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlZnVuZERhdGVcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZWZ1bmREYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX3JlZnVuZERhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgcmVmdW5kXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCByZWZ1bmQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9yZWZ1bmQgPSB2YWx1ZTtcbiAgICB9XG5cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFNhbGVDYXJ0IHtcbiAgICBjdXN0b21lcklkITogbnVtYmVyO1xuICAgIG9yZGVyQm9va0l0ZW1zOiBBcnJheTxPcmRlckJvb2tJdGVtcz47XG5cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLm9yZGVyQm9va0l0ZW1zID0gbmV3IEFycmF5PE9yZGVyQm9va0l0ZW1zPjtcblx0fVxuXG5cblxuXG5cbn0iLCJpbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vYm9va1wiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFNhbGUge1xuICAgIHByaXZhdGUgX29yZGVyQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHByaXZhdGUgX2N1c3RvbWVySWQ/OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfb3BlcmF0aW9uRGF0ZVRpbWU/OiBEYXRlO1xuICAgIHByaXZhdGUgX29wZXJhdGlvbk51bWJlcj86IHN0cmluZztcbiAgICBwcml2YXRlIF90b3RhbD86IG51bWJlcjtcblxuXG5cdGNvbnN0cnVjdG9yKG9yZGVyQm9va0l0ZW1zPzogQXJyYXk8T3JkZXJCb29rSXRlbXM+LCBjdXN0b21lcklkPzogbnVtYmVyLCBvcGVyYXRpb25EYXRlVGltZT86IERhdGUsIG9wZXJhdGlvbk51bWJlcj86IHN0cmluZywgdG90YWw/OiBudW1iZXIpIHtcblx0XHR0aGlzLl9vcmRlckJvb2tJdGVtcyA9IG9yZGVyQm9va0l0ZW1zO1xuXHRcdHRoaXMuX2N1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuXHRcdHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gb3BlcmF0aW9uRGF0ZVRpbWU7XG5cdFx0dGhpcy5fb3BlcmF0aW9uTnVtYmVyID0gb3BlcmF0aW9uTnVtYmVyO1xuXHRcdHRoaXMuX3RvdGFsID0gdG90YWw7XG5cdH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9yZGVyQm9va0l0ZW1zXG4gICAgICogQHJldHVybiB7QXJyYXk8T3JkZXJCb29rSXRlbXM+fVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG9yZGVyQm9va0l0ZW1zKCk6IEFycmF5PE9yZGVyQm9va0l0ZW1zPiB7XG5cdFx0cmV0dXJuIHRoaXMuX29yZGVyQm9va0l0ZW1zITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY3VzdG9tZXJJZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9jdXN0b21lcklkITtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIG9wZXJhdGlvbkRhdGVUaW1lXG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cblx0cHVibGljIGdldCBvcGVyYXRpb25EYXRlVGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fb3BlcmF0aW9uRGF0ZVRpbWUhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgb3BlcmF0aW9uTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuXHRwdWJsaWMgZ2V0IG9wZXJhdGlvbk51bWJlcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9vcGVyYXRpb25OdW1iZXIhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgdG90YWxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgdG90YWwoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fdG90YWwhO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgb3JkZXJCb29rSXRlbXNcbiAgICAgKiBAcGFyYW0ge0FycmF5PE9yZGVyQm9va0l0ZW1zPn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcmRlckJvb2tJdGVtcyh2YWx1ZTogQXJyYXk8T3JkZXJCb29rSXRlbXM+KSB7XG5cdFx0dGhpcy5fb3JkZXJCb29rSXRlbXMgPSB2YWx1ZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVySWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjdXN0b21lcklkKHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLl9jdXN0b21lcklkID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25EYXRlVGltZVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcGVyYXRpb25EYXRlVGltZSh2YWx1ZTogRGF0ZSkge1xuXHRcdHRoaXMuX29wZXJhdGlvbkRhdGVUaW1lID0gdmFsdWU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBvcGVyYXRpb25OdW1iZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBvcGVyYXRpb25OdW1iZXIodmFsdWU6IHN0cmluZykge1xuXHRcdHRoaXMuX29wZXJhdGlvbk51bWJlciA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgdG90YWxcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCB0b3RhbCh2YWx1ZTogbnVtYmVyKSB7XG5cdFx0dGhpcy5fdG90YWwgPSB2YWx1ZTtcblx0fVxuXHRcbiAgICBcbn0iLCJleHBvcnQgY2xhc3MgU3RvY2sge1xuICAgIHByaXZhdGUgX2lzYm46IHN0cmluZztcbiAgICBwcml2YXRlIF9xdWFudGl0eTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3NoZWxmTnVtYmVyOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihpc2JuPzogc3RyaW5nLCBxdWFudGl0eT86IG51bWJlciwgc2hlbGZOdW1iZXI/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IGlzYm4hO1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHF1YW50aXR5ITtcbiAgICAgICAgdGhpcy5fc2hlbGZOdW1iZXIgPSBzaGVsZk51bWJlciE7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBpc2JuXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgaXNibigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNibjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcXVhbnRpdHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcHVibGljIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNoZWxmTnVtYmVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2hlbGZOdW1iZXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoZWxmTnVtYmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBpc2JuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBpc2JuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faXNibiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBxdWFudGl0eVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgcXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzaGVsZk51bWJlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2hlbGZOdW1iZXIodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9zaGVsZk51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuXG59IiwiLy8gZXhwb3J0IE5PREVfT1BUSU9OUz0tLW9wZW5zc2wtbGVnYWN5LXByb3ZpZGVyXG5pbXBvcnQgeyBEYXRhQmFzZSB9IGZyb20gXCIuL2RiL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IEJvb2tTcGVjaWZpY2F0aW9uIH0gZnJvbSBcIi4vZG9tYWluL2Jvb2stc3BlY2lmaWNhdGlvblwiO1xuaW1wb3J0IHsgQ2FuY2VsIH0gZnJvbSBcIi4vZG9tYWluL2NhbmNlbFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9kb21haW4vY3VzdG9tZXJcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi9kb21haW4vcmVudFwiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuL2RvbWFpbi9zYWxlXCI7XG5pbXBvcnQgeyBPcmRlckJvb2tJdGVtcyB9IGZyb20gXCIuL2RvbWFpbi9vcmRlci1ib29rLWl0ZW1cIjtcbmltcG9ydCB7IFN0b2NrIH0gZnJvbSBcIi4vZG9tYWluL3N0b2NrXCI7XG5pbXBvcnQgeyBCb29rU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvYm9vay1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDYW5jZWxTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jYW5jZWwtc2VydmljZVwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZS9jdXN0b21lci1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSZW50U2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2UvcmVudC1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTYWxlU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2Uvc2FsZS1zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlL3N0b2NrLXNlcnZpY2VcIjtcblxuZXhwb3J0IGxldCBib29rU2VydmljZTogQm9va1NlcnZpY2U7XG5leHBvcnQgbGV0IGN1c3RvbWVyU2VydmljZTogQ3VzdG9tZXJTZXJ2aWNlO1xuZXhwb3J0IGxldCBjYW5jZWxTZXJ2aWNlOiBDYW5jZWxTZXJ2aWNlO1xuZXhwb3J0IGxldCByZW50U2VydmljZTogUmVudFNlcnZpY2U7XG5leHBvcnQgbGV0IHNhbGVTZXJ2aWNlOiBTYWxlU2VydmljZTtcbmV4cG9ydCBsZXQgc3RvY2tTZXJ2aWNlOiBTdG9ja1NlcnZpY2U7XG5cbmxldCBkYjogRGF0YUJhc2UgPSBuZXcgRGF0YUJhc2UoKTtcbmluaXRpbGlhemVTZXJ2aWNlcyhkYik7XG5pbml0aWxpYXplRGF0YSgpO1xuYWRkTGlzdGVuZXJGb3JNZW51SXRlbXMoKTtcblxuZnVuY3Rpb24gaW5pdGlsaWF6ZVNlcnZpY2VzKGRiOiBEYXRhQmFzZSkge1xuICBib29rU2VydmljZSA9IG5ldyBCb29rU2VydmljZShkYi5nZXRCb29rc0xpc3QsIGRiLmdldEJvb2tTcGVjaWZpY2F0aW9ucyk7XG4gIGN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UoZGIuZ2V0Q3VzdG9tZXJzTGlzdCk7XG4gIGNhbmNlbFNlcnZpY2UgPSBuZXcgQ2FuY2VsU2VydmljZShkYi5nZXRDYW5jYWxlZFNhbGVzKTtcbiAgcmVudFNlcnZpY2UgPSBuZXcgUmVudFNlcnZpY2UoZGIuZ2V0UmVudHMsIGRiLmdldFJlbnRDYXJ0KTtcbiAgc2FsZVNlcnZpY2UgPSBuZXcgU2FsZVNlcnZpY2UoZGIuZ2V0U2FsZXNMaXN0LCBkYi5nZXRTYWxlQ2FydCk7XG4gIHN0b2NrU2VydmljZSA9IG5ldyBTdG9ja1NlcnZpY2UoZGIuZ2V0U3RvY2tzTGlzdCk7XG4gIGNvbnNvbGUubG9nKFwiU2VydmljZXMgaW50aWxpYXplZC5cIik7XG5cbiAgY3VzdG9tZXJTZXJ2aWNlLmFkZEN1c3RvbWVyKG5ldyBDdXN0b21lcihcIlwiLCBcIlwiLCBcIlwiKSk7XG4gIGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lcihuZXcgQ3VzdG9tZXIoXCJcIiwgXCJcIiwgXCJcIikpO1xuXG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NVwiLCBcIkE0NS01MlwiLCAxMCk7XG4gIHN0b2NrU2VydmljZS5hZGRTdG9jayhcIjEyMy00NlwiLCBcIkE0NS01MlwiLCAxMCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpbGlhemVEYXRhKCkge1xuICBib29rU2VydmljZS5ib29rTGlzdCA9IGF3YWl0IGJvb2tTZXJ2aWNlLmdldEFsbEJvb2tzRGF0YUZyb21TZXJ2aWNlKCk7XG4gIGxpc3RCb29rcztcbiAgY29uc29sZS5sb2coYm9va1NlcnZpY2UuYm9va0xpc3QpO1xuICBcbn1cblxuZnVuY3Rpb24gYWRkTGlzdGVuZXJGb3JNZW51SXRlbXMoKSB7XG4gIC8vc2FsZVNlcnZpY2UudXBkYXRlU2FsZUNhcnQoKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRCb29rTWVudUl0ZW1cIiwgXCJhZGRCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJzaG93Qm9va3NNZW51SXRlbVwiLCBcImxpc3RCb29rc1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwiYWRkQ3VzdG9tZXJNZW51SXRlbVwiLCBcImFkZEN1c3RvbWVyU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJhZGRTdG9ja01lbnVJdGVtXCIsIFwiYWRkU3RvY2tTZWN0aW9uXCIpO1xuICBzaG93QW5kSGlkZShcInNhbGVCb29rTWVudUl0ZW1cIiwgXCJzYWxlQm9va1NlY3Rpb25cIik7XG4gIHNob3dBbmRIaWRlKFwicmVudEJvb2tNZW51SXRlbVwiLCBcInJlbnRCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJjYW5jZWxTYWxlTWVudUl0ZW1cIiwgXCJjYW5jZWxTYWxlU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJjYW5jZWxSZW50TWVudUl0ZW1cIiwgXCJjYW5jZWxSZW50U2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJyZWZ1bmRCb29rTWVudUl0ZW1cIiwgXCJyZWZ1bmRCb29rU2VjdGlvblwiKTtcbiAgc2hvd0FuZEhpZGUoXCJyZW50Tm93XCIsIFwicmVudEJvb2tTZWN0aW9uXCIpO1xuXG59XG5cbmZ1bmN0aW9uIHNob3dBbmRIaWRlKGJ0bklkOiBzdHJpbmcsIGVsZW1lbnRJZDogc3RyaW5nKSB7XG4gIC8vc2FsZVNlcnZpY2UudXBkYXRlU2FsZUNhcnQoKTtcblxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcbiAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnRuSWQpO1xuXG4gIGlmIChlbGVtZW50ICYmIGJ0bikge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgYWRkQm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWJvb2stZm9ybVwiKTtcbmlmIChhZGRCb29rRm9ybSAhPSBudWxsKSB7XG4gIGFkZEJvb2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRCb29rRm9ybSk7XG5cbiAgICBjb25zdCB0aXRsZSA9IGZvcm1EYXRhLmdldChcImJvb2tUaXRsZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYXV0aG9yID0gZm9ybURhdGEuZ2V0KFwiYm9va0F1dGhvclwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgaXNibiA9IGZvcm1EYXRhLmdldChcImJvb2tJc2JuXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBwdWJsaXNoWWVhciA9IGZvcm1EYXRhLmdldChcImJvb2tQdWJsaXNoWWVhclwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGFnZXMgPSBmb3JtRGF0YS5nZXQoXCJib29rUGFnZXNcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3QgcHJpY2UgPSBmb3JtRGF0YS5nZXQoXCJib29rUHJpY2VcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJ0RlYyAzMSwgOTk5OSAyMzo1OTo1OScpO1xuXG4gICAgLy90aXRsZS5tYXRjaChcIlwiKTtcblxuICAgIGNvbnN0IGJvb2tTcGVjID0gbmV3IEJvb2tTcGVjaWZpY2F0aW9uKGlzYm4sIHByaWNlLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgIGNvbnN0IGJvb2sgPSBuZXcgQm9vayhpc2JuLCB0aXRsZSwgYXV0aG9yLCBwdWJsaXNoWWVhciwgcGFnZXMsIGJvb2tTcGVjKTtcbiAgICAvL2Jvb2tTZXJ2aWNlLmFkZEJvb2soYm9vayk7XG5cbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGJvb2tTZXJ2aWNlLmNyZWF0ZUJvb2soYm9vayk7XG4gICAgbGlzdEJvb2tzKCk7XG5cbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgYWxlcnQoYm9vay5pc2JuICsgXCIgbnVtYXJhbMSxIGtpdGFwIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLlwiKTtcbiAgICAgIGFkZEJvb2tGb3JtLnJlc2V0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGJvb2suaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCBFa2xlbWUgxLDFn2xlbWkgU8SxcmFzxLFuZGEgQmlyIEhhdGEgb2x1xZ90dS5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG5jb25zdCBhZGRTdG9ja0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1zdG9jay1mb3JtXCIpKTtcbmlmIChhZGRTdG9ja0Zvcm0pIHtcbiAgYWRkU3RvY2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoYWRkU3RvY2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJib29rSXNibkZvckFkZFN0b2NrXCIpIGFzIHN0cmluZztcbiAgICBjb25zdCBxdWFudHRpeSA9IGZvcm1EYXRhLmdldChcInN0b2NrUXVhbnRpdHlcIikgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3Qgc2hlbGZOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJzaGVsZk51bWJlclwiKSBhcyBzdHJpbmc7XG5cbiAgICBjb25zdCBzdG9jayA9IG5ldyBTdG9jayhpc2JuLCBxdWFudHRpeSwgc2hlbGZOdW1iZXIpO1xuXG4gICAgY29uc3QgaXNDb250YWluc0Jvb2sgPSBib29rU2VydmljZS5ib29rTGlzdC5zb21lKGIgPT4gYi5pc2JuID09IGlzYm4pO1xuXG4gICAgaWYgKCFpc0NvbnRhaW5zQm9vaykge1xuICAgICAgYWxlcnQoXCJTdG9rIGVrbGVubWV5ZSDDp2FsxLHFn8SxbGFuIGtpdGFwLCBrYXnEsXRsxLEgZGXEn2lsZGlyLiBMw7x0ZmVuIMO2bmNlIGtpdGFwIGVrbGV5aW5pelwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgaXNPayA9IGF3YWl0IHN0b2NrU2VydmljZS5hZGRTdG9ja01vY2soc3RvY2spO1xuXG4gICAgICBpZiAoaXNPaykge1xuICAgICAgICBhbGVydChpc2JuICsgXCIgaXNibiBudW1hcmFsxLEga2l0YXB0YW4sIFwiICsgcXVhbnR0aXkgKyBcIiBrYWRhciBzaXN0ZW1lIHN0b2sgZWtsZW5tacWfdGlyLlwiKTtcbiAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgYWRkU3RvY2tGb3JtLnJlc2V0KCk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBwcmV2ZW50IHJlbG9hZFxuICB9O1xufVxuXG4vKipcbiAqIE3DvMWfdGVyaSBla2xlbWUgZm9ybXUgc3VibWl0IG9sYXnEsW7EsSBtb2NrIGN1c3RvbWVyU2VydmljZSBkZWtpIG1vY2sgc2VydmlzZSBiYcSfbGFkxLFtXG4gKi9cbmNvbnN0IGFkZEN1c3RvbWVyRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWN1c3RvbWVyLWZvcm1cIikpO1xuaWYgKGFkZEN1c3RvbWVyRm9ybSkge1xuICBhZGRDdXN0b21lckZvcm0ub25zdWJtaXQgPSBhc3luYyAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShhZGRDdXN0b21lckZvcm0pO1xuXG4gICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyTmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc3VybmFtZSA9IGZvcm1EYXRhLmdldChcImN1c3RvbWVyU3VybmFtZVwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgcGhvbmVOdW1iZXIgPSBmb3JtRGF0YS5nZXQoXCJjdXN0b21lclBob25lTnVtYmVyXCIpIGFzIHN0cmluZztcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKG5hbWUsIHN1cm5hbWUsIHBob25lTnVtYmVyKTtcbiAgICBsZXQgc3VjY2VzcyA9IGF3YWl0IGN1c3RvbWVyU2VydmljZS5hZGRDdXN0b21lck1vY2soY3VzdG9tZXIpO1xuXG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIGFsZXJ0KFwiTcO8xZ90ZXJpIEVrbGVtZSDEsMWfbGVtaSBCYcWfYXLEsSDEsGxlIFRhbWFtbGFubcSxxZ90xLFyLiBcIik7XG4gICAgICBhZGRDdXN0b21lckZvcm0ucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXCJNw7zFn3RlcmkgRWtsZW1lIMSwxZ9sZW1pIFPEsXJhc8SxbmRhIGJpciBoYXRhIGlsZSBrYXLFn8SxbMSxbGTEsS4gXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gcHJldmVudCByZWxvYWRcbiAgfTtcbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIHNhdMSxxZ/EsSB5YXDEsWzEsXJrZW4sIGtpdGFwbGFyxLEgc2VwZXRlIGVrbGl5b3J1ei5cbiAqIFNlcGV0ZSBla2xlZGlrdGVuIHNvbnJhIGJ0blNhbGUgaWRsaSBidXRvbnVuIGNsaWNrIGV2ZW50aSwgbW9jayBzZXJ2aXNpIMOnYcSfxLFyxLF5b3JcbiAqL1xuY29uc3Qgc2FsZUJvb2tGb3JtID0gPEhUTUxGb3JtRWxlbWVudD4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWxlLWJvb2stZm9ybVwiKSk7XG5pZiAoc2FsZUJvb2tGb3JtKSB7XG4gIHNhbGVCb29rRm9ybS5vbnN1Ym1pdCA9ICgpID0+IHtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHNhbGVCb29rRm9ybSk7XG5cbiAgICBjb25zdCBpc2JuID0gZm9ybURhdGEuZ2V0KFwiaXNibkZvclNhbGVcIikgYXMgc3RyaW5nO1xuICAgIGNvbnN0IGJvb2sgPSBib29rU2VydmljZS5nZXRCb29rKGlzYm4pO1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJjdXN0b21lcklkRm9yU2FsZVwiKSBhcyBzdHJpbmcpO1xuICAgIC8vaXNWYWxpZEN1c3RvbWVyIHJlc3Qgc2VydmlzdGVuIGTDtmVuZW4gdmVyaXllIGfDtnJlIMWfZWtpbGxlbmVjZWtcbiAgICBjb25zdCBpc1ZhbGlkQ3VzdG9tZXI6IGJvb2xlYW4gPSB0cnVlOyAvL2N1c3RvbWVyU2VydmljZS5pc1ZhbGlkQ3VzdG9tZXIoY3VzdG9tZXJJZCk7XG4gICAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChmb3JtRGF0YS5nZXQoXCJxdWFudGl0eUZvclNhbGVcIikgYXMgc3RyaW5nKTtcblxuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgc2FsZVNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICBzYWxlQm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGnDp2luIGJ1IGJ1dG9uYSB0xLFrbGFuZMSxxJ/EsW5kYSBzZXJ2aXNlIGdpZGlwIHNlcGV0dGVraSBraXRhcGxhcsSxbiBzYXTEscWfxLEgZ2Vyw6dla2xlxZ9peW9yXG4gKiBCdXJhZGEgZGnEn2VyIGJ1dG9ubGFyZGEgb2xkdcSfdSBnaWJpIGRpcmVrIG1vY2sgc2VydmlzaW5lIGJhxJ9sYW5tYWsgeWVyaW5lIHNlcnZpc2UgZ2l0bWVrIGR1cnVtdW5kYXnEsXouIFxuICogw4fDvG5rw7wgc2VydmlzdGUgU2FsZSBuZXNuZXNpbmkgb2x1xZ90dXJ1cCBtb2NrIHNlcnZpc2luZSBwYXJhbWV0cmUgb2xhcmFrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blNhbGUgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuU2FsZVwiKSk7XG5idG5TYWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChzYWxlU2VydmljZS5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcblxuICAgIGFsZXJ0KFwiU2VwZXR0ZSDDvHLDvG4geW9rLiBMw7x0ZmVuIMO2bmNlIMO8csO8biBla2xleWluaXpcIik7XG4gIH0gZWxzZSB7XG4gICAgc2FsZVNlcnZpY2UuY2FydFRvU2FsZSgpO1xuICB9XG5cbn0pO1xuXG4vKipcbiAqIEtpdGFwbGFyxLEgbGlzdGVsZW1layBpw6dpbiB0xLFrbGFuxLFsYW4gYnV0b24gY2xpY2sgZXZlbnRpXG4gKi9cbmNvbnN0IGJ0blNob3dCb29rc01lbnVJdGVtID0gPEhUTUxFbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dCb29rc01lbnVJdGVtXCIpKTtcbmJ0blNob3dCb29rc01lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgbGlzdEJvb2tzKCk7XG59KVxuXG5jb25zdCBjYW5jZWxTYWxlRm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWwtc2FsZS1mb3JtXCIpO1xuaWYgKGNhbmNlbFNhbGVGb3JtKSB7XG4gIGNhbmNlbFNhbGVGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyDEsHB0YWwgacWfbGVtaW5pbiDDp2FsxLHFn2FiaWxtZXNpIGnDp2luIMO2bmNlIHNhdMSxxZ8gdmVyaXNpIGVrbGVkaW0sIHNvbnJhIHNhdMSxxZ8gaXB0YWxpIGnFn2xlbWkgw6dhbMSxxZ/EsXlvclxuICAgIGxldCBzYmkgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBPcmRlckJvb2tJdGVtcyhib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKSlcblxuICAgIGxldCBhID0gbmV3IFNhbGUoc2JpLCAxLCBuZXcgRGF0ZSwgXCJTMDIxMTIyMTYzMDQ1XCIsIDEyMyk7XG4gICAgc2FsZVNlcnZpY2Uuc2FsZUxpc3QucHVzaChhKTtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGNhbmNlbFNhbGVGb3JtKTtcbiAgICBjb25zdCBzYWxlTnVtYmVyID0gZm9ybURhdGEuZ2V0KFwic2FsZU51bWJlcmZvckNhbmNlbFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgc2FsZSA9IHNhbGVTZXJ2aWNlLmdldFNhbGUoc2FsZU51bWJlcik7XG5cbiAgICBpZiAoc2FsZSkge1xuICAgICAgbGV0IGNhbmNlbFNhbGU6IENhbmNlbCA9IG5ldyBDYW5jZWwoc2FsZSwgc2FsZS50b3RhbCwgbmV3IERhdGUpO1xuICAgICAgbGV0IHN0YXRlID0gYXdhaXQgY2FuY2VsU2VydmljZS5jYW5jZWxTYWxlTW9jayhjYW5jZWxTYWxlKTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIGFsZXJ0KHNhbGUub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIHNhdMSxxZ8gaXB0YWwgZWRpbG1pxZ90aXIuXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoc2FsZS5vcGVyYXRpb25OdW1iZXIgKyBcIiBudW1hcmFsxLEgc2F0xLHFnyBpcHRhbCBlZGlsaXJrZW4gaGF0YSBtZXlkYW5hIGdlbGRpLlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoc2FsZU51bWJlciArIFwiIG51bWFyYWzEsSBzYXTEscWfIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfVxufVxuXG5jb25zdCBjYW5jZWxSZW50Rm9ybSA9IDxIVE1MRm9ybUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWwtcmVudC1mb3JtXCIpO1xuaWYgKGNhbmNlbFJlbnRGb3JtKSB7XG4gIGNhbmNlbFJlbnRGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBLaXJhbGFtYSBpcHRhbGluaW4gw6dhbMSxxZ9hYmlsbWVzaSBpw6dpbiDDtm5jZSB2ZXJpIGVrbGVkaW0sIHNvbnJhIGlwdGFsIGnFn2xlbWkgw6dhbMSxxZ/EsXlvclxuICAgIGxldCBzYmkgPSBuZXcgQXJyYXk8T3JkZXJCb29rSXRlbXM+O1xuICAgIHNiaS5wdXNoKG5ldyBPcmRlckJvb2tJdGVtcyhib29rU2VydmljZS5nZXRCb29rKFwiMTIzLTQ1XCIpLCAzKSk7XG5cbiAgICBsZXQgckRhdGUgPSBuZXcgRGF0ZTtcbiAgICByRGF0ZS5zZXREYXRlKHJEYXRlLmdldERhdGUoKSArIDE0KTtcblxuICAgIGxldCBhID0gbmV3IFJlbnQoc2JpLCBuZXcgRGF0ZSwgMSwgXCJSMDIxMTIyMTYzMDQ1XCIsIDEyMywgckRhdGUsIDIwMCk7XG4gICAgcmVudFNlcnZpY2UucmVudExpc3QucHVzaChhKTtcblxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGNhbmNlbFJlbnRGb3JtKTtcbiAgICBjb25zdCByZW50TnVtYmVyID0gZm9ybURhdGEuZ2V0KFwicmVudE51bWJlcmZvckNhbmNlbFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgcmVudCA9IHJlbnRTZXJ2aWNlLmdldFJlbnQocmVudE51bWJlcik7XG5cbiAgICBpZiAocmVudCkge1xuICAgICAgbGV0IGNhbmNlbFJlbnQ6IENhbmNlbCA9IG5ldyBDYW5jZWwocmVudCwgcmVudC50b3RhbCwgbmV3IERhdGUpO1xuICAgICAgbGV0IHN0YXRlID0gYXdhaXQgY2FuY2VsU2VydmljZS5jYW5jZWxSZW50TW9jayhjYW5jZWxSZW50KTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxtacWfdGlyLlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChyZW50TnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsbWEgYnVsdW5hbWFtxLHFn3TEsXIuIFRla3JhciBkZW5leWluaXouXCIpO1xuICAgIH1cblxuICB9XG5cbn1cblxuLyoqQnVyYWRhIG1vY2sgc2VydmlzaSB5b2sgw6fDvG5rw7wgYnVyYWRhIGtpdGFwIGtpcmFsYW1hc8SxIHlhcMSxbMSxcmtlbiwga2l0YXBsYXLEsSBzZXBldGUgZWtsaXlvcnV6LlxuICogU2VwZXRlIGVrbGVkaWt0ZW4gc29ucmEgYnRuUmVudCBpZGxpIGJ1dG9udW4gY2xpY2sgZXZlbnRpLCBtb2NrIHNlcnZpc2kgw6dhxJ/EsXLEsXlvclxuICovXG5jb25zdCByZW50Qm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbnQtYm9vay1mb3JtXCIpKTtcbmlmIChyZW50Qm9va0Zvcm0pIHtcbiAgcmVudEJvb2tGb3JtLm9uc3VibWl0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEocmVudEJvb2tGb3JtKTtcblxuICAgIGNvbnN0IGlzYm4gPSBmb3JtRGF0YS5nZXQoXCJpc2JuRm9yUmVudFwiKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgYm9vayA9IGJvb2tTZXJ2aWNlLmdldEJvb2soaXNibik7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcImN1c3RvbWVySWRGb3JSZW50XCIpIGFzIHN0cmluZyk7XG4gICAgLy9pc1ZhbGlkQ3VzdG9tZXIgcmVzdCBzZXJ2aXN0ZW4gZMO2ZW5lbiB2ZXJpeWUgZ8O2cmUgxZ9la2lsbGVuZWNla1xuICAgIGNvbnN0IGlzVmFsaWRDdXN0b21lcjogYm9vbGVhbiA9IHRydWU7IC8vY3VzdG9tZXJTZXJ2aWNlLmlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkKTtcbiAgICBjb25zdCBxdWFudGl0eSA9IHBhcnNlSW50KGZvcm1EYXRhLmdldChcInF1YW50aXR5Rm9yUmVudFwiKSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHN0b2NrID0gc3RvY2tTZXJ2aWNlLmdldFN0b2NrKGlzYm4pITtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoYm9vaykge1xuICAgICAgICBpZiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2sucXVhbnRpdHkgPj0gcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkQ3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgcmVudFNlcnZpY2UuYWRkQm9va1RvQ2FydChib29rLCBxdWFudGl0eSwgY3VzdG9tZXJJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhbGVydChjdXN0b21lcklkICsgXCIgbnVtYXJhbMSxIG3DvMWfdGVyaSBrYXnEsXRsxLEgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGVydChxdWFudGl0eSArIFwiIGthZGFyIGtpdGFwIGTDvGtrYW5kYSBtZXZjdXQgZGXEn2lsZGlyLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYETDvGtrYW5kYSAke2lzYm59IG51bWFyYWzEsSBraXRhYsSxbiBzdG/En3UgbWV2Y3V0IGRlxJ9pbGRpci5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoaXNibiArIFwiIG51bWFyYWzEsSBraXRhcCB5b2t0dXIuXCIpO1xuICAgICAgfVxuXG4gICAgICByZW50Qm9va0Zvcm0ucmVzZXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogS2l0YXAgc2F0xLHFn8SxIGnDp2luIGnFn2xlbSB5YXDEsWzEsXJrZW4ga2l0YXBsYXIgc2VwZXRlIGVrbGVuaXlvci5cbiAqIEVrbGVtZSBpxZ9sZW1pIGJpdHRpa3RlbiBzb25yYSBzYXTEsW4gYWxtIGlpw6dpbiBidSBidXRvbmEgdMSxa2xhbmTEscSfxLFuZGEgc2VydmlzZSBnaWRpcCBzZXBldHRla2kga2l0YXBsYXLEsW4gc2F0xLHFn8SxIGdlcsOnZWtsZcWfaXlvclxuICogQnVyYWRhIGRpxJ9lciBidXRvbmxhcmRhIG9sZHXEn3UgZ2liaSBkaXJlayBtb2NrIHNlcnZpc2luZSBiYcSfbGFubWFrIHllcmluZSBzZXJ2aXNlIGdpdG1layBkdXJ1bXVuZGF5xLF6LiBcbiAqIMOHw7xua8O8IHNlcnZpc3RlIFNhbGUgbmVzbmVzaW5pIG9sdcWfdHVydXAgbW9jayBzZXJ2aXNpbmUgcGFyYW1ldHJlIG9sYXJrIGdlw6dpeW9ydXouXG4gKi9cbmNvbnN0IGJ0blJlbnQgPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuUmVudFwiKSk7XG5idG5SZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGlmIChyZW50U2VydmljZS5yZW50Q2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICBhbGVydChcIlNlcGV0dGUgw7xyw7xuIHlvay4gTMO8dGZlbiDDtm5jZSDDvHLDvG4gZWtsZXlpbml6XCIpO1xuICB9IGVsc2Uge1xuICAgIHJlbnRTZXJ2aWNlLmNhcnRUb1JlbnQoKTtcbiAgfVxuXG59KTtcblxuY29uc3QgcmVmdW5kQm9va0Zvcm0gPSA8SFRNTEZvcm1FbGVtZW50Pihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlZnVuZC1ib29rLWZvcm1cIikpO1xuaWYgKHJlZnVuZEJvb2tGb3JtKSB7XG4gIHJlZnVuZEJvb2tGb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcblxuICAgIC8vIEtpcmFsYW1hIGnFn2xlbWluZGVuIGdlcmkgw7ZkZW1lIGnFn2xlbWkgw6dhbMSxxZ9hYmlsbWVzaSBpw6dpbiDDtm5jZSBraXJhbGFtYSB2ZXJpc2kgZWtsZWRpbSwgXG4gICAgLy8gU29ucmEgZ2VyaSDDtmRlbWUgacWfbGVtaSDDp2FsxLHFn8SxeW9yXG4gICAgbGV0IHNiaSA9IG5ldyBBcnJheTxPcmRlckJvb2tJdGVtcz47XG4gICAgc2JpLnB1c2gobmV3IE9yZGVyQm9va0l0ZW1zKGJvb2tTZXJ2aWNlLmdldEJvb2soXCIxMjMtNDVcIiksIDMpKVxuXG4gICAgbGV0IHJEYXRlID0gbmV3IERhdGU7XG4gICAgckRhdGUuc2V0RGF0ZShyRGF0ZS5nZXREYXRlKCkgKyAyMyk7XG5cbiAgICBsZXQgYSA9IG5ldyBSZW50KHNiaSwgbmV3IERhdGUsIDEsIFwiUjAyMTEyMjE2MzA0NVwiLCAxMjMsIHJEYXRlLCAwKTtcbiAgICBhLnJlZnVuZCA9IHJlbnRTZXJ2aWNlLmNhbGN1bGF0ZVJlZnVuZEFtb3VudChhKTtcblxuICAgIHJlbnRTZXJ2aWNlLnJlbnRMaXN0LnB1c2goYSk7XG4gICAgLy9WZXJpIEdpcmnFn2kgc29uIGFsYW7EsVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHJlZnVuZEJvb2tGb3JtKTtcbiAgICBjb25zdCByZW50TnVtYmVyID0gZm9ybURhdGEuZ2V0KFwicmVudE51bWJlcmZvclJlZnVuZFwiKSBhcyBzdHJpbmc7XG5cbiAgICBsZXQgcmVudCA9IHJlbnRTZXJ2aWNlLmdldFJlbnQocmVudE51bWJlcik7XG4gICAgaWYgKHJlbnQpIHtcblxuICAgICAgbGV0IHJlZnVuZCA9IGF3YWl0IHJlbnRTZXJ2aWNlLnJlZnVuZFJlbnRNb2NrKHJlbnQpO1xuXG4gICAgICBpZiAocmVmdW5kKSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGdlcmkgYWzEsW5txLHFn3TEsXIuXCIpO1xuICAgICAgICBhbGVydChcIkdlcmkgw7ZkZW1lIG1pa3RhcsSxOlwiICsgcmVmdW5kICsgXCIg4oK6IC5cIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KHJlbnQub3BlcmF0aW9uTnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGlwdGFsIGVkaWxpcmtlbiBoYXRhIG1leWRhbmEgZ2VsZGkuXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChyZW50TnVtYmVyICsgXCIgbnVtYXJhbMSxIGtpcmFsYW1hIGJ1bHVuYW1hbcSxxZ90xLFyLiBUZWtyYXIgZGVuZXlpbml6LlwiKTtcbiAgICB9XG5cbiAgfTtcbn1cblxuZnVuY3Rpb24gbGlzdEJvb2tzKCkge1xuICBjb25zdCBsaXN0Qm9va3NEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RCb29rc1wiKTtcblxuICBpZiAobGlzdEJvb2tzRGl2KSB7XG4gICAgbGV0IHJvdywgY29sdW1uO1xuXG5cbiAgICB3aGlsZSAobGlzdEJvb2tzRGl2Lmxhc3RDaGlsZCAmJiBsaXN0Qm9va3NEaXYuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgbGlzdEJvb2tzRGl2LnJlbW92ZUNoaWxkKGxpc3RCb29rc0Rpdi5sYXN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGJvb2tTZXJ2aWNlLmJvb2tMaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcm93LmNsYXNzTmFtZSA9IFwicm93LWxpc3QtYm9va1wiO1xuXG4gICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwiY29sdW1uLWxpc3QtYm9va1wiO1xuICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gZWxlbWVudC5pc2JuLnRvU3RyaW5nKCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZS50b1N0cmluZygpO1xuICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBlbGVtZW50LmF1dGhvci50b1N0cmluZygpO1xuICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJjb2x1bW4tbGlzdC1ib29rXCI7XG4gICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSBzdG9ja1NlcnZpY2UuZ2V0U3RvY2tRdWFudGl0eShlbGVtZW50LmlzYm4pLnRvU3RyaW5nKCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcImNvbHVtbi1saXN0LWJvb2tcIjtcbiAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGVsZW1lbnQuYm9va1NwZWNpZmljYXRpb24ucHJpY2UudG9TdHJpbmcoKSArIFwiIOKCulwiO1xuICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgIGxpc3RCb29rc0Rpdi5hcHBlbmRDaGlsZChyb3cpO1xuICAgIH0pO1xuICB9XG5cbn0iLCIvKipcbiAqIEBhdXRob3IgTWVobWV0IEUuIEFrY2FuIC0gMjEuMTAuMjJcbiAqL1xuaW1wb3J0IHsgc3RvY2tTZXJ2aWNlIH0gZnJvbSBcIi4uXCI7XG5pbXBvcnQgeyBCb29rIH0gZnJvbSBcIi4uL2RvbWFpbi9ib29rXCI7XG5pbXBvcnQgeyBCb29rU3BlY2lmaWNhdGlvbiB9IGZyb20gXCIuLi9kb21haW4vYm9vay1zcGVjaWZpY2F0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCb29rU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfYm9va0xpc3Q6IEFycmF5PEJvb2s+O1xuICAgIHByaXZhdGUgX2Jvb2tTcGVjaWZpY2F0aW9uOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj47XG4gICAgYm9va0FwaTogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvdjEvYm9va3MnO1xuXG4gICAgY29uc3RydWN0b3IoYm9va0xpc3Q6IEFycmF5PEJvb2s+LCBib29rU3BlY2lmaWNhdGlvbjogQXJyYXk8Qm9va1NwZWNpZmljYXRpb24+KSB7XG4gICAgICAgIHRoaXMuX2Jvb2tMaXN0ID0gYm9va0xpc3Q7XG4gICAgICAgIHRoaXMuX2Jvb2tTcGVjaWZpY2F0aW9uID0gYm9va1NwZWNpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGJvb2tMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Qm9vaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rTGlzdCgpOiBBcnJheTxCb29rPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ib29rTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgYm9va1NwZWNpZmljYXRpb25cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxCb29rU3BlY2lmaWNhdGlvbj59XG4gICAgICovXG4gICAgcHVibGljIGdldCBib29rU3BlY2lmaWNhdGlvbigpOiBBcnJheTxCb29rU3BlY2lmaWNhdGlvbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYm9va1NwZWNpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGJvb2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxCb29rPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGJvb2tMaXN0KHZhbHVlOiBBcnJheTxCb29rPikge1xuICAgICAgICB0aGlzLl9ib29rTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBib29rU3BlY2lmaWNhdGlvblxuICAgICAqIEBwYXJhbSB7QXJyYXk8Qm9va1NwZWNpZmljYXRpb24+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm9va1NwZWNpZmljYXRpb24odmFsdWU6IEFycmF5PEJvb2tTcGVjaWZpY2F0aW9uPikge1xuICAgICAgICB0aGlzLl9ib29rU3BlY2lmaWNhdGlvbiA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHBhcmFtZXRyZSBvbGFyYWsgZ2VsZW4gaXNibiBiaWxnaXNpbmUgZ8O2cmUgaWxnaWxpIGtpdGFixLEgYnVsdXIuXG4gICAgICogQHBhcmFtIGlzYm4gQnVsdW5hY2FrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcmV0dXJucyBpc2JuIG51bWFyYXPEsW5hIGfDtnJlIGlsZ2lsaSBraXRhYsSxIEJvb2sgbmVzbmVzaSBvbGFyYWsgZ2VyaSBkw7ZuZMO8csO8clxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCb29rKGlzYm46IHN0cmluZyk6IEJvb2sge1xuICAgICAgICAvL0J1cmFkYW4gbnVsbCBiaXIgZGXEn2VyIGRlIGTDtm5lYmlsZWNlxJ9pIGnDp2luIGhhdGEgdmVyaXlvclxuICAgICAgICAvL2FtYSBiaXogc29uZGFraSAhIG9wZXJhdMO2csO8IGlsZSBudWxsIGRlxJ9lciBkw7ZubWV5ZWNlayBkaXllIGdhcmFudGkgdmVyaXlvcnV6XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2tMaXN0LmZpbmQoYiA9PiBiLmlzYm4gPT09IGlzYm4pITtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBbGxCb29rc0RhdGFGcm9tU2VydmljZSgpOiBQcm9taXNlPEFycmF5PEJvb2s+PiB7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJvb2tBcGksIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgY29uc3QgZ2V0UmVzdWx0ID0gPEFycmF5PEJvb2s+PkpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCA0KSk7XG4gICAgICAgIHJldHVybiBnZXRSZXN1bHQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlQm9vayhiOiBCb29rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYm9va0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogYi5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYi5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiBiLnBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaXNoWWVhcjogYi5wdWJsaXNoWWVhcixcbiAgICAgICAgICAgICAgICAgICAgYm9va1NwZWNpZmljYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzYm46IGIuYm9va1NwZWNpZmljYXRpb24uaXNibixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBiLmJvb2tTcGVjaWZpY2F0aW9uLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGIuYm9va1NwZWNpZmljYXRpb24uZW5kRGF0ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVzdCBzZXJ2aXNpbmRlbiBkw7ZuZW4gY2V2YXAgPT5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYm9va0xpc3QgPSBhd2FpdCB0aGlzLmdldEFsbEJvb2tzRGF0YUZyb21TZXJ2aWNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IENhbmNlbCB9IGZyb20gXCIuLi9kb21haW4vY2FuY2VsXCI7XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWxTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9jYW5jZWxsZWRMaXN0OiBBcnJheTxDYW5jZWw+O1xuICAgIGNhbmNlbFNhbGVBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2NhbmNlbFNhbGUnO1xuICAgIGNhbmNlbFJlbnRBcGk6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3YxL2NhbmNlbFJlbnQnO1xuXG4gICAgY29uc3RydWN0b3IoY2FuY2VsbGVkTGlzdDogQXJyYXk8Q2FuY2VsPikge1xuICAgICAgICB0aGlzLl9jYW5jZWxsZWRMaXN0ID0gY2FuY2VsbGVkTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Q2FuY2VsU2FsZT59XG4gICAgICovXG4gICAgcHVibGljIGdldCBjYW5jZWxsZWRMaXN0KCk6IEFycmF5PENhbmNlbD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsbGVkTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY2FuY2VsbGVkU2FsZXNMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxDYW5jZWxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IGNhbmNlbGxlZExpc3QodmFsdWU6IEFycmF5PENhbmNlbD4pIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGVkTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVEaWZmSG91cnMoZDE6IERhdGUsIGQyOiBEYXRlKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgZGlmZk1pbGlzOiBudW1iZXIgPSAoZDEuZ2V0VGltZSgpIC0gZDIuZ2V0VGltZSgpKTsvLyBtaWxpIHNlY29uZHNcbiAgICAgICAgbGV0IGRpZmZIb3VyID0gTWF0aC5mbG9vcihkaWZmTWlsaXMgLyAxMDAwIC8gNjAgLyA2MCk7IC8vIC8xMDAwID4gc2Vjb25kIC8gNjAgPiBtaW4gLyA2MCA+IGhvdXJcbiAgICAgICAgcmV0dXJuIGRpZmZIb3VyO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxTYWxlKGNhbmNlbDogQ2FuY2VsKTogdm9pZCB7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsU2FsZVJlZnVuZChjYW5jZWwpO1xuICAgICAgICBjYW5jZWwucmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLmNhbmNlbGxlZExpc3QucHVzaChjYW5jZWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbFNhbGU6IENhbmNlbCk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jYWxjdWxhdGVEaWZmSG91cnMoY2FuY2VsU2FsZS5jYW5jZWxlZERhdGVUaW1lLCBjYW5jZWxTYWxlLmNhbmNlbFR5cGUub3BlcmF0aW9uRGF0ZVRpbWUpXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA+IDI0KSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxTYWxlLmNhbmNlbFR5cGUudG90YWwgKiAwLjc1O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsU2FsZS5jYW5jZWxUeXBlLnRvdGFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZ1bmQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2FuY2VsU2FsZU1vY2soY2FuY2VsU2FsZTogQ2FuY2VsKSB7XG5cbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxTYWxlUmVmdW5kKGNhbmNlbFNhbGUpO1xuXG4gICAgICAgIGNhbmNlbFNhbGUucmVmdW5kID0gcmVmdW5kO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY2FuY2VsU2FsZUFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgc2FsZTogY2FuY2VsU2FsZS5jYW5jZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IGNhbmNlbFNhbGUucmVmdW5kLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZERhdGVUaW1lOiBjYW5jZWxTYWxlLmNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9Ub2RvIHNhbGUgbW9jayBzZXJ2aXNpbmUgZGVsZXRlIGlzdGXEn2kgYXTEsXAgbyBzYWxlIG5lc25lc2luaSBzaWxlY2VrXG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG5cblxuICAgIH1cblxuICAgIHB1YmxpYyBjYW5jZWxSZW50KGNhbmNlbDogQ2FuY2VsKSB7XG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlciA9IHRoaXMuY2FsY3VsYXRlQ2FuY2VsUmVudFJlZnVuZChjYW5jZWwpO1xuICAgICAgICBjYW5jZWwucmVmdW5kID0gcmVmdW5kO1xuICAgICAgICB0aGlzLmNhbmNlbGxlZExpc3QucHVzaChjYW5jZWwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbFJlbnQ6IENhbmNlbCk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jYWxjdWxhdGVEaWZmSG91cnMoY2FuY2VsUmVudC5jYW5jZWxlZERhdGVUaW1lLCBjYW5jZWxSZW50LmNhbmNlbFR5cGUub3BlcmF0aW9uRGF0ZVRpbWUpXG4gICAgICAgIGxldCByZWZ1bmQ6IG51bWJlcjtcblxuICAgICAgICBpZiAoZGlmZiA+IDI0KSB7XG4gICAgICAgICAgICByZWZ1bmQgPSBjYW5jZWxSZW50LmNhbmNlbFR5cGUudG90YWwgKiAwLjc1O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmdW5kID0gY2FuY2VsUmVudC5jYW5jZWxUeXBlLnRvdGFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZ1bmQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2FuY2VsUmVudE1vY2soY2FuY2VsUmVudDogQ2FuY2VsKXtcbiAgICAgICAgbGV0IHJlZnVuZDogbnVtYmVyID0gdGhpcy5jYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kKGNhbmNlbFJlbnQpO1xuXG4gICAgICAgIGNhbmNlbFJlbnQucmVmdW5kID0gcmVmdW5kO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY2FuY2VsUmVudEFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcmVudDogY2FuY2VsUmVudC5jYW5jZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IGNhbmNlbFJlbnQucmVmdW5kLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZERhdGVUaW1lOiBjYW5jZWxSZW50LmNhbmNlbGVkRGF0ZVRpbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9Ub2RvIHNhbGUgbW9jayBzZXJ2aXNpbmUgZGVsZXRlIGlzdGXEn2kgYXTEsXAgbyBzYWxlIG5lc25lc2luaSBzaWxlY2VrXG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSGF0YSBPbHXFn3R1LicpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vZG9tYWluL2N1c3RvbWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21lclNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2N1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+O1xuICAgIHByaXZhdGUgY3VzdG9tZXJBcGk6IHN0cmluZyA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9jdXN0b21lcnNcIjtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbWVyTGlzdDogQXJyYXk8Q3VzdG9tZXI+KSB7XG4gICAgICAgIHRoaXMuX2N1c3RvbWVyTGlzdCA9IGN1c3RvbWVyTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY3VzdG9tZXJMaXN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Q3VzdG9tZXI+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgY3VzdG9tZXJMaXN0KCk6IEFycmF5PEN1c3RvbWVyPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21lckxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIGN1c3RvbWVyTGlzdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8Q3VzdG9tZXI+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgY3VzdG9tZXJMaXN0KHZhbHVlOiBBcnJheTxDdXN0b21lcj4pIHtcbiAgICAgICAgdGhpcy5fY3VzdG9tZXJMaXN0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEN1c3RvbWVyKG5ld0N1c3RvbWVyOiBDdXN0b21lcikge1xuICAgICAgICB0aGlzLmN1c3RvbWVyTGlzdC5wdXNoKG5ld0N1c3RvbWVyKTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAgICBwdWJsaWMgZ2V0Q3VzdG9tZXJJbmZvKGlkOiBudW1iZXIpOiBDdXN0b21lciB8IHVuZGVmaW5lZCB7XG4gICAgXG4gICAgICAgICAgICBsZXQgY3VzdG9tZXIgPSB0aGlzLmN1c3RvbWVyTGlzdC5maW5kKGN1c3RvbWVyID0+IGN1c3RvbWVyLmlkID09PSBpZCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoY3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHVibGljIGlzVmFsaWRDdXN0b21lcihjdXN0b21lcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBcbiAgICAgICAgICAgIGxldCBpc1ZhbGlkID0gdGhpcy5jdXN0b21lckxpc3Quc29tZShjdXN0b21lciA9PiBjdXN0b21lci5pZCA9PT0gY3VzdG9tZXJJZCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAqL1xuXG4gICAgYXN5bmMgYWRkQ3VzdG9tZXJNb2NrKG5ld0N1c3RvbWVyOiBDdXN0b21lcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmN1c3RvbWVyQXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuZXdDdXN0b21lci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzdXJOYW1lOiBuZXdDdXN0b21lci5zdXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogbmV3Q3VzdG9tZXIucGhvbmVOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IHNlcnZpc2luZGVuIGTDtm5lbiBjZXZhcCA9PlwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBzdG9ja1NlcnZpY2UgfSBmcm9tIFwiLi5cIjtcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vZG9tYWluL2Jvb2tcIjtcbmltcG9ydCB7IFJlbnQgfSBmcm9tIFwiLi4vZG9tYWluL3JlbnRcIjtcbmltcG9ydCB7IFJlbnRDYXJ0IH0gZnJvbSBcIi4uL2RvbWFpbi9yZW50LWNhcnRcIjtcbmltcG9ydCB7IE9yZGVyQm9va0l0ZW1zIH0gZnJvbSBcIi4uL2RvbWFpbi9vcmRlci1ib29rLWl0ZW1cIjtcblxuZXhwb3J0IGNsYXNzIFJlbnRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9yZW50TGlzdDogQXJyYXk8UmVudD47XG5cbiAgICBwcml2YXRlIF9yZW50Q2FydDogUmVudENhcnQ7XG4gICAgcHVibGljIHJlbnRBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9yZW50cyc7XG4gICAgcmVmdW5kUGVyY2VudDogbnVtYmVyO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihyZW50TGlzdDogQXJyYXk8UmVudD4sIHJlbnRDYXJ0OiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50TGlzdCA9IHJlbnRMaXN0O1xuICAgICAgICB0aGlzLnJlZnVuZFBlcmNlbnQgPSAwLjc1O1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHJlbnRDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZW50TGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFJlbnQ+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVudExpc3QoKTogQXJyYXk8UmVudD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVudExpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxSZW50Pn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlbnRMaXN0KHZhbHVlOiBBcnJheTxSZW50Pikge1xuICAgICAgICB0aGlzLl9yZW50TGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciByZW50Q2FydFxuICAgICAqIEByZXR1cm4ge1JlbnRDYXJ0fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgcmVudENhcnQoKTogUmVudENhcnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVudENhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHJlbnRDYXJ0XG4gICAgICogQHBhcmFtIHtSZW50Q2FydH0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHJlbnRDYXJ0KHZhbHVlOiBSZW50Q2FydCkge1xuICAgICAgICB0aGlzLl9yZW50Q2FydCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRSZW50KHJlbnQ6IFJlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW50TGlzdC5wdXNoKHJlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwbGFyxLFuIGhlcHNpIHNlcGV0ZSBla2xlbmRpa3RlbiBzb25yYSB0b3BsbWEgw7xjcmV0aSBoZXNhcGxhdWFuIGZvbmtzaXlvblxuICAgICAqIEBwYXJhbSByZW50IEtpdGFwbGFyxLFuIGxpc3Rlc2luaW4gYnVsdW5kdcSfdSBuZXNuZVxuICAgICAqIEByZXR1cm5zIFRvcGxhbSDDvGNyZXRcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlVG90YWwocmVudDogUmVudCk6IG51bWJlciB7XG4gICAgICAgIGxldCBzdWJUb3RhbDogbnVtYmVyID0gMDtcblxuICAgICAgICAvL2l0IGNhbiBiZSA9PiBsZXQgZW50cnkgb2YgcmVudC5ib29rQW5kUXVhbnRpdHlNYXAuZW50cmllcygpXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVudC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3ViVG90YWwgKz0gaXRlbS5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogaXRlbS5xdWFudGl0eVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YlRvdGFsO1xuICAgIH1cblxuICAgIC8vIFIwNTEwMjIxNDU1MDkgPT4gZG9tYWluLlJlbnQgMDUuMTAuMjAyMiAxNDo1NS4wOVxuICAgIGdlbmVyYXRlUmVudE51bWJlcihjdXN0b21lcklkOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsZXQgcmVjZWlwdE51bWJlcjogc3RyaW5nID0gXCJSXCIgKyB0b2RheS5nZXREYXkoKS50b1N0cmluZygpICtcbiAgICAgICAgICAgIHRvZGF5LmdldE1vbnRoKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArXG4gICAgICAgICAgICB0b2RheS5nZXRIb3VycygpLnRvU3RyaW5nKCkgKyB0b2RheS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSArXG4gICAgICAgICAgICB0b2RheS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKSArIGN1c3RvbWVySWQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXR1cm4gcmVjZWlwdE51bWJlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZDEgS2l0YXBsYcSxbiBraXJhbMSxayBvbGFyYWsgYWzEsW5kxLHEn8SxIHRhcmloXG4gICAgICogQHBhcmFtIGQyIEtpdGFwbGFyxLFuIGdlcmkgZ2V0aXJpbGRpxJ9pIHRhcmloXG4gICAgICogQHJldHVybnMgxLBraSB0YXJpaCBhcmFzxLFuZGFraSBmYXJrIChzYWF0IG9sYXJhaylcbiAgICAgKi9cbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlmZkhvdXJzKGQxOiBEYXRlLCBkMjogRGF0ZSk6IG51bWJlciB7XG5cbiAgICAgICAgbGV0IGRpZmZNaWxpczogbnVtYmVyID0gKGQxLmdldFRpbWUoKSAtIGQyLmdldFRpbWUoKSk7Ly8gbWlsaSBzZWNvbmRzXG4gICAgICAgIGxldCBkaWZmSG91ciA9IE1hdGguZmxvb3IoZGlmZk1pbGlzIC8gMTAwMCAvIDYwIC8gNjApOyAvLyAvMTAwMCA+IHNlY29uZCAvIDYwID4gbWluIC8gNjAgPiBob3VyXG4gICAgICAgIHJldHVybiBkaWZmSG91cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCBpbGsga2lyYWxhbmTEscSfxLEgYW5kYSwgemFtYW7EsW5kYSBnZXRpcmlsZGnEn2kgZ2liaSBkw7zFn8O8bsO8bGVyZWsgdmVyaWxlY2VrIG9sYW4gdmFyc2F5xLFsYW4gZ2VyaSDDtmRlbWUgbWlrdGFyxLFcbiAgICAgKiBAcGFyYW0gcmVudCBIZXNhcGxhbmFjYWsgb2xhbiBnZXJpIMO2ZGVtZSBtaWt0YXLEsW7EsW4gacOnaW5kZSBidWx1bmR1xJ91IG5lc25lXG4gICAgICovXG4gICAgcHVibGljIGNhbGN1bGF0ZVJlZnVuZChyZW50OiBSZW50KTogdm9pZCB7XG4gICAgICAgIHJlbnQucmVmdW5kID0gcmVudC50b3RhbCAqIHRoaXMucmVmdW5kUGVyY2VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLaXRhcCBraXJhbGFuZMSxLCBva3VuZHUgdmUgZ2VyaSBnZXRpcmlsZGnEn2kgemFtYW4gbmUga2FkYXIgZ2VyaSDDtmRlbWUgdmVyaWxlY2XEn2luaSBoZXNhcGxhclxuICAgICAqIEBwYXJhbSByZW50IEhlc2FwbGFuYWNhayBvbGFuIGdlcmkgw7ZkZW1lIG1pa3RhcsSxbsSxbiBpw6dpbmRlIGJ1bHVuZHXEn3UgbmVzbmVcbiAgICAgKiBAcmV0dXJucyBHZXJpIMO2ZGVtZSBtaWt0YXLEsVxuICAgICAqL1xuICAgIHB1YmxpYyBjYWxjdWxhdGVSZWZ1bmRBbW91bnQocmVudDogUmVudCk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gdGhpcy5jYWxjdWxhdGVEaWZmSG91cnMocmVudC5yZWZ1bmREYXRlLCByZW50Lm9wZXJhdGlvbkRhdGVUaW1lKSAvIDI0O1xuICAgICAgICBsZXQgcmVmdW5kOiBudW1iZXI7XG5cbiAgICAgICAgaWYgKGRpZmYgPD0gMTQpIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiAwLjc1O1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPD0gMjQpIHtcbiAgICAgICAgICAgIGxldCBmaW5lID0gKDAuNzUgLSAoKGRpZmYgLSAxNCkgKiAwLjA1KSk7XG4gICAgICAgICAgICByZWZ1bmQgPSByZW50LnRvdGFsICogZmluZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlZnVuZCA9IHJlbnQudG90YWwgKiAwLjI1O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlZnVuZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVudChyZW50TnVtYmVyOiBzdHJpbmcpOiBSZW50IHtcbiAgICAgICAgbGV0IHJlbnQgPSB0aGlzLnJlbnRMaXN0LmZpbmQocyA9PiBzLm9wZXJhdGlvbk51bWJlciA9PT0gcmVudE51bWJlcik7XG4gICAgICAgIHJldHVybiByZW50ITtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQm9va1RvQ2FydChib29rOiBCb29rLCBxdWFudGl0eTogbnVtYmVyLCBjdXN0b21lcklkOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbnRDYXJ0LmN1c3RvbWVySWQgPSBjdXN0b21lcklkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVudENhcnQuY3VzdG9tZXJJZCAhPT0gY3VzdG9tZXJJZCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRmFya2zEsSBtw7zFn3Rlcml5ZSBraXRhcCBraXJhbGFubWF5YSDDp2FsxLHFn8SxbMSxeW9yLiBMw7x0ZmVuIHRlayBtw7zFn3RlcmkgacOnaW4gacWfbGVtIHlhcMSxbsSxelwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLnB1c2gobmV3IE9yZGVyQm9va0l0ZW1zKGJvb2ssIHF1YW50aXR5KSlcbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVSZW50Q2FydCgpIHtcbiAgICAgICAgY29uc3QgcmVudENhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbnRDYXJ0XCIpO1xuICAgICAgICBjb25zdCBzdWJUb3RhbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsUmVudEFtb3VudFRsXCIpO1xuXG4gICAgICAgIGlmIChyZW50Q2FydCkge1xuXG4gICAgICAgICAgICBsZXQgcm93LCBjb2x1bW4sIHN1YlRvdGFsOiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICB3aGlsZSAocmVudENhcnQubGFzdENoaWxkICYmIHJlbnRDYXJ0LmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZW50Q2FydC5yZW1vdmVDaGlsZChyZW50Q2FydC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViVG90YWxTcGFuIS50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtcm93XCI7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMucmVudENhcnQub3JkZXJCb29rSXRlbXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IHRoaXMucmVudENhcnQuY3VzdG9tZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0uYm9vay5uYW1lO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJyZW50LWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IGl0ZW0ucXVhbnRpdHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLmNsYXNzTmFtZSA9IFwicmVudC1jYXJ0LWNvbHVtblwiO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4udGV4dENvbnRlbnQgPSAoaXRlbS5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogaXRlbS5xdWFudGl0eSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocm93ICYmIHN1YlRvdGFsU3Bhbikge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnJlbnRDYXJ0Lm9yZGVyQm9va0l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YlRvdGFsICs9IHQuYm9vay5ib29rU3BlY2lmaWNhdGlvbi5wcmljZSAqIHQucXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVudENhcnQuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICAgICBzdWJUb3RhbFNwYW4udGV4dENvbnRlbnQgPSBzdWJUb3RhbC50b1N0cmluZygpICsgXCIgVExcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cblxuICAgIH1cblxuICAgIHB1YmxpYyBjYXJ0VG9SZW50KCkge1xuICAgICAgICBsZXQgcmVudENhcnQ6IFJlbnRDYXJ0ID0gdGhpcy5yZW50Q2FydDtcbiAgICAgICAgbGV0IHJlbnQgPSBuZXcgUmVudCgpO1xuXG4gICAgICAgIHJlbnQub3JkZXJCb29rSXRlbXMgPSByZW50Q2FydC5vcmRlckJvb2tJdGVtcztcbiAgICAgICAgcmVudC5jdXN0b21lcklkID0gcmVudENhcnQuY3VzdG9tZXJJZDtcbiAgICAgICAgcmVudC5vcGVyYXRpb25OdW1iZXIgPSB0aGlzLmdlbmVyYXRlUmVudE51bWJlcihyZW50Q2FydC5jdXN0b21lcklkKTtcbiAgICAgICAgcmVudC5vcGVyYXRpb25EYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJlbnQudG90YWwgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsKHJlbnQpO1xuICAgICAgICBsZXQgckRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByRGF0ZS5zZXREYXRlKHJEYXRlLmdldERhdGUoKSArIDE0KTtcbiAgICAgICAgcmVudC5yZWZ1bmREYXRlID0gckRhdGU7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlUmVmdW5kKHJlbnQpO1xuXG4gICAgICAgIGZvciAobGV0IGkgb2YgcmVudC5vcmRlckJvb2tJdGVtcykge1xuICAgICAgICAgICAgc3RvY2tTZXJ2aWNlLmluY3JlYXNlU3RvY2soaS5ib29rLmlzYm4sIC1pLnF1YW50aXR5KVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW50Q2FydCA9IG5ldyBSZW50Q2FydDsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVSZW50Q2FydCgpO1xuICAgICAgICB0aGlzLmFkZFJlbnRNb2NrKHJlbnQpO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFJlbnRNb2NrKHI6IFJlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5yZW50QXBpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBvcmRlckJvb2tJdGVtczogQXJyYXkuZnJvbShyLm9yZGVyQm9va0l0ZW1zKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJJZDogci5jdXN0b21lcklkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25EYXRlVGltZTogci5vcGVyYXRpb25EYXRlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uTnVtYmVyOiByLm9wZXJhdGlvbk51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHIudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZERhdGU6IHIucmVmdW5kRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kOiByLnJlZnVuZFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3QgYXBpZGFuIGTDtm5lbiBjZXZhcDpcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhbGVydChcIktpdGFwIGtpcmFsYW1hIGnFn2xlbWkgYmHFn2FyxLF5bGEgZ2Vyw6dla2xlxZ9tacWfdGlyLlwiKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZpxZ9pbml6aSBrYXliZXRuZXlpbml6LiBGacWfIG51bWFyYW7EsXo6IFwiICsgci5vcGVyYXRpb25OdW1iZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiS2l0YXAga2lyYWxhbWEgacWfbGVtaSBzxLFyYXPEsW5kYSBiaXIgaGF0YSBvbHXFn3R1LiBMw7x0ZmVuIHRla3JhciBkZW5leWluaXouXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmdW5kUmVudE1vY2socjogUmVudCkge1xuICAgICAgICAvL1BBVENIIEJlbGlybGkgYmlyIGtheW5ha3Rha2kgdmVyaWxlcmluIGJpciBrxLFzbcSxbsSxbiBkZcSfacWfdGlyaWxtZXNpIGnDp2luIGt1bGxhbsSxbGFuIG1ldG9kdHVyLlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLnJlbnRBcGkgKyBcIi9cIiArIHIub3BlcmF0aW9uTnVtYmVyLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcmVmdW5kRGF0ZTogci5yZWZ1bmREYXRlLFxuICAgICAgICAgICAgICAgICAgICByZWZ1bmQ6IHIucmVmdW5kXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIucmVmdW5kO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhhdGEgb2x1xZ90dSwgaGF0YSBrb2R1OiAke3Jlc3BvbnNlLnN0YXR1c30gYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCB7IHN0b2NrU2VydmljZSB9IGZyb20gXCIuLlwiO1xuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9kb21haW4vYm9va1wiO1xuaW1wb3J0IHsgU2FsZSB9IGZyb20gXCIuLi9kb21haW4vc2FsZVwiO1xuaW1wb3J0IHsgT3JkZXJCb29rSXRlbXMgfSBmcm9tIFwiLi4vZG9tYWluL29yZGVyLWJvb2staXRlbVwiO1xuaW1wb3J0IHsgU2FsZUNhcnQgfSBmcm9tIFwiLi4vZG9tYWluL3NhbGUtY2FydFwiO1xuXG5leHBvcnQgY2xhc3MgU2FsZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3NhbGVMaXN0OiBBcnJheTxTYWxlPjtcbiAgICBwcml2YXRlIF9zYWxlQ2FydDogU2FsZUNhcnQ7XG4gICAgcHVibGljIHNhbGVBcGkgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS92MS9zYWxlcyc7XG5cbiAgICBjb25zdHJ1Y3RvcihzYWxlTGlzdDogQXJyYXk8U2FsZT4sIHNhbGVDYXJ0OiBTYWxlQ2FydCkge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHNhbGVMaXN0O1xuICAgICAgICB0aGlzLl9zYWxlQ2FydCA9IHNhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlTGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGU+fVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgc2FsZUxpc3QoKTogQXJyYXk8U2FsZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2FsZUxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dGVyIHNhbGVMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTYWxlPn0gdmFsdWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNhbGVMaXN0KHZhbHVlOiBBcnJheTxTYWxlPikge1xuICAgICAgICB0aGlzLl9zYWxlTGlzdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzYWxlQ2FydFxuICAgICAqIEByZXR1cm4ge0FycmF5PFNhbGVDYXJ0Pn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNhbGVDYXJ0KCk6IFNhbGVDYXJ0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbGVDYXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHRlciBzYWxlQ2FydFxuICAgICAqIEBwYXJhbSB7QXJyYXk8U2FsZUNhcnQ+fSB2YWx1ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgc2FsZUNhcnQodmFsdWU6IFNhbGVDYXJ0KSB7XG4gICAgICAgIHRoaXMuX3NhbGVDYXJ0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNhbGUoc2FsZTogU2FsZSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNhbGVMaXN0LnB1c2goc2FsZSk7XG5cbiAgICB9XG5cbiAgICBjYWxjdWxhdGVUb3RhbChzYWxlOiBTYWxlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHN1YlRvdGFsID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN1YlRvdGFsICs9IGVudHJ5LmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBlbnRyeS5xdWFudGl0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJUb3RhbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVNhbGVOdW1iZXIoY3VzdG9tZXJJZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IHJlY2VpcHROdW1iZXI6IHN0cmluZyA9IFwiU1wiICsgdG9kYXkuZ2V0RGF5KCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1vbnRoKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldEhvdXJzKCkudG9TdHJpbmcoKSArIHRvZGF5LmdldE1pbnV0ZXMoKS50b1N0cmluZygpICsgdG9kYXkuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkgKyBjdXN0b21lcklkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmV0dXJuIHJlY2VpcHROdW1iZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNhbGUoc2FsZU51bWJlcjogc3RyaW5nKTogU2FsZSB7XG4gICAgICAgIGxldCBzYWxlID0gdGhpcy5zYWxlTGlzdC5maW5kKHMgPT4gcy5vcGVyYXRpb25OdW1iZXIgPT09IHNhbGVOdW1iZXIpO1xuICAgICAgICByZXR1cm4gc2FsZSE7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVNhbGUoc2FsZTogU2FsZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNhbGVMaXN0LmluZGV4T2Yoc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQm9va1RvQ2FydChib29rOiBCb29rLCBxdWFudGl0eTogbnVtYmVyLCBjdXN0b21lcklkOiBudW1iZXIpIHtcblxuICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2FsZUNhcnQuY3VzdG9tZXJJZCA9IGN1c3RvbWVySWQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zYWxlQ2FydC5jdXN0b21lcklkICE9PSBjdXN0b21lcklkKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJGYXJrbMSxIG3DvMWfdGVyaXllIGtpdGFwIHNhdMSxbG1heWEgw6dhbMSxxZ/EsWzEsXlvci4gTMO8dGZlbiB0ZWsgbcO8xZ90ZXJpIGnDp2luIGnFn2xlbSB5YXDEsW7EsXpcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcmRlckJvb2tJdGVtczogT3JkZXJCb29rSXRlbXMgPSBuZXcgT3JkZXJCb29rSXRlbXMoYm9vaywgcXVhbnRpdHkpO1xuICAgICAgICB0aGlzLnNhbGVDYXJ0Lm9yZGVyQm9va0l0ZW1zLnB1c2gob3JkZXJCb29rSXRlbXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNhbGVDYXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNhbGVDYXJ0KCkge1xuICAgICAgICBjb25zdCBzYWxlQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FsZUNhcnRcIik7XG4gICAgICAgIGNvbnN0IHN1YlRvdGFsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG90YWxTYWxlQW1vdW50VGxcIik7XG5cbiAgICAgICAgaWYgKHNhbGVDYXJ0KSB7XG5cbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbiwgc3ViVG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChzYWxlQ2FydC5sYXN0Q2hpbGQgJiYgc2FsZUNhcnQuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHNhbGVDYXJ0LnJlbW92ZUNoaWxkKHNhbGVDYXJ0Lmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUb3RhbFNwYW4hLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1yb3dcIjtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5zYWxlQ2FydC5vcmRlckJvb2tJdGVtcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gdGhpcy5zYWxlQ2FydC5jdXN0b21lcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5ib29rLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSBcInNhbGUtY2FydC1jb2x1bW5cIjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uLnRleHRDb250ZW50ID0gaXRlbS5xdWFudGl0eS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uY2xhc3NOYW1lID0gXCJzYWxlLWNhcnQtY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi50ZXh0Q29udGVudCA9IChpdGVtLmJvb2suYm9va1NwZWNpZmljYXRpb24ucHJpY2UgKiBpdGVtLnF1YW50aXR5KS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb3cgJiYgc3ViVG90YWxTcGFuKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHRoaXMuc2FsZUNhcnQub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViVG90YWwgKz0gdC5ib29rLmJvb2tTcGVjaWZpY2F0aW9uLnByaWNlICogdC5xdWFudGl0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzYWxlQ2FydC5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIHN1YlRvdGFsU3Bhbi50ZXh0Q29udGVudCA9IHN1YlRvdGFsLnRvU3RyaW5nKCkgKyBcIiBUTFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNhcnRUb1NhbGUoKTogYW55IHtcbiAgICAgICAgbGV0IHNhbGVDYXJ0OiBTYWxlQ2FydCA9IHRoaXMuc2FsZUNhcnQ7XG4gICAgICAgIGxldCBzYWxlID0gbmV3IFNhbGUoKTtcblxuICAgICAgICBzYWxlLm9yZGVyQm9va0l0ZW1zID0gc2FsZUNhcnQub3JkZXJCb29rSXRlbXM7XG4gICAgICAgIHNhbGUuY3VzdG9tZXJJZCA9IHNhbGVDYXJ0LmN1c3RvbWVySWQ7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uTnVtYmVyID0gdGhpcy5nZW5lcmF0ZVNhbGVOdW1iZXIoc2FsZUNhcnQuY3VzdG9tZXJJZCk7XG4gICAgICAgIHNhbGUub3BlcmF0aW9uRGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzYWxlLnRvdGFsID0gdGhpcy5jYWxjdWxhdGVUb3RhbChzYWxlKTtcblxuICAgICAgICBmb3IgKGxldCBxIG9mIHNhbGUub3JkZXJCb29rSXRlbXMpIHtcbiAgICAgICAgICAgIHN0b2NrU2VydmljZS5pbmNyZWFzZVN0b2NrKHEuYm9vay5pc2JuLCAtIHEucXVhbnRpdHkpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3VjY2VzcyA9IHRoaXMuYWRkU2FsZU1vY2soc2FsZSk7XG4gICAgICAgIHRoaXMuc2FsZUNhcnQgPSBuZXcgU2FsZUNhcnQoKTsgLy8gc2VwZXRpIGJvxZ9hbHRcbiAgICAgICAgdGhpcy51cGRhdGVTYWxlQ2FydCgpO1xuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG5cbiAgICBhc3luYyBhZGRTYWxlTW9jayhzOiBTYWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc2FsZUFwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCb29rSXRlbXM6IEFycmF5LmZyb20ocy5vcmRlckJvb2tJdGVtcyksXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVySWQ6IHMuY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uRGF0ZVRpbWU6IHMub3BlcmF0aW9uRGF0ZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk51bWJlcjogcy5vcGVyYXRpb25OdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBzLnRvdGFsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN0IGFwaWRhbiBkw7ZuZW4gY2V2YXA6XFxuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJLaXRhcCBzYXTEscWfIGnFn2xlbWkgYmHFn2FyxLF5bGEgZ2Vyw6dla2xlxZ9tacWfdGlyLlwiKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZpxZ9pbml6aSBrYXliZXRtZXlpbml6LiBGacWfIE51bWFyYXPEsTogXCIgKyBzLm9wZXJhdGlvbk51bWJlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSGF0YSBvbHXFn3R1LCBoYXRhIGtvZHU6ICR7cmVzcG9uc2Uuc3RhdHVzfSBgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG4iLCJpbXBvcnQgeyBTdG9jayB9IGZyb20gXCIuLi9kb21haW4vc3RvY2tcIjtcblxuZXhwb3J0IGNsYXNzIFN0b2NrU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfc3RvY2tMaXN0OiBBcnJheTxTdG9jaz47XG4gICAgcHJpdmF0ZSBzdG9ja0FwaTogc3RyaW5nID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDIvYXBpL3N0b2Nrc1wiO1xuXG4gICAgY29uc3RydWN0b3Ioc3RvY2tMaXN0OiBBcnJheTxTdG9jaz4pIHtcbiAgICAgICAgdGhpcy5fc3RvY2tMaXN0ID0gc3RvY2tMaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHRlciBzdG9ja0xpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxTdG9jaz59XG4gICAgICovXG4gICAgcHVibGljIGdldCBzdG9ja0xpc3QoKTogQXJyYXk8U3RvY2s+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b2NrTGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgc3RvY2tMaXN0XG4gICAgICogQHBhcmFtIHtBcnJheTxTdG9jaz59IHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHNldCBzdG9ja0xpc3QodmFsdWU6IEFycmF5PFN0b2NrPikge1xuICAgICAgICB0aGlzLl9zdG9ja0xpc3QgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKiogIWF0dGVudGlvbiwgKmltcG9ydGFudCwgP3F1ZXN0aW9uLCBUT0RPXG4gICAgICogISDDlm5jZWxpa2xlIGluY3JlYXNlU3RvY2sgZm9ua3NpeW9udW5kYW4gZmFya2zEsSBiaXIgacWfIHlhcMSxeW9yLFxuICAgICAqICogS2l0YXAgaGVuw7x6IGVrbGVuZGlrdGVuIHNvbnJhIGhlbWVuIGdpcml5b3IsXG4gICAgICogPyBLaXRhcCBpbGsgZGVmYSBla2xlbmRpeXNlIGJ1IGZvbmtzaXlvbiBtdSDDp2FsxLHFn2FjYWsgPyBFVkVULlxuICAgICAqIFRPRE8gaW5jcmVhc2VTdG9jayBmb25rc2l5b251bnUgaW5jZWxlXG4gICAgICogRWxpbWl6ZGUgaGnDpyBzdG9jayBrYXlkxLEvbmVzbmVzaSB5b2ssIHllbmkga2F5xLF0L25lc25lIG9sdcWfdHVydXlvcnV6XG4gICAgICogWWVuaSBla2xlbmVuIGtpdGFiYSBzdG9rIGVrbGVtZSBpxZ9sZW1pXG4gICAgICogQHBhcmFtIGlzYm4gIHN0b2sgZWtsZW5lY2VrIG9sYW4ga2l0YWLEsW4gaXNibiBudW1hcmFzxLFcbiAgICAgKiBAcGFyYW0gc2hlbGZOdW1iZXIgc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiByYWYgbnVtYXJhc8SxXG4gICAgICogQHBhcmFtIHF1YW50aXR5IGtpdGFwZGFuIGthw6cgYWRldCBzdG/En2EgZWtsZW5lY2VrXG4gICAgICovXG4gICAgcHVibGljIGFkZFN0b2NrKGlzYm46IHN0cmluZywgc2hlbGZOdW1iZXI6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBsZXQgbmV3U3RvY2sgPSBuZXcgU3RvY2soaXNibiwgcXVhbnRpdHksIHNoZWxmTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMuc3RvY2tMaXN0LnB1c2gobmV3U3RvY2spO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtpdGFwIHphdGVuIGVrbGksIGhhbGloYXrEsXJkYSB2YXIsIGRhaGEgc29ucmEgeWVuaSBraXRhcGxhciBnZWxkaSxzdG9rIGFydMSxcm1hIGnFn2xlbWksXG4gICAgICogQHBhcmFtIGlzYm4gc3RvayBla2xlbmVjZWsgb2xhbiBraXRhYsSxbiBpc2JuIG51bWFyYXPEsVxuICAgICAqIEBwYXJhbSBxdWFudGl0eSBzdG9rIGVrbGVuZWNlayBvbGFuIGtpdGFixLFuIGFkZWRpXG4gICAgICogQHJldHVybnMgacWfbGVtIGdlcsOnZWtsZcWfbWVzaSBkdXJ1bXVuZGEgdHJ1ZSwgZGnEn2VyIGR1cnVtZGEgZmFsc2UgZMO2bmVyXG4gICAgICovXG4gICAgcHVibGljIGluY3JlYXNlU3RvY2soaXNibjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBzdG9jayA9IHRoaXMuZ2V0U3RvY2soaXNibik7XG4gICAgICAgIGlmIChzdG9jaykge1xuICAgICAgICAgICAgc3RvY2sucXVhbnRpdHkgPSAoc3RvY2sucXVhbnRpdHkgKyBxdWFudGl0eSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN0b2NrIG5lc25lc2luaSBnZXJpIGTDtm5kw7xyw7xyXG4gICAgICogQHBhcmFtIGlzYm4gc3RvY2sgbmVzbmVzaSBnZXRpcmlsZWNlayBvbGFuIG5lc25lbmluIGlzYm4gbm9zdSxcbiAgICAgKiBAcmV0dXJucyBkYiBvbGFuIHN0b2NrIG5lc25lbnNpIGdlcmkgZMO2bmVyLCBkYiBkZSB5b2sgaXNlIHRocm93IGlsZSBoYXRhIGbEsXJsYXTEsXJsxLFyXG4gICAgICovXG4gICAgcHVibGljIGdldFN0b2NrKGlzYm46IHN0cmluZykge1xuICAgICAgICBsZXQgc3RvY2sgPSB0aGlzLnN0b2NrTGlzdC5maW5kKHMgPT4gcy5pc2JuID09PSBpc2JuKTtcbiAgICAgICAgaWYgKHN0b2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvY2s7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3RvY2tRdWFudGl0eShpc2JuOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBsZXQgczogU3RvY2sgPSB0aGlzLmdldFN0b2NrKGlzYm4pITtcblxuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMucXVhbnRpdHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEXEn2VyIHN0b2sgbmVzbmVzaSB5b2sgaXNlIHN0b2sgbmVzbmVzaSwgYmVsaXJ0aWxlbiBhZGV0IGthZGFyIHN0b2sgYmlsZ2lzaSBpbGUgYmVyYWJlciBla2xlbml5b3IuXG4gICAgICogxLDFn3RlIGJ1IG9sdcWfdHVybWEvY3JlYXRlIGnFn2xlbWkgYnVyYWRhIHlhcMSxbMSxeW9yLlxuICAgICAqIEBwYXJhbSBzIGluZGV4LnRzIGRvc3lhc8SxbmRhbiBnZWxlbiBzdG9rIG5lc25lc2lcbiAgICAgKi9cbiAgICBhc3luYyBhZGRTdG9ja01vY2soczogU3RvY2spOiBQcm9taXNlPEJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5zdG9ja0FwaSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgaXNibjogcy5pc2JuLFxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgc2hlbGZOdW1iZXI6IHMuc2hlbGZOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hhdGEgT2x1xZ90dS4nICsgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvayBla2xlbmlya2VuIGXEn2VyIHN0b2sgbmVzbmVzaSBkYWhhIMO2bmNlZGVuIHZhciBpc2UsIHN0b2sgYXJ0xLFyxLFtxLFuxLEgcHV0IGlsZSB5YXBhY2HEn8SxelxuICAgICAqIEBwYXJhbSBzIGluZGV4LnRzIGRvc3lhc8SxbmRhbiBnZWxlbiBzdG9rIG5lc25lc2lcbiAgICAgKi9cbiAgICBhc3luYyBpbmNyZWFzZVN0b2NrTW9jayhzOiBTdG9jaykge1xuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuc3RvY2tBcGkgKyBcIi9cIiArIHMuaXNibiwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBpc2JuOiBzLmlzYm4sXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBzLnF1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBzaGVsZk51bWJlcjogcy5zaGVsZk51bWJlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIYXRhIG9sdcWfdHUsIGhhdGEga29kdTogJHtyZXNwb25zZS5zdGF0dXN9IGApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXRhIE9sdcWfdHUuJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsIl9ib29rcyIsIkFycmF5IiwiX3N0b2NrcyIsIl9jdXN0b21lcnMiLCJfc2FsZXMiLCJfcmVudHMiLCJfYm9va1NwZWNpZmljYXRpb25zIiwiX2NhbmNlbHMiLCJfc2FsZUNhcnQiLCJTYWxlQ2FydCIsIl9yZW50Q2FydCIsIlJlbnRDYXJ0IiwiZ2V0Qm9va3NMaXN0IiwiZ2V0U3RvY2tzTGlzdCIsImdldEN1c3RvbWVyc0xpc3QiLCJnZXRTYWxlc0xpc3QiLCJnZXRSZW50cyIsImdldEJvb2tTcGVjaWZpY2F0aW9ucyIsImdldENhbmNhbGVkU2FsZXMiLCJnZXRTYWxlQ2FydCIsImdldFJlbnRDYXJ0Iiwic2V0U2FsZUNhcnQiLCJ2YWx1ZSIsInNldFJlbnRDYXJ0IiwiaXNibiIsInByaWNlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIl9pc2JuIiwiX3ByaWNlIiwiX3N0YXJ0RGF0ZSIsIl9lbmREYXRlIiwibmFtZSIsImF1dGhvciIsInB1Ymxpc2hZZWFyIiwicGFnZXMiLCJib29rU3BlY2lmaWNhdGlvbiIsIl9uYW1lIiwiX2F1dGhvciIsIl9wdWJsaXNoWWVhciIsIl9wYWdlcyIsIl9ib29rU3BlY2lmaWNhdGlvbiIsImlkIiwiX2lkIiwiY2FuY2VsVHlwZSIsInJlZnVuZCIsImNhbmNlbGVkRGF0ZVRpbWUiLCJfY2FuY2VsVHlwZSIsIl9yZWZ1bmQiLCJfY2FuY2VsZWREYXRlVGltZSIsInN1ck5hbWUiLCJwaG9uZU51bWJlciIsIl9zdXJOYW1lIiwiX3Bob25lTnVtYmVyIiwiYm9vayIsInF1YW50aXR5IiwiX2Jvb2siLCJfcXVhbnRpdHkiLCJ0b0pTT04iLCJvcmRlckJvb2tJdGVtcyIsIlJlbnQiLCJTYWxlIiwic2FsZUJvb2tJdGVtcyIsIm9wZXJhdGlvbkRhdGVUaW1lIiwiY3VzdG9tZXJJZCIsIm9wZXJhdGlvbk51bWJlciIsInRvdGFsIiwicmVmdW5kRGF0ZSIsInN1cGVyIiwiX3JlZnVuZERhdGUiLCJfb3JkZXJCb29rSXRlbXMiLCJfY3VzdG9tZXJJZCIsIl9vcGVyYXRpb25EYXRlVGltZSIsIl9vcGVyYXRpb25OdW1iZXIiLCJfdG90YWwiLCJzaGVsZk51bWJlciIsIl9zaGVsZk51bWJlciIsInNob3dBbmRIaWRlIiwiYnRuSWQiLCJlbGVtZW50SWQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJkYiIsIkRhdGFCYXNlIiwiYm9va1NlcnZpY2UiLCJCb29rU2VydmljZSIsImN1c3RvbWVyU2VydmljZSIsIkN1c3RvbWVyU2VydmljZSIsImNhbmNlbFNlcnZpY2UiLCJDYW5jZWxTZXJ2aWNlIiwicmVudFNlcnZpY2UiLCJSZW50U2VydmljZSIsInNhbGVTZXJ2aWNlIiwiU2FsZVNlcnZpY2UiLCJzdG9ja1NlcnZpY2UiLCJTdG9ja1NlcnZpY2UiLCJjb25zb2xlIiwibG9nIiwiYWRkQ3VzdG9tZXIiLCJDdXN0b21lciIsImFkZFN0b2NrIiwiZ2V0QWxsQm9va3NEYXRhRnJvbVNlcnZpY2UiLCJib29rTGlzdCIsImluaXRpbGlhemVEYXRhIiwiYWRkQm9va0Zvcm0iLCJvbnN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0aXRsZSIsImdldCIsIkRhdGUiLCJib29rU3BlYyIsIkJvb2tTcGVjaWZpY2F0aW9uIiwiQm9vayIsInN1Y2Nlc3MiLCJjcmVhdGVCb29rIiwibGlzdEJvb2tzIiwiYWxlcnQiLCJyZXNldCIsImFkZFN0b2NrRm9ybSIsInF1YW50dGl5Iiwic3RvY2siLCJTdG9jayIsInNvbWUiLCJiIiwiYWRkU3RvY2tNb2NrIiwiYWRkQ3VzdG9tZXJGb3JtIiwic3VybmFtZSIsImN1c3RvbWVyIiwiYWRkQ3VzdG9tZXJNb2NrIiwic2FsZUJvb2tGb3JtIiwiZ2V0Qm9vayIsInBhcnNlSW50IiwiZ2V0U3RvY2siLCJhZGRCb29rVG9DYXJ0IiwiZXJyb3IiLCJzYWxlQ2FydCIsImxlbmd0aCIsImNhcnRUb1NhbGUiLCJjYW5jZWxTYWxlRm9ybSIsInNiaSIsInB1c2giLCJPcmRlckJvb2tJdGVtcyIsImEiLCJzYWxlTGlzdCIsInNhbGVOdW1iZXIiLCJzYWxlIiwiZ2V0U2FsZSIsImNhbmNlbFNhbGUiLCJDYW5jZWwiLCJjYW5jZWxTYWxlTW9jayIsImNhbmNlbFJlbnRGb3JtIiwickRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInJlbnRMaXN0IiwicmVudE51bWJlciIsInJlbnQiLCJnZXRSZW50IiwiY2FuY2VsUmVudCIsImNhbmNlbFJlbnRNb2NrIiwicmVudEJvb2tGb3JtIiwicmVudENhcnQiLCJjYXJ0VG9SZW50IiwicmVmdW5kQm9va0Zvcm0iLCJsaXN0Qm9va3NEaXYiLCJyb3ciLCJjb2x1bW4iLCJsYXN0Q2hpbGQiLCJjaGlsZHJlbiIsInJlbW92ZUNoaWxkIiwiZm9yRWFjaCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwiYXBwZW5kQ2hpbGQiLCJnZXRTdG9ja1F1YW50aXR5IiwiY2FsY3VsYXRlUmVmdW5kQW1vdW50IiwicmVmdW5kUmVudE1vY2siLCJib29rQXBpIiwiX2Jvb2tMaXN0IiwiZmluZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQWNjZXB0Iiwib2siLCJFcnJvciIsInN0YXR1cyIsInJlc3VsdCIsImpzb24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJib2R5IiwiRXhjZXB0aW9uIiwiY2FuY2VsbGVkTGlzdCIsImNhbmNlbFNhbGVBcGkiLCJjYW5jZWxSZW50QXBpIiwiX2NhbmNlbGxlZExpc3QiLCJjYWxjdWxhdGVEaWZmSG91cnMiLCJkMSIsImQyIiwiZGlmZk1pbGlzIiwiZ2V0VGltZSIsIk1hdGgiLCJmbG9vciIsImNhbmNlbCIsImNhbGN1bGF0ZUNhbmNlbFNhbGVSZWZ1bmQiLCJjYWxjdWxhdGVDYW5jZWxSZW50UmVmdW5kIiwiY3VzdG9tZXJMaXN0IiwiY3VzdG9tZXJBcGkiLCJfY3VzdG9tZXJMaXN0IiwibmV3Q3VzdG9tZXIiLCJyZW50QXBpIiwiX3JlbnRMaXN0IiwicmVmdW5kUGVyY2VudCIsImFkZFJlbnQiLCJjYWxjdWxhdGVUb3RhbCIsInN1YlRvdGFsIiwiaXRlbSIsImdlbmVyYXRlUmVudE51bWJlciIsInRvZGF5IiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjYWxjdWxhdGVSZWZ1bmQiLCJkaWZmIiwiZmluZSIsInMiLCJ1cGRhdGVSZW50Q2FydCIsInN1YlRvdGFsU3BhbiIsImluZGV4IiwidCIsImkiLCJpbmNyZWFzZVN0b2NrIiwiYWRkUmVudE1vY2siLCJyIiwiZnJvbSIsInNhbGVBcGkiLCJfc2FsZUxpc3QiLCJhZGRTYWxlIiwiZW50cnkiLCJnZW5lcmF0ZVNhbGVOdW1iZXIiLCJyZW1vdmVTYWxlIiwiaW5kZXhPZiIsInNwbGljZSIsInVwZGF0ZVNhbGVDYXJ0IiwicSIsImFkZFNhbGVNb2NrIiwic3RvY2tMaXN0Iiwic3RvY2tBcGkiLCJfc3RvY2tMaXN0IiwibmV3U3RvY2siLCJpbmNyZWFzZVN0b2NrTW9jayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=